"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[7236],{86907:function(e,t,n){const r=n(71313);e.exports=r},71313:function(e,t,n){var r=n(87592),i=n(44783),o=n(89408),l=n(76969),s=n(32998);function a(e){throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?code=${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function d(e,t,n){(s.DEPRECATED_$isGridSelection(n)||null!==l.$findMatchingParent(n.anchor.getNode(),(e=>s.DEPRECATED_$isGridCellNode(e)))&&null!==l.$findMatchingParent(n.focus.getNode(),(e=>s.DEPRECATED_$isGridCellNode(e))))&&1===t.length&&s.DEPRECATED_$isGridNode(t[0])?function(e,t,n,r){1===e.length&&s.DEPRECATED_$isGridNode(e[0])||a(42);var i=e[0];e=i.getChildren(),n=i.getFirstChildOrThrow().getChildrenSize();var o=i.getChildrenSize(),d=l.$findMatchingParent(t.anchor.getNode(),(e=>s.DEPRECATED_$isGridCellNode(e)));t=(i=d&&l.$findMatchingParent(d,(e=>s.DEPRECATED_$isGridRowNode(e))))&&l.$findMatchingParent(i,(e=>s.DEPRECATED_$isGridNode(e))),s.DEPRECATED_$isGridCellNode(d)&&s.DEPRECATED_$isGridRowNode(i)&&s.DEPRECATED_$isGridNode(t)||a(43);var u=i.getIndexWithinParent(),c=Math.min(t.getChildrenSize()-1,u+o-1);let f,g;o=d.getIndexWithinParent(),d=Math.min(i.getChildrenSize()-1,o+n-1),n=Math.min(o,d),i=Math.min(u,c),o=Math.max(o,d),u=Math.max(u,c),c=t.getChildren(),d=0;for(let t=i;t<=u;t++){var h=c[t];s.DEPRECATED_$isGridRowNode(h)||a(24);var _=e[d];s.DEPRECATED_$isGridRowNode(_)||a(24),h=h.getChildren(),_=_.getChildren();let r=0;for(let e=n;e<=o;e++){let l=h[e];s.DEPRECATED_$isGridCellNode(l)||a(25);let d=_[r];s.DEPRECATED_$isGridCellNode(d)||a(25),t===i&&e===n?f=l.getKey():t===u&&e===o&&(g=l.getKey());let c=l.getChildren();d.getChildren().forEach((e=>{s.$isTextNode(e)&&s.$createParagraphNode().append(e),l.append(e)})),c.forEach((e=>e.remove())),r++}d++}f&&g&&((e=s.DEPRECATED_$createGridSelection()).set(t.getKey(),f,g),s.$setSelection(e),r.dispatchCommand(s.SELECTION_CHANGE_COMMAND,void 0))}(t,n,!1,e):function(e,t){let n=[],r=null,o=null;for(let t=0;t<e.length;t++){let l=e[t];i.$isListItemNode(l)?(null==o&&(o=i.$createListNode("bullet"),n.push(o)),o.append(l)):(null!=o&&(o=null),s.$isDecoratorNode(l)&&l.isInline()||s.$isElementNode(l)&&l.isInline()||s.$isTextNode(l)||s.$isLineBreakNode(l)?(null===r&&(r=s.$createParagraphNode(),n.push(r)),null!==r&&r.append(l)):(n.push(l),r=null))}s.$isRangeSelection(t)?t.insertNodes(n):s.DEPRECATED_$isGridSelection(t)&&(e=t.anchor.getNode(),s.DEPRECATED_$isGridCellNode(e)||a(41),e.append(...n))}(t,n)}function u(e,t,n,r=[]){let i=null==t||n.isSelected(),l=s.$isElementNode(n)&&n.excludeFromCopy("html");var d=n;if(null!==t){var c=o.$cloneWithProperties(n);d=c=s.$isTextNode(c)&&null!=t?o.$sliceSelectedTextNodeContent(t,c):c}let f=s.$isElementNode(d)?d.getChildren():[];var g=d;(c=g.exportJSON()).type!==g.constructor.getType()&&a(58);var h=c.children;for(s.$isElementNode(g)&&(Array.isArray(h)||a(59)),s.$isTextNode(d)&&(c.text=d.__text),d=0;d<f.length;d++)h=u(e,t,g=f[d],c.children),!i&&s.$isElementNode(n)&&h&&n.extractWithChild(g,t,"clone")&&(i=!0);if(i&&!l)r.push(c);else if(Array.isArray(c.children))for(e=0;e<c.children.length;e++)r.push(c.children[e]);return i}function c(e,t){let n=[],r=s.$getRoot().getChildren();for(let i=0;i<r.length;i++)u(e,t,r[i],n);return{namespace:e._config.namespace,nodes:n}}function f(e){let t=[];for(let n=0;n<e.length;n++){let r=s.$parseSerializedNode(e[n]);s.$isTextNode(r)&&o.$addNodeStyle(r),t.push(r)}return t}t.$generateJSONFromSelectedNodes=c,t.$generateNodesFromSerializedNodes=f,t.$getHtmlContent=function(e){let t=s.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");return s.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:r.$generateHtmlFromNodes(e,t)},t.$getLexicalContent=function(e){let t=s.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");return s.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(c(e,t))},t.$insertDataTransferForPlainText=function(e,t){null!=(e=e.getData("text/plain"))&&t.insertRawText(e)},t.$insertDataTransferForRichText=function(e,t,n){var i=e.getData("application/x-lexical-editor");if(i)try{let e=JSON.parse(i);if(e.namespace===n._config.namespace&&Array.isArray(e.nodes))return d(n,f(e.nodes),t)}catch{}if(i=e.getData("text/html"))try{var o=(new DOMParser).parseFromString(i,"text/html");return d(n,r.$generateNodesFromDOM(n,o),t)}catch{}if(null!=(e=e.getData("text/plain")))if(s.$isRangeSelection(t))for(n=(e=e.split(/\r?\n/)).length,o=0;o<n;o++)t.insertText(e[o]),o<n-1&&t.insertParagraph();else t.insertRawText(e)},t.$insertGeneratedNodes=d},70573:function(e,t,n){const r=n(97370);e.exports=r},97370:function(e,t,n){var r=n(32998);t.registerDragonSupport=function(e){let t=t=>{var n=e.getRootElement();if(document.activeElement===n&&"string"==typeof(n=t.data)){try{var i=JSON.parse(n)}catch(e){return}if(i&&"nuanria_messaging"===i.protocol&&"request"===i.type&&(i=i.payload)&&"makeChanges"===i.functionId&&(i=i.args)){const[n,o,l,s,a]=i;e.update((()=>{const e=r.$getSelection();if(r.$isRangeSelection(e)){var i=e.anchor;let d=i.getNode(),u=0,c=0;r.$isTextNode(d)&&0<=n&&0<=o&&(u=n,c=n+o,e.setTextNodeRange(d,u,d,c)),u===c&&""===l||(e.insertRawText(l),d=i.getNode()),r.$isTextNode(d)&&(u=s,c=s+a,u=u>(i=d.getTextContentSize())?i:u,c=c>i?i:c,e.setTextNodeRange(d,u,d,c)),t.stopImmediatePropagation()}}))}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}},82154:function(e,t,n){const r=n(14893);e.exports=r},14893:function(e,t,n){var r=n(32998);t.createHeadlessEditor=function(e){let t=r.createEditor(e);return t._headless=!0,"registerDecoratorListener registerRootListener registerMutationListener getRootElement setRootElement getElementByKey focus blur".split(" ").forEach((e=>{t[e]=()=>{throw Error(`${e} is not supported in headless mode`)}})),t}},48854:function(e,t,n){const r=n(54379);e.exports=r},54379:function(e,t,n){var r=n(76969),i=n(32998);t.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}},t.registerHistory=function(e,t,n){let o=function(e,t){let n=Date.now(),r=0;return(o,l,s,a,d,u)=>{let c=Date.now();if(u.has("historic"))return r=0,n=c,2;let f=function(e,t,n,r,o){if(null===e||0===n.size&&0===r.size&&!o)return 0;var l=t._selection,s=e._selection;if(o)return 1;if(!(i.$isRangeSelection(l)&&i.$isRangeSelection(s)&&s.isCollapsed()&&l.isCollapsed()))return 0;o=t._nodeMap;let a=[];for(let e of n)void 0!==(n=o.get(e))&&a.push(n);for(let[e,t]of r)t&&(void 0===(r=o.get(e))||i.$isRootNode(r)||a.push(r));return 0===a.length?0:1<a.length?(t=(r=t._nodeMap).get(l.anchor.key),s=r.get(s.anchor.key),t&&s&&!e._nodeMap.has(t.__key)&&i.$isTextNode(t)&&1===t.__text.length&&1===l.anchor.offset?2:0):(t=a[0],e=e._nodeMap.get(t.__key),i.$isTextNode(e)&&i.$isTextNode(t)&&e.__mode===t.__mode?(e=e.__text)===(t=t.__text)?0:(l=l.anchor,s=s.anchor,l.key!==s.key||"text"!==l.type?0:(l=l.offset,s=s.offset,1==(e=t.length-e.length)&&s===l-1?2:-1===e&&s===l+1?3:-1===e&&s===l?4:0)):0)}(o,l,a,d,e.isComposing()),g=(()=>{var g=null===s||s.editor===e,h=u.has("history-push");if(!h&&g&&u.has("history-merge"))return 0;if(null===o)return 1;const _=l._selection,p=o._selection;return 0<a.size||0<d.size?!1===h&&0!==f&&f===r&&c<n+t&&g||1===a.size&&(h=Array.from(a)[0],g=o._nodeMap.get(h),h=l._nodeMap.get(h),g=!(!i.$isTextNode(g)||!i.$isTextNode(h))&&g.__type===h.__type&&g.__text===h.__text&&g.__mode===h.__mode&&g.__detail===h.__detail&&g.__style===h.__style&&g.__format===h.__format&&g.__parent===h.__parent)?0:1:null===p&&null!==_?0:2})();return n=c,r=f,g}}(e,n);n=({editorState:n,prevEditorState:r,dirtyLeaves:l,dirtyElements:s,tags:a})=>{const d=t.current,u=t.redoStack,c=t.undoStack,f=null===d?null:d.editorState;if(null===d||n!==f){if(1===(l=o(r,n,d,l,s,a)))0!==u.length&&(t.redoStack=[]),null!==d&&(c.push({...d,undoSelection:r.read(i.$getSelection)}),e.dispatchCommand(i.CAN_UNDO_COMMAND,!0));else if(2===l)return;t.current={editor:e,editorState:n}}};let l=r.mergeRegister(e.registerCommand(i.UNDO_COMMAND,(()=>{let n=t.redoStack,r=t.undoStack;if(0!==r.length){let o=t.current,l=r.pop();null!==o&&(n.push(o),e.dispatchCommand(i.CAN_REDO_COMMAND,!0)),0===r.length&&e.dispatchCommand(i.CAN_UNDO_COMMAND,!1),t.current=l||null,l&&l.editor.setEditorState(l.editorState.clone(l.undoSelection),{tag:"historic"})}return!0}),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.REDO_COMMAND,(()=>{let n=t.redoStack;var r=t.undoStack;if(0!==n.length){let o=t.current;null!==o&&(r.push(o),e.dispatchCommand(i.CAN_UNDO_COMMAND,!0)),r=n.pop(),0===n.length&&e.dispatchCommand(i.CAN_REDO_COMMAND,!1),t.current=r||null,r&&r.editor.setEditorState(r.editorState,{tag:"historic"})}return!0}),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.CLEAR_EDITOR_COMMAND,(()=>(t.undoStack=[],t.redoStack=[],t.current=null,!1)),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.CLEAR_HISTORY_COMMAND,(()=>(t.undoStack=[],t.redoStack=[],t.current=null,e.dispatchCommand(i.CAN_REDO_COMMAND,!1),e.dispatchCommand(i.CAN_UNDO_COMMAND,!1),!0)),i.COMMAND_PRIORITY_EDITOR),e.registerUpdateListener(n)),s=e.registerUpdateListener(n);return()=>{l(),s()}}},87592:function(e,t,n){const r=n(64478);e.exports=r},64478:function(e,t,n){var r=n(89408),i=n(32998);function o(e,t,n,l=null){let s=null==l||t.isSelected(),a=i.$isElementNode(t)&&t.excludeFromCopy("html");var d=t;null!==l&&(d=r.$cloneWithProperties(t),d=i.$isTextNode(d)&&null!=l?r.$sliceSelectedTextNodeContent(l,d):d);let u=i.$isElementNode(d)?d.getChildren():[],{element:c,after:f}=d.exportDOM(e);if(!c)return!1;let g=new DocumentFragment;for(let n=0;n<u.length;n++){let r=u[n],a=o(e,r,g,l);!s&&i.$isElementNode(t)&&a&&t.extractWithChild(r,l,"html")&&(s=!0)}return s&&!a?(c.append(g),n.append(c),f&&(e=f.call(d,c))&&c.replaceWith(e)):n.append(g),s}let l=new Set(["STYLE"]);function s(e,t,n=new Map,r,o=!1){let a=[];if(l.has(e.nodeName))return a;let d=null;var{nodeName:u}=e,c=t._htmlConversions.get(u.toLowerCase());if(u=null,void 0!==c)for(f of c)null!==(c=f(e))&&(null===u||u.priority<c.priority)&&(u=c);var f=(f=null!==u?u.conversion:null)?f(e,void 0,o):null;if(u=null,null!==f){if(u=f.after,d=f.node,null!==d){for(var[,g]of n)if(d=g(d,r),!d)break;d&&a.push(d)}null!=f.forChild&&n.set(e.nodeName,f.forChild)}for(e=e.childNodes,r=[],g=0;g<e.length;g++)r.push(...s(e[g],t,new Map(n),d,o||!0===(f&&f.preformatted)));return null!=u&&(r=u(r)),null==d?a=a.concat(r):i.$isElementNode(d)&&d.append(...r),a}t.$generateHtmlFromNodes=function(e,t){if(null==document||null==window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let n=document.createElement("div"),r=i.$getRoot().getChildren();for(let i=0;i<r.length;i++)o(e,r[i],n,t);return n.innerHTML},t.$generateNodesFromDOM=function(e,t){let n=[],r=(t=t.body?Array.from(t.body.childNodes):[]).length;for(let o=0;o<r;o++){var i=t[o];l.has(i.nodeName)||null!==(i=s(i,e))&&(n=n.concat(i))}return n}},44783:function(e,t,n){const r=n(19206);e.exports=r},19206:function(e,t,n){var r=n(32998),i=n(76969);function o(e){throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?code=${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function l(e){let t=1;for(e=e.getParent();null!=e;){if(E(e)){if(A(e=e.getParent())){t++,e=e.getParent();continue}o(40)}break}return t}function s(e){A(e=e.getParent())||o(40);let t=e;for(;null!==t;)t=t.getParent(),A(t)&&(e=t);return e}function a(e){let t=[];e=e.getChildren().filter(E);for(let n=0;n<e.length;n++){let r=e[n],i=r.getFirstChild();A(i)?t=t.concat(a(i)):t.push(r)}return t}function d(e){return E(e)&&A(e.getFirstChild())}function u(e){return N().append(e)}function c(e,t){return E(e)&&(0===t.length||1===t.length&&e.is(t[0])&&0===e.getChildrenSize())}function f(e,t){e.splice(e.getChildrenSize(),0,t)}function g(e,t){if(A(e))return e;let n=e.getPreviousSibling(),r=e.getNextSibling(),i=N();return i.setFormat(e.getFormatType()),i.setIndent(e.getIndent()),f(i,e.getChildren()),A(n)&&t===n.getListType()?(n.append(i),e.remove(),A(r)&&t===r.getListType()&&(f(n,r.getChildren()),r.remove()),n):A(r)&&t===r.getListType()?(r.getFirstChildOrThrow().insertBefore(i),e.remove(),r):((t=R(t)).append(i),e.replace(t),h(t),t)}function h(e,t){(t||e.getChildren()).forEach((e=>{let t=e.getValue();var n=e.getParent(),r=1;null!=n&&(A(n)?r=n.getStart():o(44)),n=e.getPreviousSiblings();for(let e=0;e<n.length;e++){let t=n[e];E(t)&&!A(t.getFirstChild())&&r++}t!==r&&e.setValue(r)}))}function _(e){let t=new Set;e.forEach((e=>{if(!d(e)&&!t.has(e.getKey())){var n=e.getParent(),r=e.getNextSibling(),i=e.getPreviousSibling();if(d(r)&&d(i))A(i=i.getFirstChild())&&(i.append(e),A(e=r.getFirstChild())&&(f(i,e=e.getChildren()),r.remove(),t.add(r.getKey())),h(i));else if(d(r))A(r=r.getFirstChild())&&(null!==(i=r.getFirstChild())&&i.insertBefore(e),h(r));else if(d(i))A(r=i.getFirstChild())&&(r.append(e),h(r));else if(A(n)){let t=N(),o=R(n.getListType());t.append(o),o.append(e),i?i.insertAfter(t):r?r.insertBefore(t):n.append(t)}A(n)&&h(n)}}))}function p(e){e.forEach((e=>{if(!d(e)){var t=e.getParent(),n=t?t.getParent():void 0,r=n?n.getParent():void 0;if(A(r)&&E(n)&&A(t)){var i=t?t.getFirstChild():void 0,o=t?t.getLastChild():void 0;if(e.is(i))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(o))n.insertAfter(e),t.isEmpty()&&n.remove();else{var l=t.getListType();i=N();let r=R(l);i.append(r),e.getPreviousSiblings().forEach((e=>r.append(e))),o=N(),l=R(l),o.append(l),f(l,e.getNextSiblings()),n.insertBefore(i),n.insertAfter(o),n.replace(e)}h(t),h(r)}}}))}function m(e){var t=r.$getSelection();if(r.$isRangeSelection(t)){var n=t.getNodes(),i=[];if(0===n.length&&n.push(t.anchor.getNode()),1===n.length){e:{for(n=n[0];null!==n;){if(E(n))break e;n=n.getParent()}n=null}null!==n&&(i=[n])}else{for(i=new Set,t=0;t<n.length;t++){let e=n[t];E(e)&&i.add(e)}i=Array.from(i)}0<i.length&&("indent"===e?_(i):p(i))}}class y extends r.ElementNode{static getType(){return"listitem"}static clone(e){return new y(e.__value,e.__checked,e.__key)}constructor(e,t,n){super(n),this.__value=void 0===e?1:e,this.__checked=t}createDOM(e){let t=document.createElement("li"),n=this.getParent();return A(n)&&(h(n),v(t,this,null,n)),t.value=this.__value,C(t,e.theme,this),t}updateDOM(e,t,n){let r=this.getParent();return A(r)&&(h(r),v(t,this,e,r)),t.value=this.__value,C(t,n.theme,this),!1}static importDOM(){return{li:()=>({conversion:T,priority:0})}}static importJSON(e){let t=new y(e.value,e.checked);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...e){for(let t=0;t<e.length;t++){let n=e[t];if(r.$isElementNode(n)&&this.canMergeWith(n)){let e=n.getChildren();this.append(...e),n.remove()}else super.append(n)}return this}replace(e){if(E(e))return super.replace(e);let t=this.getParentOrThrow();if(A(t)){var n=t.__children;let i=n.length;var r=n.indexOf(this.__key);if(0===r)t.insertBefore(e);else if(r===i-1)t.insertAfter(e);else{n=R(t.getListType());let o=t.getChildren();for(r+=1;r<i;r++)n.append(o[r]);t.insertAfter(e),e.insertAfter(n)}this.remove(),1===i&&t.remove()}return e}insertAfter(e){var t=this.getParentOrThrow();A(t)||o(39);var n=this.getNextSiblings();if(E(e))return t=super.insertAfter(e),A(e=e.getParentOrThrow())&&h(e),t;if(A(e)&&e.getListType()===t.getListType()){for(t=e,n=(e=e.getChildren()).length-1;0<=n;n--)t=e[n],this.insertAfter(t);return t}if(t.insertAfter(e),0!==n.length){let r=R(t.getListType());n.forEach((e=>r.append(e))),e.insertAfter(r)}return e}remove(e){let t=this.getNextSibling();super.remove(e),null!==t&&A(e=t.getParent())&&h(e)}insertNewAfter(){let e=N(null==this.__checked&&void 0);return this.insertAfter(e),e}collapseAtStart(e){let t=r.$createParagraphNode();this.getChildren().forEach((e=>t.append(e)));var n=this.getParentOrThrow(),i=n.getParentOrThrow();let o=E(i);return 1===n.getChildrenSize()?o?(n.remove(),i.select()):(n.replace(t),n=e.anchor,e=e.focus,i=t.getKey(),"element"===n.type&&n.getNode().is(this)&&n.set(i,n.offset,"element"),"element"===e.type&&e.getNode().is(this)&&e.set(i,e.offset,"element")):(n.insertBefore(t),this.remove()),!0}getValue(){return this.getLatest().__value}setValue(e){this.getWritable().__value=e}getChecked(){return this.getLatest().__checked}setChecked(e){this.getWritable().__checked=e}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){var e=this.getParent();if(null===e)return this.getLatest().__indent;e=e.getParentOrThrow();let t=0;for(;E(e);)e=e.getParentOrThrow().getParentOrThrow(),t++;return t}setIndent(e){let t=this.getIndent();for(;t!==e;)t<e?(_([this]),t++):(p([this]),t--);return this}canIndent(){return!1}insertBefore(e){if(E(e)){let e=this.getParentOrThrow();A(e)&&h(e,this.getNextSiblings())}return super.insertBefore(e)}canInsertAfter(e){return E(e)}canReplaceWith(e){return E(e)}canMergeWith(e){return r.$isParagraphNode(e)||E(e)}extractWithChild(e,t){if(!r.$isRangeSelection(t))return!1;e=t.anchor.getNode();let n=t.focus.getNode();return this.isParentOf(e)&&this.isParentOf(n)&&this.getTextContent().length===t.getTextContent().length}}function C(e,t,n){let r=[],o=[];var l=(t=t.list)?t.listitem:void 0;if(t&&t.nested)var s=t.nested.listitem;if(void 0!==l&&(l=l.split(" "),r.push(...l)),t){l=A(l=n.getParent())&&"check"===l.getListType();let e=n.getChecked();l&&!e||o.push(t.listitemUnchecked),l&&e||o.push(t.listitemChecked),l&&r.push(e?t.listitemChecked:t.listitemUnchecked)}void 0!==s&&(s=s.split(" "),n.getChildren().some((e=>A(e)))?r.push(...s):o.push(...s)),0<o.length&&i.removeClassNamesFromElement(e,...o),0<r.length&&i.addClassNamesToElement(e,...r)}function v(e,t,n,r){"check"===r.getListType()?A(t.getFirstChild())?(e.removeAttribute("role"),e.removeAttribute("tabIndex"),e.removeAttribute("aria-checked")):(e.setAttribute("role","checkbox"),e.setAttribute("tabIndex","-1"),n&&t.__checked===n.__checked||e.setAttribute("aria-checked",t.getChecked()?"true":"false")):null!=t.getChecked()&&t.setChecked(void 0)}function T(){return{node:N()}}function N(e){return new y(void 0,e)}function E(e){return e instanceof y}class x extends r.ElementNode{static getType(){return"list"}static clone(e){return new x(e.__listType||M[e.__tag],e.__start,e.__key)}constructor(e,t,n){super(n),this.__listType=e=M[e]||e,this.__tag="number"===e?"ol":"ul",this.__start=t}getTag(){return this.__tag}getListType(){return this.__listType}getStart(){return this.__start}createDOM(e){let t=document.createElement(this.__tag);return 1!==this.__start&&t.setAttribute("start",String(this.__start)),t.__lexicalListType=this.__listType,S(t,e.theme,this),t}updateDOM(e,t,n){return e.__tag!==this.__tag||(S(t,n.theme,this),!1)}static importDOM(){return{ol:()=>({conversion:D,priority:0}),ul:()=>({conversion:D,priority:0})}}static importJSON(e){let t=R(e.listType,e.start);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...e){for(let n=0;n<e.length;n++){var t=e[n];if(E(t))super.append(t);else{let e=N();A(t)||(t=r.$createTextNode(t.getTextContent())),e.append(t),super.append(e)}}return this}extractWithChild(e){return E(e)}}function S(e,t,n){let r=[],o=[];var s=t.list;if(void 0!==s){let e=s[`${n.__tag}Depth`]||[],i=(t=l(n)-1)%e.length;var a=e[i];let d,u=s[n.__tag];if(void 0!==(s=s.nested)&&s.list&&(d=s.list),void 0!==u&&r.push(u),void 0!==a)for(a=a.split(" "),r.push(...a),a=0;a<e.length;a++)a!==i&&o.push(n.__tag+a);void 0!==d&&(n=d.split(" "),1<t?r.push(...n):o.push(...n))}0<o.length&&i.removeClassNamesFromElement(e,...o),0<r.length&&i.addClassNamesToElement(e,...r)}function O(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];E(r)?(t.push(r),r.getChildren().forEach((e=>{A(e)&&t.push(u(e))}))):t.push(u(r))}return t}function D(e){let t=null;return"ol"===(e=e.nodeName.toLowerCase())?t=R("number"):"ul"===e&&(t=R("bullet")),{after:O,node:t}}let M={ol:"number",ul:"bullet"};function R(e,t=1){return new x(e,t)}function A(e){return e instanceof x}let w=r.createCommand(),$=r.createCommand(),P=r.createCommand(),k=r.createCommand();t.$createListItemNode=N,t.$createListNode=R,t.$getListDepth=l,t.$handleListInsertParagraph=function(){var e=r.$getSelection();if(!r.$isRangeSelection(e)||!e.isCollapsed())return!1;if(!E(e=e.anchor.getNode())||""!==e.getTextContent())return!1;var t=s(e),n=e.getParent();A(n)||o(40);let i,l=n.getParent();if(r.$isRootOrShadowRoot(l))i=r.$createParagraphNode(),t.insertAfter(i);else{if(!E(l))return!1;i=N(),l.insertAfter(i)}if(i.select(),0<(t=e.getNextSiblings()).length){let e=R(n.getListType());r.$isParagraphNode(i)?i.insertAfter(e):((n=N()).append(e),i.insertAfter(n)),t.forEach((t=>{t.remove(),e.append(t)}))}return function(e){for(;null==e.getNextSibling()&&null==e.getPreviousSibling();){let t=e.getParent();if(null==t||!E(e)&&!A(e))break;e=t}e.remove()}(e),!0},t.$isListItemNode=E,t.$isListNode=A,t.INSERT_CHECK_LIST_COMMAND=P,t.INSERT_ORDERED_LIST_COMMAND=$,t.INSERT_UNORDERED_LIST_COMMAND=w,t.ListItemNode=y,t.ListNode=x,t.REMOVE_LIST_COMMAND=k,t.indentList=function(){m("indent")},t.insertList=function(e,t){e.update((()=>{var e=r.$getSelection();if(r.$isRangeSelection(e)){var n=e.getNodes(),i=(e=e.anchor.getNode()).getParent();if(c(e,n))n=R(t),r.$isRootOrShadowRoot(i)?(e.replace(n),i=N(),r.$isElementNode(e)&&(i.setFormat(e.getFormatType()),i.setIndent(e.getIndent())),n.append(i)):E(e)&&(f(n,(e=e.getParentOrThrow()).getChildren()),e.replace(n));else for(e=new Set,i=0;i<n.length;i++){var o=n[i];if(r.$isElementNode(o)&&o.isEmpty()&&!e.has(o.getKey()))g(o,t);else if(r.$isLeafNode(o))for(o=o.getParent();null!=o;){let n=o.getKey();if(A(o)){if(!e.has(n)){var l=R(t);f(l,o.getChildren()),o.replace(l),h(l),e.add(n)}break}if(l=o.getParent(),r.$isRootOrShadowRoot(l)&&!e.has(n)){e.add(n),g(o,t);break}o=l}}}}))},t.outdentList=function(){m("outdent")},t.removeList=function(e){e.update((()=>{let e=r.$getSelection();if(r.$isRangeSelection(e)){var t=new Set,n=e.getNodes(),o=e.anchor.getNode();if(c(o,n))t.add(s(o));else for(o=0;o<n.length;o++){var l=n[o];r.$isLeafNode(l)&&null!=(l=i.$getNearestNodeOfType(l,y))&&t.add(s(l))}for(let i of t){t=i,n=a(i);for(let i of n)f(n=r.$createParagraphNode(),i.getChildren()),t.insertAfter(n),t=n,i.__key===e.anchor.key&&e.anchor.set(n.getKey(),0,"element"),i.__key===e.focus.key&&e.focus.set(n.getKey(),0,"element"),i.remove();i.remove()}}}))}},99299:function(e,t,n){const r=n(61490);e.exports=r},61490:function(e,t,n){var r=n(86907),i=n(89408),o=n(76969),l=n(32998);let s="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,a=s&&"documentMode"in document?document.documentMode:null;s&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),s&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);let d=!(!s||!("InputEvent"in window)||a)&&"getTargetRanges"in new window.InputEvent("input"),u=s&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),c=s&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;function f(e,t){t.update((()=>{let n=e instanceof KeyboardEvent?null:e.clipboardData,i=l.$getSelection();if(null!==i&&null!=n){e.preventDefault();let o=r.$getHtmlContent(t);null!==o&&n.setData("text/html",o),n.setData("text/plain",i.getTextContent())}}))}t.registerPlainText=function(e){return o.mergeRegister(e.registerCommand(l.DELETE_CHARACTER_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.deleteCharacter(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DELETE_WORD_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.deleteWord(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DELETE_LINE_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.deleteLine(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.CONTROLLED_TEXT_INSERTION_COMMAND,(e=>{const t=l.$getSelection();if(!l.$isRangeSelection(t))return!1;if("string"==typeof e)t.insertText(e);else{const n=e.dataTransfer;null!=n?r.$insertDataTransferForPlainText(n,t):(e=e.data)&&t.insertText(e)}return!0}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.REMOVE_TEXT_COMMAND,(()=>{const e=l.$getSelection();return!!l.$isRangeSelection(e)&&(e.removeText(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.INSERT_LINE_BREAK_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.insertLineBreak(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.INSERT_PARAGRAPH_COMMAND,(()=>{const e=l.$getSelection();return!!l.$isRangeSelection(e)&&(e.insertLineBreak(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_LEFT_COMMAND,(e=>{const t=l.$getSelection();if(!l.$isRangeSelection(t))return!1;const n=e.shiftKey;return!!i.$shouldOverrideDefaultCharacterSelection(t,!0)&&(e.preventDefault(),i.$moveCharacter(t,n,!0),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_RIGHT_COMMAND,(e=>{const t=l.$getSelection();if(!l.$isRangeSelection(t))return!1;const n=e.shiftKey;return!!i.$shouldOverrideDefaultCharacterSelection(t,!1)&&(e.preventDefault(),i.$moveCharacter(t,n,!1),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_BACKSPACE_COMMAND,(t=>{const n=l.$getSelection();return!!l.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(l.DELETE_CHARACTER_COMMAND,!0))}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_DELETE_COMMAND,(t=>{const n=l.$getSelection();return!!l.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(l.DELETE_CHARACTER_COMMAND,!1))}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ENTER_COMMAND,(t=>{const n=l.$getSelection();if(!l.$isRangeSelection(n))return!1;if(null!==t){if((c||u)&&d)return!1;t.preventDefault()}return e.dispatchCommand(l.INSERT_LINE_BREAK_COMMAND,!1)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.COPY_COMMAND,(t=>{const n=l.$getSelection();return!!l.$isRangeSelection(n)&&(f(t,e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.CUT_COMMAND,(t=>{const n=l.$getSelection();return!!l.$isRangeSelection(n)&&(function(e,t){f(e,t),t.update((()=>{let e=l.$getSelection();l.$isRangeSelection(e)&&e.removeText()}))}(t,e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.PASTE_COMMAND,(t=>{const n=l.$getSelection();return!!l.$isRangeSelection(n)&&(function(e,t){e.preventDefault(),t.update((()=>{let t=l.$getSelection(),n=e instanceof InputEvent||e instanceof KeyboardEvent?null:e.clipboardData;null!=n&&l.$isRangeSelection(t)&&r.$insertDataTransferForPlainText(n,t)}),{tag:"paste"})}(t,e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DROP_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(e.preventDefault(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DRAGSTART_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(e.preventDefault(),!0)}),l.COMMAND_PRIORITY_EDITOR))}},11356:function(e,t,n){const r=n(50024);e.exports=r},50024:function(e,t,n){var r=n(84260),i=n(32998),o=n(67294),l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect;t.ClearEditorPlugin=function({onClear:e}){let[t]=r.useLexicalComposerContext();return l((()=>t.registerCommand(i.CLEAR_EDITOR_COMMAND,(()=>(t.update((()=>{if(null==e){let e=i.$getRoot(),t=i.$getSelection(),n=i.$createParagraphNode();e.clear(),e.append(n),null!==t&&n.select()}else e()})),!0)),i.COMMAND_PRIORITY_EDITOR)),[t,e]),null}},22292:function(e,t,n){const r=n(44149);e.exports=r},44149:function(e,t,n){var r=n(84260),i=n(32998),o=n(67294),l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect;let s={tag:"history-merge"};t.LexicalComposer=function({initialConfig:e,children:t}){let n=o.useMemo((()=>{const{theme:t,namespace:n,editor__DEPRECATED:o,nodes:l,onError:a,editorState:d}=e,u=r.createLexicalComposerContext(null,t);let c=o||null;if(null===c){const e=i.createEditor({editable:!1,namespace:n,nodes:l,onError:t=>a(t,e),theme:t});!function(e,t){if(null!==t)if(void 0===t)e.update((()=>{var t=i.$getRoot();if(t.isEmpty()){let n=i.$createParagraphNode();t.append(n),t=document.activeElement,(null!==i.$getSelection()||null!==t&&t===e.getRootElement())&&n.select()}}),s);else if(null!==t)switch(typeof t){case"string":let n=e.parseEditorState(t);e.setEditorState(n,s);break;case"object":e.setEditorState(t,s);break;case"function":e.update((()=>{i.$getRoot().isEmpty()&&t(e)}),s)}}(e,d),c=e}return[c,u]}),[]);return l((()=>{let t=e.editable,[r]=n;r.setEditable(void 0===t||t)}),[]),o.createElement(r.LexicalComposerContext.Provider,{value:n},t)}},84260:function(e,t,n){const r=n(33489);e.exports=r},33489:function(e,t,n){var r=n(67294);let i=r.createContext(null);t.LexicalComposerContext=i,t.createLexicalComposerContext=function(e,t){let n=null;return null!=e&&(n=e[1]),{getTheme:function(){return null!=t?t:null!=n?n.getTheme():null}}},t.useLexicalComposerContext=function(){let e=r.useContext(i);if(null==e)throw Error("Minified Lexical error #8; visit https://lexical.dev/docs/error?code=8 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");return e}},6898:function(e,t,n){const r=n(15781);e.exports=r},15781:function(e,t,n){var r=n(84260),i=n(67294),o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;t.ContentEditable=function({ariaActiveDescendantID:e,ariaAutoComplete:t,ariaControls:n,ariaDescribedBy:l,ariaExpanded:s,ariaLabel:a,ariaLabelledBy:d,ariaMultiline:u,ariaOwneeID:c,ariaRequired:f,autoCapitalize:g,autoComplete:h,autoCorrect:_,className:p,id:m,role:y="textbox",spellCheck:C=!0,style:v,tabIndex:T,testid:N}){let[E]=r.useLexicalComposerContext(),[x,S]=i.useState(!1),O=i.useCallback((e=>{E.setRootElement(e)}),[E]);return o((()=>(S(E.isEditable()),E.registerEditableListener((e=>{S(e)})))),[E]),i.createElement("div",{"aria-activedescendant":x?e:null,"aria-autocomplete":x?t:null,"aria-controls":x?n:null,"aria-describedby":l,"aria-expanded":x&&"combobox"===y?!!s:null,"aria-label":a,"aria-labelledby":d,"aria-multiline":u,"aria-owns":x?c:null,"aria-required":f,autoCapitalize:void 0!==g?String(g):void 0,autoComplete:h,autoCorrect:void 0!==_?String(_):void 0,className:p,contentEditable:x,"data-testid":N,id:m,ref:O,role:x?y:void 0,spellCheck:C,style:v,tabIndex:T})}},4506:function(e,t,n){const r=n(548);e.exports=r},548:function(e,t,n){var r=n(84260),i=n(48854),o=n(67294);t.createEmptyHistoryState=i.createEmptyHistoryState,t.HistoryPlugin=function({externalHistoryState:e}){let[t]=r.useLexicalComposerContext();return function(e,t,n=1e3){let r=o.useMemo((()=>t||i.createEmptyHistoryState()),[t]);o.useEffect((()=>i.registerHistory(e,r,n)),[n,e,r])}(t,e),null}},71954:function(e,t,n){const r=n(61689);e.exports=r},61689:function(e,t,n){var r=n(84260),i=n(67294),o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;t.OnChangePlugin=function({ignoreHistoryMergeTagChange:e=!0,ignoreSelectionChange:t=!1,onChange:n}){let[i]=r.useLexicalComposerContext();return o((()=>{if(n)return i.registerUpdateListener((({editorState:r,dirtyElements:o,dirtyLeaves:l,prevEditorState:s,tags:a})=>{t&&0===o.size&&0===l.size||e&&a.has("history-merge")||s.isEmpty()||n(r,i)}))}),[i,e,t,n]),null}},17150:function(e,t,n){const r=n(24800);e.exports=r},24800:function(e,t,n){var r=n(84260),i=n(67294),o=n(2977),l=n(76969),s=n(73935),a=n(70573),d=n(99299),u="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function c(e){return e.getEditorState().read(o.$canShowPlaceholderCurry(e.isComposing(),e.isEditable()))}t.PlainTextPlugin=function({contentEditable:e,placeholder:t}){let[n]=r.useLexicalComposerContext(),o=function(e){let[t,n]=i.useState((()=>c(e)));return u((()=>{function t(){let t=c(e);n(t)}return t(),l.mergeRegister(e.registerUpdateListener((()=>{t()})),e.registerEditableListener((()=>{t()})))}),[e]),t}(n),f=function(e){let[t,n]=i.useState((()=>e.getDecorators()));return u((()=>e.registerDecoratorListener((e=>{s.flushSync((()=>{n(e)}))}))),[e]),i.useEffect((()=>{n(e.getDecorators())}),[e]),i.useMemo((()=>{let n=[],r=Object.keys(t);for(let o=0;o<r.length;o++){var i=r[o];let l=t[i];null!==(i=e.getElementByKey(i))&&n.push(s.createPortal(l,i))}return n}),[t,e])}(n);return function(e){u((()=>l.mergeRegister(d.registerPlainText(e),a.registerDragonSupport(e))),[e])}(n),i.createElement(i.Fragment,null,e,o&&t,f)}},86146:function(e,t,n){const r=n(61827);e.exports=r},61827:function(e,t,n){var r=n(84260),i=n(67294),o=n(2977),l=n(76969),s=n(73935),a=n(70573),d=n(2903),u="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function c(e){return e.getEditorState().read(o.$canShowPlaceholderCurry(e.isComposing(),e.isEditable()))}t.RichTextPlugin=function({contentEditable:e,placeholder:t}){let[n]=r.useLexicalComposerContext(),o=function(e){let[t,n]=i.useState((()=>c(e)));return u((()=>{function t(){let t=c(e);n(t)}return t(),l.mergeRegister(e.registerUpdateListener((()=>{t()})),e.registerEditableListener((()=>{t()})))}),[e]),t}(n),f=function(e){let[t,n]=i.useState((()=>e.getDecorators()));return u((()=>e.registerDecoratorListener((e=>{s.flushSync((()=>{n(e)}))}))),[e]),i.useEffect((()=>{n(e.getDecorators())}),[e]),i.useMemo((()=>{let n=[],r=Object.keys(t);for(let o=0;o<r.length;o++){var i=r[o];let l=t[i];null!==(i=e.getElementByKey(i))&&n.push(s.createPortal(l,i))}return n}),[t,e])}(n);return function(e){u((()=>l.mergeRegister(d.registerRichText(e),a.registerDragonSupport(e))),[e])}(n),i.createElement(i.Fragment,null,e,o&&t,f)}},50185:function(e,t,n){const r=n(68349);e.exports=r},68349:function(e,t,n){var r=n(84260),i=n(76969),o=n(32998),l=n(67294),s="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?l.useLayoutEffect:l.useEffect;let a=e=>{var t=document.getElementById("typeahead-menu");if(t){t=t.getBoundingClientRect();const n=e.getBoundingClientRect();n.bottom>t.bottom?e.scrollIntoView(!1):n.top<t.top&&e.scrollIntoView()}};function d(e){l.startTransition?l.startTransition(e):e()}function u({close:e,editor:t,anchorElement:n,resolution:r,options:d,menuRenderFn:u,onSelectOption:c}){let[f,g]=l.useState(null);l.useEffect((()=>{g(0)}),[r.match.matchingString]);let h=l.useCallback((n=>{t.update((()=>{const i=function(e,t){if(e=o.$getSelection(),!o.$isRangeSelection(e)||!e.isCollapsed())return null;var n=e.anchor;if("text"!==n.type)return null;if(!(e=n.getNode()).isSimpleText())return null;n=n.offset;let r=e.getTextContent().slice(0,n);var i=t.matchingString;for(let e=t=t.replaceableString.length;e<=i.length;e++)r.substr(-e)===i.substr(0,e)&&(t=e);if(0>(t=n-t))return null;let l;return 0===t?[l]=e.splitText(n):[,l]=e.splitText(t,n),l}(t,r.match);c(n,i,e,r.match.matchingString)}))}),[e,t,r.match,c]),_=l.useCallback((e=>{const n=t.getRootElement();null!==n&&(n.setAttribute("aria-activedescendant","typeahead-item-"+e),g(e))}),[t]);return l.useEffect((()=>()=>{let e=t.getRootElement();null!==e&&e.removeAttribute("aria-activedescendant")}),[t]),s((()=>{null===d?g(null):null===f&&_(0)}),[d,f,_]),l.useEffect((()=>i.mergeRegister(t.registerCommand(o.KEY_ARROW_DOWN_COMMAND,(e=>{if(null!==d&&d.length&&null!==f){var t=f!==d.length-1?f+1:0;_(t),null!=(t=d[t]).ref&&t.ref.current&&a(t.ref.current),e.preventDefault(),e.stopImmediatePropagation()}return!0}),o.COMMAND_PRIORITY_NORMAL),t.registerCommand(o.KEY_ARROW_UP_COMMAND,(e=>{if(null!==d&&d.length&&null!==f){var t=0!==f?f-1:d.length-1;_(t),null!=(t=d[t]).ref&&t.ref.current&&a(t.ref.current),e.preventDefault(),e.stopImmediatePropagation()}return!0}),o.COMMAND_PRIORITY_NORMAL),t.registerCommand(o.KEY_ESCAPE_COMMAND,(t=>(t.preventDefault(),t.stopImmediatePropagation(),e(),!0)),o.COMMAND_PRIORITY_NORMAL),t.registerCommand(o.KEY_TAB_COMMAND,(e=>null!==d&&null!==f&&null!=d[f]&&(e.preventDefault(),e.stopImmediatePropagation(),h(d[f]),!0)),o.COMMAND_PRIORITY_NORMAL),t.registerCommand(o.KEY_ENTER_COMMAND,(e=>null!==d&&null!==f&&null!=d[f]&&(null!==e&&(e.preventDefault(),e.stopImmediatePropagation()),h(d[f]),!0)),o.COMMAND_PRIORITY_NORMAL))),[h,e,t,d,f,_]),u(n,l.useMemo((()=>({selectOptionAndCleanUp:h,selectedIndex:f,setHighlightedIndex:g})),[h,f]),r.match.matchingString)}function c(e){let[t]=r.useLexicalComposerContext(),n=l.useRef(document.createElement("div"));return l.useEffect((()=>{function r(){let t=n.current;if(t.setAttribute("aria-label","Typeahead menu"),t.setAttribute("id","typeahead-menu"),t.setAttribute("role","listbox"),null!==i&&null!==e){let{left:r,top:o,width:l,height:s}=e.getRect();t.style.top=`${o+s+5+window.pageYOffset}px`,t.style.left=`${r+("start"===e.position?0:l)+window.pageXOffset}px`,t.style.display="block",t.style.position="absolute",t.isConnected||document.body.append(t),n.current=t,i.setAttribute("aria-controls","typeahead-menu")}}let i=t.getRootElement();if(null!==e)return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),null!==i&&i.removeAttribute("aria-controls")}}),[t,e]),n}t.LexicalNodeMenuPlugin=function({options:e,nodeKey:t,position:n="end",onClose:i,onSelectOption:s,menuRenderFn:a}){let[f]=r.useLexicalComposerContext(),[g,h]=l.useState(null),_=c(g);return l.useEffect((()=>{t&&null==g?f.update((()=>{let e=o.$getNodeByKey(t),r=f.getElementByKey(t);if(null!=e&&null!=r){let t=e.getTextContent();d((()=>h({getRect:()=>r.getBoundingClientRect(),match:{leadOffset:t.length,matchingString:t,replaceableString:t},position:n})))}})):null==t&&null!=g&&h(null)}),[f,t,n,g]),null===g||null===f?null:l.createElement(u,{close:i,resolution:g,editor:f,anchorElement:_.current,options:e,menuRenderFn:a,onSelectOption:s})},t.LexicalTypeaheadMenuPlugin=function({options:e,onQueryChange:t,onSelectOption:n,menuRenderFn:i,triggerFn:s,position:a="start"}){let[f]=r.useLexicalComposerContext(),[g,h]=l.useState(null),_=c(g);l.useEffect((()=>{let e=document.createRange(),n=f.registerUpdateListener((()=>{f.getEditorState().read((()=>{const n=e,r=o.$getSelection(),i=function(e){let t=null;return e.getEditorState().read((()=>{var e=o.$getSelection();if(o.$isRangeSelection(e)){var n=e.anchor;"text"!==n.type?t=null:(e=n.getNode()).isSimpleText()?(n=n.offset,t=e.getTextContent().slice(0,n)):t=null}})),t}(f);if(o.$isRangeSelection(r)&&r.isCollapsed()&&null!==i&&null!==n){var l=s(i,f);t(l?l.matchingString:null),null===l||function(e,t){return 0===t&&e.getEditorState().read((()=>{var e=o.$getSelection();return!!o.$isRangeSelection(e)&&(e=e.anchor.getNode().getPreviousSibling(),o.$isTextNode(e)&&e.isTextEntity())}))}(f,l.leadOffset)||null===function(e,t){var n=window.getSelection();if(null===n||!n.isCollapsed)return!1;let r=n.anchorNode;if(n=n.anchorOffset,null==r||null==n)return!1;try{t.setStart(r,e),t.setEnd(r,n)}catch(e){return!1}return!0}(l.leadOffset,n)?h(null):d((()=>h({getRect:()=>n.getBoundingClientRect(),match:l,position:a})))}else h(null)}))}));return()=>{e=null,n()}}),[f,s,t,g,a]);let p=l.useCallback((()=>{h(null)}),[]);return null===g||null===f?null:l.createElement(u,{close:p,resolution:g,editor:f,anchorElement:_.current,options:e,menuRenderFn:i,onSelectOption:n})},t.PUNCTUATION="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",t.TypeaheadOption=class{constructor(e){this.key=e,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(e){this.ref={current:e}}},t.useBasicTypeaheadTriggerMatch=function(e,{minLength:t=1,maxLength:n=75}){return l.useCallback((r=>{if(null!==(r=new RegExp("(^|\\s|\\()(["+e+"]((?:[^"+e+"\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;\\s]){0,"+n+"}))$").exec(r))){let e=r[1],n=r[3];if(n.length>=t)return{leadOffset:r.index+e.length,matchingString:n,replaceableString:r[2]}}return null}),[n,t,e])}},2903:function(e,t,n){const r=n(40925);e.exports=r},40925:function(e,t,n){var r=n(86907),i=n(89408),o=n(76969),l=n(32998);let s="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,a=s&&"documentMode"in document?document.documentMode:null;s&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),s&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);let d=!(!s||!("InputEvent"in window)||a)&&"getTargetRanges"in new window.InputEvent("input"),u=s&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),c=s&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;class f extends l.ElementNode{static getType(){return"quote"}static clone(e){return new f(e.__key)}constructor(e){super(e)}createDOM(e){let t=document.createElement("blockquote");return o.addClassNamesToElement(t,e.theme.quote),t}updateDOM(){return!1}static importDOM(){return{blockquote:()=>({conversion:m,priority:0})}}static importJSON(e){let t=g();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(){let e=l.$createParagraphNode(),t=this.getDirection();return e.setDirection(t),this.insertAfter(e),e}collapseAtStart(){let e=l.$createParagraphNode();return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}}function g(){return new f}class h extends l.ElementNode{static getType(){return"heading"}static clone(e){return new h(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}createDOM(e){let t=this.__tag,n=document.createElement(t);return void 0!==(e=e.theme.heading)&&o.addClassNamesToElement(n,e[t]),n}updateDOM(){return!1}static importDOM(){return{h1:()=>({conversion:p,priority:0}),h2:()=>({conversion:p,priority:0}),h3:()=>({conversion:p,priority:0}),h4:()=>({conversion:p,priority:0}),h5:()=>({conversion:p,priority:0}),h6:()=>({conversion:p,priority:0}),p:e=>null!==(e=e.firstChild)&&_(e)?{conversion:()=>({node:null}),priority:3}:null,span:e=>_(e)?{conversion:()=>({node:y("h1")}),priority:3}:null}}static importJSON(e){let t=y(e.tag);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(){let e=l.$createParagraphNode(),t=this.getDirection();return e.setDirection(t),this.insertAfter(e),e}collapseAtStart(){let e=l.$createParagraphNode();return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}extractWithChild(){return!0}}function _(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function p(e){let t=null;return"h1"!==(e=e.nodeName.toLowerCase())&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e||(t=y(e)),{node:t}}function m(){return{node:g()}}function y(e){return new h(e)}function C(e,t){var n=l.$getSelection();if(null!==n){e.preventDefault(),e=e instanceof KeyboardEvent?null:e.clipboardData;let i=r.$getHtmlContent(t);t=r.$getLexicalContent(t),null!=e?(null!==i&&e.setData("text/html",i),null!==t&&e.setData("application/x-lexical-editor",t),n=n.getTextContent(),e.setData("text/plain",n)):null!=(n=navigator.clipboard)&&(e=[new ClipboardItem({"text/html":new Blob([i],{type:"text/html"})})],n.write(e))}}function v(e,t){var n=l.$getSelection();if(l.$isRangeSelection(n)){var r=new Set;n=n.getNodes();for(let l=0;l<n.length;l++){let s=n[l];var i=s.getKey();r.has(i)||(r.add(i),(i=o.$getNearestBlockElementAncestorOrThrow(s)).canInsertTab()?e(s):i.canIndent()&&t(i))}}}function T(e){return e=l.$getNearestNodeFromDOMNode(e),l.$isDecoratorNode(e)}t.$createHeadingNode=y,t.$createQuoteNode=g,t.$isHeadingNode=function(e){return e instanceof h},t.$isQuoteNode=function(e){return e instanceof f},t.HeadingNode=h,t.QuoteNode=f,t.registerRichText=function(e){return o.mergeRegister(e.registerCommand(l.CLICK_COMMAND,(()=>{const e=l.$getSelection();return!!l.$isNodeSelection(e)&&(e.clear(),!0)}),0),e.registerCommand(l.DELETE_CHARACTER_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.deleteCharacter(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DELETE_WORD_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.deleteWord(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DELETE_LINE_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.deleteLine(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.CONTROLLED_TEXT_INSERTION_COMMAND,(t=>{const n=l.$getSelection();if("string"==typeof t)l.$isRangeSelection(n)?n.insertText(t):l.DEPRECATED_$isGridSelection(n);else{if(!l.$isRangeSelection(n)&&!l.DEPRECATED_$isGridSelection(n))return!1;const i=t.dataTransfer;null!=i?r.$insertDataTransferForRichText(i,n,e):l.$isRangeSelection(n)&&(t=t.data)&&n.insertText(t)}return!0}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.REMOVE_TEXT_COMMAND,(()=>{const e=l.$getSelection();return!!l.$isRangeSelection(e)&&(e.removeText(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.FORMAT_TEXT_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.formatText(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.FORMAT_ELEMENT_COMMAND,(e=>{var t=l.$getSelection();if(!l.$isRangeSelection(t)&&!l.$isNodeSelection(t))return!1;t=t.getNodes();for(const n of t)o.$getNearestBlockElementAncestorOrThrow(n).setFormat(e);return!0}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.INSERT_LINE_BREAK_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.insertLineBreak(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.INSERT_PARAGRAPH_COMMAND,(()=>{const e=l.$getSelection();return!!l.$isRangeSelection(e)&&(e.insertParagraph(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.INDENT_CONTENT_COMMAND,(()=>(v((()=>{e.dispatchCommand(l.CONTROLLED_TEXT_INSERTION_COMMAND,"\t")}),(e=>{const t=e.getIndent();10!==t&&e.setIndent(t+1)})),!0)),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.OUTDENT_CONTENT_COMMAND,(()=>(v((t=>{l.$isTextNode(t)&&"\t"===(t=t.getTextContent())[t.length-1]&&e.dispatchCommand(l.DELETE_CHARACTER_COMMAND,!0)}),(e=>{const t=e.getIndent();0!==t&&e.setIndent(t-1)})),!0)),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_UP_COMMAND,(e=>{const t=l.$getSelection();return!!(l.$isNodeSelection(t)&&!T(e.target)&&(e=t.getNodes(),0<e.length))&&(e[0].selectPrevious(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_DOWN_COMMAND,(()=>{var e=l.$getSelection();return!!(l.$isNodeSelection(e)&&(e=e.getNodes(),0<e.length))&&(e[0].selectNext(0,0),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_LEFT_COMMAND,(e=>{const t=l.$getSelection();if(l.$isNodeSelection(t)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectPrevious(),!0}return!!l.$isRangeSelection(t)&&!!i.$shouldOverrideDefaultCharacterSelection(t,!0)&&(n=e.shiftKey,e.preventDefault(),i.$moveCharacter(t,n,!0),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_RIGHT_COMMAND,(e=>{const t=l.$getSelection();if(l.$isNodeSelection(t)&&!T(e.target)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectNext(0,0),!0}return!!l.$isRangeSelection(t)&&(n=e.shiftKey,!!i.$shouldOverrideDefaultCharacterSelection(t,!1)&&(e.preventDefault(),i.$moveCharacter(t,n,!1),!0))}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_BACKSPACE_COMMAND,(t=>{if(T(t.target))return!1;const n=l.$getSelection();if(!l.$isRangeSelection(n))return!1;t.preventDefault(),({anchor:t}=n);const r=t.getNode();return n.isCollapsed()&&0===t.offset&&!l.$isRootNode(r)&&0<o.$getNearestBlockElementAncestorOrThrow(r).getIndent()?e.dispatchCommand(l.OUTDENT_CONTENT_COMMAND,void 0):e.dispatchCommand(l.DELETE_CHARACTER_COMMAND,!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_DELETE_COMMAND,(t=>{if(T(t.target))return!1;const n=l.$getSelection();return!!l.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(l.DELETE_CHARACTER_COMMAND,!1))}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ENTER_COMMAND,(t=>{const n=l.$getSelection();if(!l.$isRangeSelection(n))return!1;if(null!==t){if((c||u)&&d)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(l.INSERT_LINE_BREAK_COMMAND,!1)}return e.dispatchCommand(l.INSERT_PARAGRAPH_COMMAND,void 0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_TAB_COMMAND,(t=>{const n=l.$getSelection();return!!l.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(t.shiftKey?l.OUTDENT_CONTENT_COMMAND:l.INDENT_CONTENT_COMMAND,void 0))}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ESCAPE_COMMAND,(()=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(e.blur(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DROP_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(e.preventDefault(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DRAGSTART_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(e.preventDefault(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.COPY_COMMAND,(t=>(C(t,e),!0)),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.CUT_COMMAND,(t=>(function(e,t){C(e,t),e=l.$getSelection(),l.$isRangeSelection(e)?e.removeText():l.$isNodeSelection(e)&&e.getNodes().forEach((e=>e.remove()))}(t,e),!0)),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.PASTE_COMMAND,(t=>{const n=l.$getSelection();return!(!l.$isRangeSelection(n)&&!l.DEPRECATED_$isGridSelection(n)||(function(e,t){e.preventDefault(),t.update((()=>{let n=l.$getSelection(),i=e instanceof InputEvent||e instanceof KeyboardEvent?null:e.clipboardData;null!=i&&(l.$isRangeSelection(n)||l.DEPRECATED_$isGridSelection(n))&&r.$insertDataTransferForRichText(i,n,t)}),{tag:"paste"})}(t,e),0))}),l.COMMAND_PRIORITY_EDITOR))}},89408:function(e,t,n){const r=n(49235);e.exports=r},49235:function(e,t,n){var r=n(32998);let i=new Map;function o(e){let t=(e=e.getLatest()).constructor.clone(e);return t.__parent=e.__parent,r.$isElementNode(e)&&r.$isElementNode(t)?(t.__children=Array.from(e.__children),t.__format=e.__format,t.__indent=e.__indent,t.__dir=e.__dir):r.$isTextNode(e)&&r.$isTextNode(t)&&(t.__format=e.__format,t.__style=e.__style,t.__mode=e.__mode,t.__detail=e.__detail),t}function l(e,t,n,i,l,s){for(var a=t;null!==e;){for(t=e.getParent();null!==t&&t.excludeFromCopy("clone");)t=t.getParent();if(null===t)break;if(!r.$isElementNode(e)||!e.excludeFromCopy("clone")){let d=e.getKey(),u=s.get(d),c=void 0===u;if(c&&(u=o(e),s.set(d,u)),!r.$isTextNode(u)||u.isSegmented()||u.isToken()?r.$isElementNode(u)&&(u.__children=u.__children.slice(i?a:0,i?void 0:(a||0)+1)):u.__text=u.__text.slice(i?a:0,i?n:a),r.$isRootNode(t)){c&&l.push(d);break}}a=s.get(t.getKey()),a=r.$isElementNode(a)?a.__children.indexOf(e.getKey()):e.getIndexWithinParent(),e=t}}function s(e){let t=i.get(e);return void 0===t&&(t=a(e),i.set(e,t)),t}function a(e){let t={};e=e.split(";");for(let n of e)if(""!==n){let[e,r]=n.split(/:([^]+)/);t[e.trim()]=r.trim()}return t}function d(e,t){var n=s(e.getStyle());for(r in t=n?{...n,...t}:t,n="",t)r&&(n+=`${r}: ${t[r]};`);var r=n;e.setStyle(r),i.set(r,t)}function u(e,t,n,r){e.modify(t?"extend":"move",n,r)}function c(e){return e=e.anchor.getNode(),"rtl"===(r.$isRootNode(e)?e:e.getParentOrThrow()).getDirection()}function f(e){for(;null!==e&&!r.$isRootOrShadowRoot(e);){let t=e.getLatest(),n=e.getParent();0===t.__children.length&&e.remove(!0),e=n}}function g(e,t,n,i,o=null){if(0!==t.length){var l=t[0],s=new Map,a=[];(l=r.$isElementNode(l)?l:l.getParentOrThrow()).isInline()&&(l=l.getParentOrThrow());for(var d=!1;null!==l;){var u=l.getPreviousSibling();if(null!==u){l=u,d=!0;break}if(l=l.getParentOrThrow(),r.$isRootOrShadowRoot(l))break}u=new Set;for(var c=0;c<n;c++){var g=t[c];r.$isElementNode(g)&&0===g.getChildrenSize()&&u.add(g.getKey())}var h=new Set;for(c=0;c<n;c++){var _=(g=t[c]).getParent();if(null!==_&&_.isInline()&&(_=_.getParent()),null!==_&&r.$isLeafNode(g)&&!h.has(g.getKey())){if(g=_.getKey(),void 0===s.get(g)){let e=i();e.setFormat(_.getFormatType()),e.setIndent(_.getIndent()),a.push(e),s.set(g,e),_.getChildren().forEach((t=>{e.append(t),h.add(t.getKey())})),f(_)}}else u.has(g.getKey())&&((_=i()).setFormat(g.getFormatType()),_.setIndent(g.getIndent()),a.push(_),g.remove(!0))}if(null!==o)for(t=0;t<a.length;t++)o.append(a[t]);if(r.$isRootOrShadowRoot(l))if(d)if(null!==o)l.insertAfter(o);else for(o=a.length-1;0<=o;o--)l.insertAfter(a[o]);else if(t=l.getFirstChild(),r.$isElementNode(t)&&(l=t),null===t)if(o)l.append(o);else for(o=0;o<a.length;o++)l.append(a[o]);else if(null!==o)t.insertBefore(o);else for(l=0;l<a.length;l++)t.insertBefore(a[l]);else if(o)l.insertAfter(o);else for(o=a.length-1;0<=o;o--)l.insertAfter(a[o]);a=r.$getPreviousSelection(),r.$isRangeSelection(a)&&a.anchor.getNode().isAttached()&&a.focus.getNode().isAttached()?r.$setSelection(a.clone()):e.dirty=!0}}function h(e){for(;null!=e;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function _(e){let t=e.parentNode;if(null==t)throw Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}t.$addNodeStyle=function(e){let t=a(e=e.getStyle());i.set(e,t)},t.$cloneContents=function(e){return function(e){if(r.$isRangeSelection(e)){var t=e.anchor,n=e.focus;let[c,f]=e.getCharacterOffsets();if(0===(e=e.getNodes()).length)return{nodeMap:[],range:[]};let g=e.length;var i=e[0],s=i.getParent();if(null!==s&&(!s.canBeEmpty()||r.$isRootNode(s))){var a=s.__children;if(a.length===g){for(var d=!0,u=0;u<a.length;u++)if(a[u]!==e[u].__key){d=!1;break}d&&(g++,e.push(s))}}for(s=e[g-1],t=t.isBefore(n),n=new Map,a=[],l(i,t?c:f,(d=r.$isTextNode(i)&&1===g)?t?f:c:void 0,!0,a,n),i=0;i<g;i++){let t=(u=e[i]).getKey();if(!(n.has(t)||r.$isElementNode(u)&&u.excludeFromCopy("clone"))){let e=o(u);r.$isRootNode(u.getParent())&&a.push(u.getKey()),"root"!==t&&n.set(t,e)}}return l(s,d?void 0:t?f:c,void 0,!1,a,n),{nodeMap:Array.from(n.entries()),range:a}}if(r.DEPRECATED_$isGridSelection(e))return{nodeMap:e.getNodes().map((e=>[e.getKey(),e=o(e)])),range:[e.gridKey]};throw Error("Minified Lexical error #1; visit https://lexical.dev/docs/error?code=1 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")}(e)},t.$cloneWithProperties=o,t.$getSelectionStyleValueForProperty=function(e,t,n=""){let i=null,o=e.getNodes();var l=e.anchor,a=e.focus,d=e.isBackward();for(e=d?a.offset:l.offset,l=d?a.getNode():l.getNode(),a=0;a<o.length;a++){var u=o[a];if((0===a||0!==e||!u.is(l))&&r.$isTextNode(u)){d=t;var c=n;if(d=null!==(u=s(u=u.getStyle()))&&u[d]||c,null===i)i=d;else if(i!==d){i="";break}}}return null===i?n:i},t.$isAtNodeEnd=function(e){return"text"===e.type?e.offset===e.getNode().getTextContentSize():e.offset===e.getNode().getChildrenSize()},t.$isParentElementRTL=c,t.$moveCaretSelection=u,t.$moveCharacter=function(e,t,n){let r=c(e);u(e,t,n?!r:r,"character")},t.$patchStyleText=function(e,t){var n=e.getNodes();let i=n.length-1,o=n[0],l=n[i];if(!e.isCollapsed()){var s=e.anchor,a=e.focus;e=o.getTextContent().length;var u=a.offset,c=s.offset;if(s=(a=s.isBefore(a))?c:u,a=a?u:c,s===o.getTextContentSize()){let e=o.getNextSibling();r.$isTextNode(e)&&(s=c=0,o=e)}if(o.is(l))r.$isTextNode(o)&&(s=c>u?u:c)!==(a=c>u?c:u)&&(0===s&&a===e?(d(o,t),o.select(s,a)):(n=o.splitText(s,a),d(n=0===s?n[0]:n[1],t),n.select(0,a-s)));else for(r.$isTextNode(o)&&(0!==s&&(o=o.splitText(s)[1]),d(o,t)),r.$isTextNode(l)&&(a!==(e=l.getTextContent().length)&&([l]=l.splitText(a)),0!==a&&d(l,t)),e=1;e<i;e++)c=(u=n[e]).getKey(),r.$isTextNode(u)&&c!==o.getKey()&&c!==l.getKey()&&!u.isToken()&&d(u,t)}},t.$selectAll=function(e){let t=e.anchor;e=e.focus;var n=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();let i=n.getFirstDescendant();n=n.getLastDescendant();let o="element",l="element",s=0;r.$isTextNode(i)?o="text":r.$isElementNode(i)||null===i||(i=i.getParentOrThrow()),r.$isTextNode(n)?(l="text",s=n.getTextContentSize()):r.$isElementNode(n)||null===n||(n=n.getParentOrThrow()),i&&n&&(t.set(i.getKey(),0,o),e.set(n.getKey(),s,l))},t.$shouldOverrideDefaultCharacterSelection=function(e,t){return e=r.$getDecoratorNode(e.focus,t),r.$isDecoratorNode(e)&&!e.isIsolated()},t.$sliceSelectedTextNodeContent=function(e,t){if(t.isSelected()&&!t.isSegmented()&&!t.isToken()&&(r.$isRangeSelection(e)||r.DEPRECATED_$isGridSelection(e))){var n=e.anchor.getNode(),i=e.focus.getNode(),o=t.is(n),l=t.is(i);if(o||l){o=e.isBackward();let r,[s,a]=e.getCharacterOffsets();e=n.is(i),l=t.is(o?i:n),i=t.is(o?n:i),n=0,e?(n=s>a?a:s,r=s>a?s:a):l?(n=o?a:s,r=void 0):i&&(n=0,r=o=o?s:a),t.__text=t.__text.slice(n,r)}}return t},t.$wrapNodes=function(e,t,n=null){var i=e.getNodes();let o=i.length;var l=e.anchor;if(0===o||1===o&&"element"===l.type&&0===l.getNode().getChildrenSize()){i=(e="text"===l.type?l.getNode().getParentOrThrow():l.getNode()).getChildren();let r=t();r.setFormat(e.getFormatType()),r.setIndent(e.getIndent()),i.forEach((e=>r.append(e))),n&&(r=n.append(r)),e.replace(r)}else{l=null;var s=[];for(let a=0;a<o;a++){let o=i[a];r.$isRootOrShadowRoot(o)?(g(e,s,s.length,t,n),s=[],l=o):null===l||null!==l&&r.$hasAncestor(o,l)?s.push(o):(g(e,s,s.length,t,n),s=[o])}g(e,s,s.length,t,n)}},t.$wrapNodesImpl=g,t.createDOMRange=function(e,t,n,i,o){let l=t.getKey(),s=i.getKey(),a=document.createRange(),d=e.getElementByKey(l);if(e=e.getElementByKey(s),r.$isTextNode(t)&&(d=h(d)),r.$isTextNode(i)&&(e=h(e)),void 0===t||void 0===i||null===d||null===e)return null;"BR"===d.nodeName&&([d,n]=_(d)),"BR"===e.nodeName&&([e,o]=_(e)),t=d.firstChild,d===e&&null!=t&&"BR"===t.nodeName&&0===n&&0===o&&(o=1);try{a.setStart(d,n),a.setEnd(e,o)}catch(e){return null}return!a.collapsed||n===o&&l===s||(a.setStart(e,o),a.setEnd(d,n)),a},t.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(null===n)return[];e=n.getBoundingClientRect(),n=getComputedStyle(n),n=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);let r,i=(t=Array.from(t.getClientRects())).length;for(let o=0;o<i;o++){let l=t[o],s=l.width+n===e.width;r&&r.top===l.top&&r.left===l.left&&r.width===l.width&&r.height===l.height||s?(t.splice(o--,1),i--):r=l}return t},t.getStyleObjectFromCSS=s,t.trimTextContentFromAnchor=function(e,t,n){let i=t.getNode();if(r.$isElementNode(i)){var o=i.getDescendantByIndex(t.offset);null!==o&&(i=o)}for(;0<n&&null!==i;){var l=i.getPreviousSibling(),s=0;if(null===l){for(var a=(o=i.getParentOrThrow()).getPreviousSibling();null===a;){if(null===(o=o.getParent())){l=null;break}a=o.getPreviousSibling()}null!==o&&(s=o.isInline()?0:2,l=r.$isElementNode(a)?a.getLastDescendant():a)}let d=i.getTextContent();""===d&&r.$isElementNode(i)&&!i.isInline()&&(d="\n\n"),a=(o=d.length)-n;let u=d.slice(0,a);if(!r.$isTextNode(i)||n>=o)a=i.getParent(),i.remove(),null!=a&&0===a.getChildrenSize()&&a.remove(),n-=o+s,i=l;else{let c=i.getKey();null!==(l=e.getEditorState().read((()=>{const e=r.$getNodeByKey(c);return r.$isTextNode(e)&&e.isSimpleText()?e.getTextContent():null})))&&l!==d?(n=r.$getPreviousSelection(),o=i,i.isSimpleText()?i.setTextContent(l):(o=r.$createTextNode(l),i.replace(o)),r.$isRangeSelection(n)&&n.isCollapsed()&&(n=n.anchor.offset,o.select(n,n))):i.isSimpleText()?(l=t.key===c,(s=t.offset)<n&&(s=o),n=l?s-n:0,o=l?s:a,l&&0===n?([n]=i.splitText(n,o),n.remove()):([,n]=i.splitText(n,o),n.remove())):(n=r.$createTextNode(u),i.replace(n)),n=0}}}},2977:function(e,t,n){const r=n(28263);e.exports=r},28263:function(e,t,n){var r=n(32998);function i(e,t=!0){return!e&&(e=o(),t&&(e=e.trim()),""===e)}function o(){return r.$getRoot().getTextContent()}function l(e,t){if(!t||!i(e,!1))return!1;if(1<(t=(e=r.$getRoot().getChildren()).length))return!1;for(let i=0;i<t;i++){var n=e[i];if(r.$isElementNode(n)){if("paragraph"!==n.__type||0!==n.__indent)return!1;let e=(n=n.getChildren()).length;for(let t=0;t<e;t++)if(!r.$isTextNode(n[i]))return!1}}return!0}t.$canShowPlaceholder=l,t.$canShowPlaceholderCurry=function(e,t){return()=>l(e,t)},t.$findTextIntersectionFromCharacters=function(e,t){var n=e.getFirstChild();e=0;e:for(;null!==n;){if(r.$isElementNode(n)){var i=n.getFirstChild();if(null!==i){n=i;continue}}else if(r.$isTextNode(n)){if(e+(i=n.getTextContentSize())>t)return{node:n,offset:t-e};e+=i}if(null===(i=n.getNextSibling())){for(n=n.getParent();null!==n;){if(null!==(i=n.getNextSibling())){n=i;continue e}n=n.getParent()}break}n=i}return null},t.$isRootTextContentEmpty=i,t.$isRootTextContentEmptyCurry=function(e,t){return()=>i(e,t)},t.$rootTextContent=o,t.registerLexicalTextEntity=function(e,t,n,i){let o=e=>{const t=r.$createTextNode(e.getTextContent());t.setFormat(e.getFormat()),e.replace(t)};return[e.registerNodeTransform(r.TextNode,(e=>{if(e.isSimpleText()){var l=e.getPreviousSibling(),s=e.getTextContent(),a=e;if(r.$isTextNode(l)){var d=l.getTextContent(),u=t(d+s);if(l instanceof n){if(null===u||0!==l.getLatest().__mode)return void o(l);if(0<(u=u.end-d.length))return a=d+(a=s.slice(0,u)),l.select(),l.setTextContent(a),void(u===s.length?e.remove():(l=s.slice(u),e.setTextContent(l)))}else if(null===u||u.start<d.length)return}for(;;){if(s=u=null===(e=t(s))?"":s.slice(e.end),""===u){if(d=a.getNextSibling(),r.$isTextNode(d)){if(u=a.getTextContent()+d.getTextContent(),null===(u=t(u))){d instanceof n?o(d):d.markDirty();break}if(0!==u.start)break}}else if(null!==(d=t(u))&&0===d.start)break;if(null===e)break;if(0===e.start&&r.$isTextNode(l)&&l.isTextEntity())continue;let c;if(0===e.start?[c,a]=a.splitText(e.end):[,c,a]=a.splitText(e.start,e.end),e=i(c),c.replace(e),null==a)break}}})),e=e.registerNodeTransform(n,(e=>{var i=e.getTextContent();const l=t(i);null===l||0!==l.start?o(e):i.length>l.end?e.splitText(l.end):(i=e.getPreviousSibling(),r.$isTextNode(i)&&i.isTextEntity()&&(o(i),o(e)),i=e.getNextSibling(),r.$isTextNode(i)&&i.isTextEntity()&&(o(i),e instanceof n&&o(e)))}))]}},76969:function(e,t,n){const r=n(87502);e.exports=r},87502:function(e,t,n){var r=n(32998);function i(e){throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?code=${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function o(e,t){for(;e!==r.$getRoot()&&null!=e;){if(t(e))return e;e=e.getParent()}return null}function l(e,t,n,o,s){var d=n._nodes.get(e.__type);for(var u in void 0===d&&i(5),e){var c=e[u];if(null!=c&&"object"==typeof c&&null!=(c=c.editorState)){var f=r.createEditor({namespace:c.namespace});f._nodes=n._nodes,f._parentEditor=n._parentEditor,f._pendingEditorState=a(f,c),e[u]=f}}if(d=d.klass,u=e.__key,e.__key=void 0,d=d.clone(e),e.__key=u,u=d.__key,s._nodeMap.set(u,d),d.__parent=o,r.$isElementNode(d)){for(o=e.__children,c=0;c<o.length;c++)void 0!==(f=t.get(o[c]))&&(f=l(f,t,n,u,s).__key,d.__children.push(f));d.__indent=e.__indent,d.__format=e.__format,d.__dir=e.__dir}else r.$isTextNode(d)&&(d.__format=e.__format,d.__style=e.__style,d.__mode=e.__mode,d.__detail=e.__detail);return d}function s(e,t){let n=new(0,t._editorState.constructor)(new Map),r=new Map(e._nodeMap),i=r.get("root");e=t._updating;try{t._updating=!1,t.update((()=>{let e=t._dirtyElements,o=t._dirtyLeaves,s=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._dirtyType=0;try{l(i,r,t,null,n)}finally{t._dirtyElements=e,t._dirtyLeaves=o,t._dirtyType=s}}))}finally{t._updating=e}return n._readOnly=!0,n}function a(e,t){return s(t="string"==typeof t?JSON.parse(t):t,e)}t.$dfs=function(e,t){let n=[];e=(e||r.$getRoot()).getLatest(),t=t||(r.$isElementNode(e)?e.getLastDescendant():e);for(var i=e,o=0;null!==(i=i.getParent());)o++;for(i=o;null!==e&&!e.is(t);)if(n.push({depth:i,node:e}),r.$isElementNode(e)&&0<e.getChildrenSize())e=e.getFirstChild(),i++;else for(o=null;null===o&&null!==e;)null===(o=e.getNextSibling())?(e=e.getParent(),i--):e=o;return null!==e&&e.is(t)&&n.push({depth:i,node:e}),n},t.$findMatchingParent=o,t.$getNearestBlockElementAncestorOrThrow=function(e){return e=o(e,(e=>r.$isElementNode(e)&&!e.isInline())),r.$isElementNode(e)||i(4),e},t.$getNearestNodeOfType=function(e,t){for(;null!=e;){if(e instanceof t)return e;e=e.getParent()}return null},t.$insertNodeToNearestRoot=function(e){var t=r.$getSelection();return r.$isRangeSelection(t)?t.focus.getNode().getTopLevelElementOrThrow().insertAfter(e):r.$isNodeSelection(t)||r.DEPRECATED_$isGridSelection(t)?(t=t.getNodes())[t.length-1].getTopLevelElementOrThrow().insertAfter(e):r.$getRoot().append(e),t=r.$createParagraphNode(),e.insertAfter(t),t.select(),e.getLatest()},t.$restoreEditorState=function(e,t){let n=new Map(t._nodeMap),i=e._pendingEditorState;i&&(i._nodeMap=n),e._dirtyType=2,e=t._selection,r.$setSelection(null===e?null:e.clone())},t.$wrapNodeInElement=function(e,t){return t=t(),e.replace(t),t.append(e),t},t.addClassNamesToElement=function(e,...t){t.forEach((t=>{"string"==typeof t&&e.classList.add(...t.split(" "))}))},t.mergeRegister=function(...e){return()=>{e.forEach((e=>e()))}},t.registerNestedElementResolver=function(e,t,n,r){return e.registerNodeTransform(t,(e=>{e:{for(var i=e.getChildren(),o=0;o<i.length;o++)if(i[o]instanceof t){i=null;break e}for(i=e;null!==i;)if(o=i,(i=i.getParent())instanceof t){i={child:o,parent:i};break e}i=null}if(null!==i){const{child:t,parent:l}=i;if(t.is(e)){if(r(l,e),i=(e=t.getNextSiblings()).length,l.insertAfter(t),0!==i){o=n(l),t.insertAfter(o);for(let t=0;t<i;t++)o.append(e[t])}l.canBeEmpty()||0!==l.getChildrenSize()||l.remove()}}}))},t.removeClassNamesFromElement=function(e,...t){t.forEach((t=>{"string"==typeof t&&e.classList.remove(...t.split(" "))}))},t.unstable_convertLegacyJSONEditorState=a},32998:function(e,t,n){const r=n(34556);e.exports=r},34556:function(e,t){let n={},r={},i={},o={},l={},s={},a={},d={},u={},c={},f={},g={},h={},_={},p={},m={},y={},C={},v={},T={},N={},E={},x={},S={},O={},D={},M={},R={},A={},w={},$={},P={},k={},I={};function b(e){throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?code=${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let L="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,F=L&&"documentMode"in document?document.documentMode:null,B=L&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),K=L&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),W=!(!L||!("InputEvent"in window)||F)&&"getTargetRanges"in new window.InputEvent("input"),z=L&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Y=L&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,H=z||Y?"":"",G=K?"":H,U=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,J=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,V={bold:1,code:16,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},X={directionless:1,unmergeable:2},j={center:2,justify:4,left:1,right:3},q={2:"center",4:"justify",1:"left",3:"right"},Q={normal:0,segmented:2,token:1},Z={0:"normal",2:"segmented",1:"token"},ee=!1,te=0;function ne(e){te=e.timeStamp}function re(e,t,n){return t.__lexicalLineBreak===e||void 0!==e[`__lexicalKey_${n._key}`]}function ie(e,t,n){ee=!0;let r=100<performance.now()-te;try{wn(e,(()=>{let i=dn()||function(e){return e.getEditorState().read((()=>{let e=dn();return null!==e?e.clone():null}))}(e);var o=new Map,l=e.getRootElement(),s=e._editorState;let a=!1,d="";for(var u=0;u<t.length;u++){var c=t[u],f=c.type,g=c.target,h=Ne(g,s);if(!bn(h))if("characterData"===f){if(c=r&&or(h))e:{f=g;var _=h;if(Ut(c=i)){var p=c.anchor.getNode();if(p.is(_)&&c.format!==p.getFormat()){c=!1;break e}}c=3===f.nodeType&&_.isAttached()}c&&(f=c=null,null!==(_=window.getSelection())&&_.anchorNode===g&&(c=_.anchorOffset,f=_.focusOffset),null!==(g=g.nodeValue)&&$e(h,g,c,f,!1))}else if("childList"===f){for(a=!0,f=c.addedNodes,_=0;_<f.length;_++){var m=Te(p=f[_]),y=p.parentNode;null==y||null!==m||"BR"===p.nodeName&&re(p,y,e)||(K&&(m=p.innerText||p.nodeValue)&&(d+=m),y.removeChild(p))}if(0<(f=(c=c.removedNodes).length)){for(_=0,p=0;p<f;p++)"BR"===(y=c[p]).nodeName&&re(y,g,e)&&(g.appendChild(y),_++);f!==_&&(g===l&&(h=s._nodeMap.get("root")),o.set(g,h))}}}if(0<o.size)for(let[t,n]of o)if(Fn(n))for(o=n.__children,l=t.firstChild,s=0;s<o.length;s++)null!==(u=e.getElementByKey(o[s]))&&(null==l?(t.appendChild(u),l=u):l!==u&&t.replaceChild(u,l),l=l.nextSibling);else or(n)&&n.markDirty();if(0<(o=n.takeRecords()).length){for(l=0;l<o.length;l++)for(s=(u=o[l]).addedNodes,u=u.target,h=0;h<s.length;h++)null==(c=(g=s[h]).parentNode)||"BR"!==g.nodeName||re(g,u,e)||c.removeChild(g);n.takeRecords()}null!==i&&(a&&(i.dirty=!0,Oe(i)),K&&Fe(e)&&i.insertRawText(d))}))}finally{ee=!1}}function oe(e){let t=e._observer;null!==t&&ie(e,t.takeRecords(),t)}function le(e){0===te&&ze(e).addEventListener("textInput",ne,!0),e._observer=new MutationObserver(((t,n)=>{ie(e,t,n)}))}let se=1,ae="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function de(e,t,n){let r=e.getRootElement();try{var i;if(i=null!==r&&r.contains(t)&&r.contains(n)&&null!==t){let e=document.activeElement,n=null!==e?e.nodeName:null;i=!bn(Ne(t))||"INPUT"!==n&&"TEXTAREA"!==n}return i&&ue(t)===e}catch(e){return!1}}function ue(e){for(;null!=e;){let t=e.__lexicalEditor;if(null!=t)return t;e=e.parentNode}return null}function ce(e){return e.isToken()||e.isSegmented()}function fe(e){for(;null!=e;){if(3===e.nodeType)return e;e=e.firstChild}return null}function ge(e,t,n){return e&(t=V[t])&&(null===n||0==(n&t))?e^t:null===n||n&t?e|t:e}function he(e){return or(e)||Jn(e)||bn(e)}function _e(e){var t=e.getParent();if(null!==t){let n=(t=t.getWritable().__children).indexOf(e.__key);-1===n&&b(31),me(e),t.splice(n,1)}}function pe(e){99<Cn&&b(14);var t=e.getLatest(),n=t.__parent,r=Tn();let i=Nn(),o=r._nodeMap;if(r=i._dirtyElements,null!==n)for(;null!==n&&!r.has(n);){let e=o.get(n);if(void 0===e)break;r.set(n,!1),n=e.__parent}t=t.__key,i._dirtyType=1,Fn(e)?r.set(t,!0):i._dirtyLeaves.add(t)}function me(e){let t=e.getPreviousSibling();e=e.getNextSibling(),null!==t&&pe(t),null!==e&&pe(e)}function ye(e){vn();var t=Nn();let n=t._compositionKey;e!==n&&(t._compositionKey=e,null!==n&&null!==(t=ve(n))&&t.getWritable(),null!==e&&null!==(e=ve(e))&&e.getWritable())}function Ce(){return mn?null:Nn()._compositionKey}function ve(e,t){return void 0===(e=(t||Tn())._nodeMap.get(e))?null:e}function Te(e,t){return void 0!==(e=e[`__lexicalKey_${Nn()._key}`])?ve(e,t):null}function Ne(e,t){for(;null!=e;){let n=Te(e,t);if(null!==n)return n;e=e.parentNode}return null}function Ee(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t}function xe(e){return e.read((()=>Se().getTextContent()))}function Se(){return Tn()._nodeMap.get("root")}function Oe(e){let t=Tn();null!==e&&(e.dirty=!0,e._cachedNodes=null),t._selection=e}function De(e){var t,n=Nn();e:{for(t=e;null!=t;){let e=t[`__lexicalKey_${n._key}`];if(void 0!==e){t=e;break e}t=t.parentNode}t=null}return null===t?e===(n=n.getRootElement())?ve("root"):null:ve(t)}function Me(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function Re(e){let t=[];for(;null!==e;)t.push(e),e=e._parentEditor;return t}function Ae(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function we(e,t){var n=window.getSelection();if(null!==n){var r=n.anchorNode,{anchorOffset:i,focusOffset:o}=n;null!==r&&3===r.nodeType&&or(n=Ne(r))&&((r=r.nodeValue)===H&&t&&(r=t,o=i=t.length),null!==r&&$e(n,r,i,o,e))}}function $e(e,t,n,r,i){let o=e;if(o.isAttached()&&(i||!o.isDirty())){var l=o.isComposing();if(e=t,(l||i)&&t[t.length-1]===H&&(e=t.slice(0,-1)),t=o.getTextContent(),i||e!==t)if(""===e)if(ye(null),z||Y)o.remove();else{let e=Nn();setTimeout((()=>{e.update((()=>{o.isAttached()&&o.remove()}))}),20)}else i=o.getParent(),t=un(),o.isToken()||null!==Ce()&&!l||null!==i&&Ut(t)&&!i.canInsertTextBefore()&&0===t.anchor.offset?o.markDirty():(Ut(l=dn())&&null!==n&&null!==r&&(l.setTextNodeRange(o,n,o,r),o.isSegmented()&&(n=ir(n=o.getTextContent()),o.replace(n),o=n)),o.setTextContent(e))}}function Pe(e,t){let n=e.anchor,r=e.focus,i=n.getNode();var o=window.getSelection();o=null!==o?o.anchorNode:null;let l=n.key,s=Nn().getElementByKey(l),a=t.length;return l!==r.key||!or(i)||(2>a||Me(t))&&n.offset!==r.offset&&!i.isComposing()||ce(i)||i.isDirty()&&1<a||null!==s&&!i.isComposing()&&o!==fe(s)||i.getFormat()!==e.format||function(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;e=e.anchor.offset;let n=t.getParentOrThrow(),r=t.isToken();return 0===e?((e=!t.canInsertTextBefore()||!n.canInsertTextBefore()||r)||(e=(or(t=t.getPreviousSibling())||Fn(t)&&t.isInline())&&!t.canInsertTextAfter()),e):e===t.getTextContentSize()&&(!t.canInsertTextAfter()||!n.canInsertTextAfter()||r)}(e,i)}function ke(e,t){var n=e[t];return"string"==typeof n?(n=n.split(" "),e[t]=n):n}function Ie(e,t,n,r,i){0!==n.size&&(n=r.__key,void 0===(t=t.get(r.__type))&&b(33),t=t.klass,void 0===(r=e.get(t))&&(r=new Map,e.set(t,r)),r.has(n)||r.set(n,i))}function be(e,t,n){let r=e.getParent(),i=n;return null!==r&&(t&&0===n?(i=e.getIndexWithinParent(),e=r):t||n!==e.getChildrenSize()||(i=e.getIndexWithinParent()+1,e=r)),e.getChildAtIndex(t?i-1:i)}function Le(e,t){var n=e.offset;return"element"===e.type?be(e=e.getNode(),t,n):(e=e.getNode(),t&&0===n||!t&&n===e.getTextContentSize()?null===(n=t?e.getPreviousSibling():e.getNextSibling())?be(e.getParentOrThrow(),t,e.getIndexWithinParent()+(t?0:1)):n:null)}function Fe(e){return"insertFromPaste"===(e=(e=ze(e).event)&&e.inputType)||"insertFromPasteAsQuotation"===e}function Be(e){return!Kn(e)&&!e.isLastChild()&&!e.isInline()}function Ke(e,t){return void 0===(e=e._keyToDOMMap.get(t))&&b(75),e}function We(e,t){for(e=e.getParent();null!==e;){if(e.is(t))return!0;e=e.getParent()}return!1}function ze(e){return null===(e=e._window)&&b(78),e}function Ye(e){return Kn(e)||Fn(e)&&e.isShadowRoot()}function He(e,t,n,r,i){let o=(e=e.__children).length;for(let l=0;l<o;l++){let o=e[l],s=r.get(o);void 0!==s&&s.__parent===t&&(Fn(s)&&He(s,o,n,r,i),n.has(o)||i.delete(o),r.delete(o))}}function Ge(e,t){let n=e.__mode,r=e.__format;e=e.__style;let i=t.__mode,o=t.__format;return t=t.__style,!(null!==n&&n!==i||null!==r&&r!==o||null!==e&&e!==t)}function Ue(e,t){let n=e.mergeWithSibling(t),r=Nn()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function Je(e){if(""===e.__text&&e.isSimpleText()&&!e.isUnmergeable())e.remove();else{for(var t;null!==(t=e.getPreviousSibling())&&or(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){Ge(t,e)&&(e=Ue(t,e));break}t.remove()}for(var n;null!==(n=e.getNextSibling())&&or(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){Ge(e,n)&&Ue(e,n);break}n.remove()}}}function Ve(e){for(;"element"===e.type;){var t=e.getNode(),n=e.offset;if(n===t.getChildrenSize()?(t=t.getChildAtIndex(n-1),n=!0):(t=t.getChildAtIndex(n),n=!1),or(t)){e.set(t.__key,n?t.getTextContentSize():0,"text");break}if(!Fn(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element")}}let Xe,je,qe,Qe,Ze,et,tt,nt,rt,it,ot="",lt="",st="",at=!1,dt=!1,ut=null;function ct(e,t){let n=tt.get(e);if(null!==t){let n=Et(e);t.removeChild(n)}nt.has(e)||je._keyToDOMMap.delete(e),Fn(n)&&ft(e=n.__children,0,e.length-1,null),void 0!==n&&Ie(it,qe,Qe,n,"destroyed")}function ft(e,t,n,r){for(;t<=n;++t){let n=e[t];void 0!==n&&ct(n,r)}}function gt(e,t){e.setProperty("text-align",t)}function ht(e,t){e.style.setProperty("padding-inline-start",0===t?"":20*t+"px")}function _t(e,t){e=e.style,0===t?gt(e,""):1===t?gt(e,"left"):2===t?gt(e,"center"):3===t?gt(e,"right"):4===t&&gt(e,"justify")}function pt(e,t,n){let r=nt.get(e);void 0===r&&b(60);let i=r.createDOM(Xe,je);var o=je._keyToDOMMap;if(i["__lexicalKey_"+je._key]=e,o.set(e,i),or(r)?i.setAttribute("data-lexical-text","true"):bn(r)&&i.setAttribute("data-lexical-decorator","true"),Fn(r)){0!==(e=r.__indent)&&ht(i,e);var l=(e=r.__children).length;if(0!==l){--l;let t=lt;lt="",mt(o=e,0,l,i,null),vt(r,i),lt=t}0!==(o=r.__format)&&_t(i,o),Ct(null,e,i),Be(r)&&(ot+="\n\n",st+="\n\n")}else o=r.getTextContent(),bn(r)?(null!==(l=r.decorate(je,Xe))&&Nt(e,l),i.contentEditable="false"):or(r)&&(r.isDirectionless()||(lt+=o)),ot+=o,st+=o;return null!==t&&(null!=n||null!=(n=t.__lexicalLineBreak)?t.insertBefore(i,n):t.appendChild(i)),Ie(it,qe,Qe,r,"created"),i}function mt(e,t,n,r,i){let o=ot;for(ot="";t<=n;++t)pt(e[t],r,i);r.__lexicalTextContent=ot,ot=o+ot}function yt(e,t){return Jn(e=t.get(e[e.length-1]))||bn(e)}function Ct(e,t,n){e=null!==e&&(0===e.length||yt(e,tt)),t=null!==t&&(0===t.length||yt(t,nt)),e?t||(null!=(t=n.__lexicalLineBreak)&&n.removeChild(t),n.__lexicalLineBreak=null):t&&(t=document.createElement("br"),n.__lexicalLineBreak=t,n.appendChild(t))}function vt(e,t){var n=t.__lexicalDir;if(t.__lexicalDirTextContent!==lt||n!==ut){let o=""===lt;if(o)var r=ut;else r=lt,r=U.test(r)?"rtl":J.test(r)?"ltr":null;if(r!==n){let l=t.classList,s=Xe.theme;var i=null!==n?s[n]:void 0;let a=null!==r?s[r]:void 0;void 0!==i&&("string"==typeof i&&(i=i.split(" "),i=s[n]=i),l.remove(...i)),null===r||o&&"ltr"===r?t.removeAttribute("dir"):(void 0!==a&&("string"==typeof a&&(n=a.split(" "),a=s[r]=n),void 0!==a&&l.add(...a)),t.dir=r),dt||(e.getWritable().__dir=r)}ut=r,t.__lexicalDirTextContent=lt,t.__lexicalDir=r}}function Tt(e,t){var n=tt.get(e),r=nt.get(e);void 0!==n&&void 0!==r||b(61);var i=at||et.has(e)||Ze.has(e);let o=Ke(je,e);if(n===r&&!i)return Fn(n)?(void 0!==(r=o.__lexicalTextContent)&&(ot+=r,st+=r),void 0!==(r=o.__lexicalDirTextContent)&&(lt+=r)):(r=n.getTextContent(),or(n)&&!n.isDirectionless()&&(lt+=r),st+=r,ot+=r),o;if(n!==r&&i&&Ie(it,qe,Qe,r,"updated"),r.updateDOM(n,o,Xe))return r=pt(e,null,null),null===t&&b(62),t.replaceChild(r,o),ct(e,null),r;if(Fn(n)&&Fn(r)){if((e=r.__indent)!==n.__indent&&ht(o,e),(e=r.__format)!==n.__format&&_t(o,e),(e=n.__children)!==(n=r.__children)||i){var l=e,s=n;i=r,t=lt,lt="";let g=ot;ot="";var a=l.length,d=s.length;if(1===a&&1===d){var u=l[0];if(u===(s=s[0]))Tt(u,o);else{var c=Et(u);s=pt(s,null,null),o.replaceChild(s,c),ct(u,null)}}else if(0===a)0!==d&&mt(s,0,d-1,o,null);else if(0===d)0!==a&&(ft(l,0,a-1,(u=null==o.__lexicalLineBreak)?null:o),u&&(o.textContent=""));else{let e=a-1;a=d-1;let t=o.firstChild,n=0;for(d=0;n<=e&&d<=a;){var f=l[n];let e=s[d];if(f===e)t=Tt(e,o).nextSibling,n++,d++;else{void 0===u&&(u=new Set(l)),void 0===c&&(c=new Set(s));let r=c.has(f),i=u.has(e);r?(i?((f=Ke(je,e))===t?t=Tt(e,o).nextSibling:(null!=t?o.insertBefore(f,t):o.appendChild(f),Tt(e,o)),n++):pt(e,o,t),d++):(t=Et(f).nextSibling,ct(f,o),n++)}}c=d>a,(u=n>e)&&!c?mt(s,d,a,o,u=void 0===(u=s[a+1])?null:je.getElementByKey(u)):c&&!u&&ft(l,n,e,o)}Be(i)&&(ot+="\n\n"),o.__lexicalTextContent=ot,ot=g+ot,vt(i,o),lt=t,Kn(r)||Ct(e,n,o)}Be(r)&&(ot+="\n\n",st+="\n\n")}else n=r.getTextContent(),bn(r)?null!==(i=r.decorate(je,Xe))&&Nt(e,i):or(r)&&!r.isDirectionless()&&(lt+=n),ot+=n,st+=n;return!dt&&Kn(r)&&r.__cachedText!==st&&((r=r.getWritable()).__cachedText=st),o}function Nt(e,t){let n=je._pendingDecorators,r=je._decorators;if(null===n){if(r[e]===t)return;n=Ee(je)}n[e]=t}function Et(e){return void 0===(e=rt.get(e))&&b(75),e}let xt=Object.freeze({}),St=[["keydown",function(e,t){if(!0!==e._lexicalHandled&&(e._lexicalHandled=!0,Ot=e.timeStamp,Dt=e.keyCode,!t.isComposing())){var{keyCode:n,shiftKey:r,ctrlKey:l,metaKey:s,altKey:a}=e;if(39!==n||l||s||a)if(39!==n||a||r||!l&&!s)if(37!==n||l||s||a)if(37!==n||a||r||!l&&!s)if(38!==n||l||s)if(40!==n||l||s)if(13===n&&r)wt=!0,Mn(t,T,e);else if(32===n)Mn(t,N,e);else if(B&&l&&79===n)e.preventDefault(),wt=!0,Mn(t,o,!0);else if(13!==n||r){var d=B?!a&&!s&&(8===n||72===n&&l):!(l||a||s)&&8===n;d?8===n?Mn(t,E,e):(e.preventDefault(),Mn(t,i,!0)):27===n?Mn(t,x,e):(d=B?!(r||a||s)&&(46===n||68===n&&l):!(l||a||s)&&46===n)?46===n?Mn(t,S,e):(e.preventDefault(),Mn(t,i,!1)):8===n&&(B?a:l)?(e.preventDefault(),Mn(t,u,!0)):46===n&&(B?a:l)?(e.preventDefault(),Mn(t,u,!1)):B&&s&&8===n?(e.preventDefault(),Mn(t,c,!0)):B&&s&&46===n?(e.preventDefault(),Mn(t,c,!1)):66===n&&!a&&(B?s:l)?(e.preventDefault(),Mn(t,f,"bold")):85===n&&!a&&(B?s:l)?(e.preventDefault(),Mn(t,f,"underline")):73===n&&!a&&(B?s:l)?(e.preventDefault(),Mn(t,f,"italic")):9!==n||a||l||s?90===n&&!r&&(B?s:l)?(e.preventDefault(),Mn(t,g,void 0)):(d=B?90===n&&s&&r:89===n&&l||90===n&&l&&r)?(e.preventDefault(),Mn(t,h,void 0)):jt(t._editorState._selection)&&((d=!r&&67===n&&(B?s:l))?(e.preventDefault(),Mn(t,w,e)):(d=!r&&88===n&&(B?s:l))&&(e.preventDefault(),Mn(t,$,e))):Mn(t,O,e)}else wt=!1,Mn(t,T,e);else Mn(t,v,e);else Mn(t,C,e);else Mn(t,y,e);else Mn(t,m,e);else Mn(t,p,e);else Mn(t,_,e);(l||r||a||s)&&Mn(t,I,e)}}],["mousedown",function(e,t){let n=e.target;n instanceof Node&&wn(t,(()=>{bn(Ne(n))||(At=!0)}))}],["compositionstart",function(e,t){wn(t,(()=>{let n=dn();if(Ut(n)&&!t.isComposing()){let r=n.anchor;ye(r.key),(e.timeStamp<Ot+30||"element"===r.type||!n.isCollapsed()||n.anchor.getNode().getFormat()!==n.format)&&Mn(t,s,G)}}))}],["compositionend",function(e,t){K?$t=!0:wn(t,(()=>{bt(t,e.data)}))}],["input",function(e,t){e.stopPropagation(),wn(t,(()=>{var n=dn(),r=e.data;null!=r&&Ut(n)&&Pe(n,r)?($t&&(bt(t,r),$t=!1),Mn(t,s,r),r=r.length,K&&1<r&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=r),z||Y||!t.isComposing()||(Ot=0,ye(null))):(we(!1),$t&&(bt(t,r||void 0),$t=!1)),vn(),oe(n=Nn())}))}],["click",function(e,t){wn(t,(()=>{let n=dn(),i=window.getSelection(),o=un();if(Ut(n)){let e=n.anchor,t=e.getNode();i&&"element"===e.type&&0===e.offset&&n.isCollapsed()&&!Kn(t)&&1===Se().getChildrenSize()&&t.getTopLevelElementOrThrow().isEmpty()&&null!==o&&n.is(o)&&(i.removeAllRanges(),n.dirty=!0)}Mn(t,r,e)}))}],["cut",xt],["copy",xt],["dragstart",xt],["dragover",xt],["dragend",xt],["paste",xt],["focus",xt],["blur",xt],["drop",xt]];W&&St.push(["beforeinput",(e,t)=>function(e,t){let n=e.inputType;"deleteCompositionText"===n||K&&Fe(t)||"insertCompositionText"!==n&&wn(t,(()=>{let r=dn();if("deleteContentBackward"===n){if(null===r){var _=un();if(!Ut(_))return;Oe(_.clone())}if(Ut(r))return void(229===Dt&&e.timeStamp<Ot+30&&t.isComposing()&&r.anchor.key===r.focus.key?(ye(null),Ot=0,setTimeout((()=>{wn(t,(()=>{ye(null)}))}),30),Ut(r)&&(_=r.anchor.getNode(),_.markDirty(),r.format=_.getFormat())):(e.preventDefault(),Mn(t,i,!0)))}if(Ut(r)){_=e.data,r.dirty||!r.isCollapsed()||Kn(r.anchor.getNode())||function(e,t){t.getTargetRanges&&(t=t.getTargetRanges()[0])&&e.applyDOMRange(t)}(r,e);var p=r.focus,m=r.anchor.getNode();if(p=p.getNode(),"insertText"===n||"insertTranspose"===n)"\n"===_?(e.preventDefault(),Mn(t,o,!1)):"\n\n"===_?(e.preventDefault(),Mn(t,l,void 0)):null==_&&e.dataTransfer?(_=e.dataTransfer.getData("text/plain"),e.preventDefault(),r.insertRawText(_)):null!=_&&Pe(r,_)&&(e.preventDefault(),Mn(t,s,_));else switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Mn(t,s,e);break;case"insertFromComposition":ye(null),Mn(t,s,e);break;case"insertLineBreak":ye(null),Mn(t,o,!1);break;case"insertParagraph":ye(null),wt?(wt=!1,Mn(t,o,!1)):Mn(t,l,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Mn(t,a,e);break;case"deleteByComposition":(function(e,t){return e!==t||Fn(e)||Fn(t)||!e.isToken()||!t.isToken()})(m,p)&&Mn(t,d,void 0);break;case"deleteByDrag":case"deleteByCut":Mn(t,d,void 0);break;case"deleteContent":Mn(t,i,!1);break;case"deleteWordBackward":Mn(t,u,!0);break;case"deleteWordForward":Mn(t,u,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Mn(t,c,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Mn(t,c,!1);break;case"formatStrikeThrough":Mn(t,f,"strikethrough");break;case"formatBold":Mn(t,f,"bold");break;case"formatItalic":Mn(t,f,"italic");break;case"formatUnderline":Mn(t,f,"underline");break;case"historyUndo":Mn(t,g,void 0);break;case"historyRedo":Mn(t,h,void 0)}}}))}(e,t)]);let Ot=0,Dt=0,Mt=0,Rt=!1,At=!1,wt=!1,$t=!1,Pt=[0,0,"root",0];function kt(e,t){return null!==e&&null!==e.nodeValue&&3===e.nodeType&&0!==t&&t!==e.nodeValue.length}function It(e,t,r){let{anchorNode:i,anchorOffset:o,focusNode:l,focusOffset:s}=e;Rt&&(Rt=!1,kt(i,o)&&kt(l,s))||wn(t,(()=>{if(r){if(de(t,i,l)){var o=dn();if(Ut(o)){var s=o.anchor,a=s.getNode();if(o.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(o.dirty=!0);var d=ze(t).event;d=d?d.timeStamp:performance.now();let[n,r,i,l]=Pt;d<l+200&&s.offset===r&&s.key===i?o.format=n:"text"===s.type?o.format=a.getFormat():"element"===s.type&&(o.format=0)}else{s=127,a=!1;let e=(d=o.getNodes()).length;for(let t=0;t<e;t++){let e=d[t];if(or(e)&&(a=!0,0==(s&=e.getFormat())))break}o.format=a?s:0}}Mn(t,n,void 0)}}else Oe(null)}))}function bt(e,t){var n=e._compositionKey;if(ye(null),null!==n&&null!=t){if(""===t)return t=ve(n),void(null!==(e=fe(e.getElementByKey(n)))&&null!==e.nodeValue&&or(t)&&$e(t,e.nodeValue,null,null,!0));if("\n"===t[t.length-1]&&Ut(n=dn()))return t=n.focus,n.anchor.set(t.key,t.offset,t.type),void Mn(e,T,null)}we(!0,t)}function Lt(e){let t=e.__lexicalEventHandles;return void 0===t&&(t=[],e.__lexicalEventHandles=t),t}let Ft=new Map;function Bt(){let e=window.getSelection();if(null!==e){var t=ue(e.anchorNode);if(null!==t){At&&(At=!1,wn(t,(()=>{var n=un(),r=e.anchorNode;null!==r&&(1===(r=r.nodeType)||3===r)&&Oe(n=an(n,e,t))})));var n=Re(t),r=(n=n[n.length-1])._key,i=Ft.get(r),o=i||n;o!==t&&It(e,o,!1),It(e,t,!0),t!==n?Ft.set(r,t):i&&Ft.delete(r)}}}class Kt{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),n=e.getNode(),r=this.offset;if(e=e.offset,Fn(t)){var i=t.getDescendantByIndex(r);t=null!=i?i:t}return Fn(n)&&(i=n.getDescendantByIndex(e),n=null!=i?i:n),t===n?r<e:t.isBefore(n)}getNode(){let e=ve(this.key);return null===e&&b(20),e}set(e,t,n){let r=this._selection,i=this.key;this.key=e,this.offset=t,this.type=n,mn||(Ce()===i&&ye(e),null!==r&&(r._cachedNodes=null,r.dirty=!0))}}function Wt(e,t){let n=t.__key,r=e.offset,i="element";if(or(t))i="text",r>(t=t.getTextContentSize())&&(r=t);else if(!Fn(t)){var o=t.getNextSibling();or(o)?(n=o.__key,r=0):(o=t.getParent())&&(n=o.__key,r=t.getIndexWithinParent()+1)}e.set(n,r,i)}function zt(e,t){if(Fn(t)){let n=t.getLastDescendant();Fn(n)||or(n)?Wt(e,n):Wt(e,t)}else Wt(e,t)}function Yt(e,t,n){let r=e.getNode(),i=r.getChildAtIndex(e.offset),o=ir(),l=Kn(r)?ar().append(o):o;o.setFormat(n),null===i?r.append(l):i.insertBefore(l),e.is(t)&&t.set(o.__key,0,"text"),e.set(o.__key,0,"text")}function Ht(e,t,n,r){e.key=t,e.offset=n,e.type=r}class Gt{constructor(e){this.dirty=!1,this._nodes=e,this._cachedNodes=null}is(e){if(!jt(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every((e=>n.has(e)))}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new Gt(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(e,t){let n=this.getNodes(),r=n.length;var i=n[r-1];if(or(i))i=i.select();else{let e=i.getIndexWithinParent()+1;i=i.getParentOrThrow().select(e,e)}for(i.insertNodes(e,t),e=0;e<r;e++)n[e].remove();return!0}getNodes(){var e=this._cachedNodes;if(null!==e)return e;var t=this._nodes;e=[];for(let n of t)null!==(t=ve(n))&&e.push(t);return mn||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function Ut(e){return e instanceof Xt}class Jt{constructor(e,t,n){this.gridKey=e,this.anchor=t,this.focus=n,this.dirty=!1,this._cachedNodes=null,t._selection=this,n._selection=this}is(e){return!!Vt(e)&&this.gridKey===e.gridKey&&this.anchor.is(this.focus)}set(e,t,n){this.dirty=!0,this.gridKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null}clone(){return new Jt(this.gridKey,this.anchor,this.focus)}isCollapsed(){return!1}isBackward(){return this.focus.isBefore(this.anchor)}getCharacterOffsets(){return Qt(this)}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(e,t){var n=this.focus.getNode();return Ve((n=n.select(0,n.getChildrenSize())).anchor),Ve(n.focus),n.insertNodes(e,t)}getShape(){var e=ve(this.anchor.key);null===e&&b(21);var t=e.getIndexWithinParent();e=e.getParentOrThrow().getIndexWithinParent();var n=ve(this.focus.key);null===n&&b(22);var r=n.getIndexWithinParent();let i=n.getParentOrThrow().getIndexWithinParent();return n=Math.min(t,r),t=Math.max(t,r),r=Math.min(e,i),e=Math.max(e,i),{fromX:Math.min(n,t),fromY:Math.min(r,e),toX:Math.max(n,t),toY:Math.max(r,e)}}getNodes(){var e=this._cachedNodes;if(null!==e)return e;e=new Set;let{fromX:t,fromY:n,toX:r,toY:i}=this.getShape();var o=ve(this.gridKey);hr(o)||b(23),e.add(o),o=o.getChildren();for(let a=n;a<=i;a++){var l=o[a];e.add(l),pr(l)||b(24),l=l.getChildren();for(let n=t;n<=r;n++){var s=l[n];for(fr(s)||b(25),e.add(s),s=s.getChildren();0<s.length;){let t=s.shift();e.add(t),Fn(t)&&s.unshift(...t.getChildren())}}}return e=Array.from(e),mn||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function Vt(e){return e instanceof Jt}class Xt{constructor(e,t,n){this.anchor=e,this.focus=t,this.dirty=!1,this.format=n,this._cachedNodes=null,e._selection=this,t._selection=this}is(e){return!!Ut(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format}isBackward(){return this.focus.isBefore(this.anchor)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var e=this._cachedNodes;if(null!==e)return e;var t=this.anchor,n=this.focus;e=t.getNode();let r=n.getNode();return Fn(e)&&(t=e.getDescendantByIndex(t.offset),e=null!=t?t:e),Fn(r)&&(n=r.getDescendantByIndex(n.offset),r=null!=n?n:r),e=e.is(r)?Fn(e)&&(0<e.getChildrenSize()||e.excludeFromCopy())?[]:[e]:e.getNodesBetween(r),mn||(this._cachedNodes=e),e}setTextNodeRange(e,t,n,r){Ht(this.anchor,e.__key,t,"text"),Ht(this.focus,n.__key,r,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],n=e[e.length-1],r=this.anchor.isBefore(this.focus),[i,o]=Qt(this),l="",s=!0;for(let a=0;a<e.length;a++){let d=e[a];if(Fn(d)&&!d.isInline())s||(l+="\n"),s=!d.isEmpty();else if(s=!1,or(d)){let e=d.getTextContent();d===t?e=d===n?i<o?e.slice(i,o):e.slice(o,i):r?e.slice(i):e.slice(o):d===n&&(e=r?e.slice(0,o):e.slice(0,i)),l+=e}else!bn(d)&&!Jn(d)||d===n&&this.isCollapsed()||(l+=d.getTextContent())}return l}applyDOMRange(e){let t=Nn(),n=t.getEditorState()._selection;if(null!==(e=rn(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n))){var[r,i]=e;Ht(this.anchor,r.key,r.offset,r.type),Ht(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}}clone(){let e=this.anchor,t=this.focus;return new Xt(new Kt(e.key,e.offset,e.type),new Kt(t.key,t.offset,t.type),this.format)}toggleFormat(e){this.format=ge(this.format,e,null),this.dirty=!0}hasFormat(e){return 0!=(this.format&V[e])}insertRawText(e){let t=e.split(/\r?\n/);if(1===t.length)this.insertText(e);else{e=[];let n=t.length;for(let r=0;r<n;r++){let i=t[r];""!==i&&e.push(ir(i)),r!==n-1&&e.push(Un())}this.insertNodes(e)}}insertText(e){var t=this.anchor,n=this.focus,r=this.isCollapsed()||t.isBefore(n),i=this.format;r&&"element"===t.type?Yt(t,n,i):r||"element"!==n.type||Yt(n,t,i);var o=this.getNodes(),l=o.length,s=r?n:t;n=(r?t:n).offset;var a=s.offset;or(t=o[0])||b(26),r=t.getTextContent().length;var d=t.getParentOrThrow(),u=o[l-1];if(this.isCollapsed()&&n===r&&(t.isSegmented()||t.isToken()||!t.canInsertTextAfter()||!d.canInsertTextAfter()&&null===t.getNextSibling())){var c=t.getNextSibling();if(or(c)&&!ce(c)||((c=ir()).setFormat(i),d.canInsertTextAfter()?t.insertAfter(c):d.insertAfter(c)),c.select(0,0),t=c,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===n&&(t.isSegmented()||t.isToken()||!t.canInsertTextBefore()||!d.canInsertTextBefore()&&null===t.getPreviousSibling())){if(or(c=t.getPreviousSibling())&&!ce(c)||((c=ir()).setFormat(i),d.canInsertTextBefore()?t.insertBefore(c):d.insertBefore(c)),c.select(),t=c,""!==e)return void this.insertText(e)}else if(t.isSegmented()&&n!==r)(d=ir(t.getTextContent())).setFormat(i),t.replace(d),t=d;else if(!(this.isCollapsed()||""===e||(c=u.getParent(),d.canInsertTextBefore()&&d.canInsertTextAfter()&&(!Fn(c)||c.canInsertTextBefore()&&c.canInsertTextAfter()))))return this.insertText(""),nn(this.anchor,this.focus,null),void this.insertText(e);if(1===l)if(t.isToken())(e=ir(e)).select(),t.replace(e);else{if(o=t.getFormat(),n===a&&o!==i){if(""!==t.getTextContent())return(o=ir(e)).setFormat(i),o.select(),0===n?t.insertBefore(o):([l]=t.splitText(n),l.insertAfter(o)),void(o.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length));t.setFormat(i)}""===(t=t.spliceText(n,a-n,e,!0)).getTextContent()?t.remove():"text"===this.anchor.type&&(t.isComposing()?this.anchor.offset-=e.length:this.format=o)}else{i=new Set([...t.getParentKeys(),...u.getParentKeys()]);var f=Fn(t)?t:t.getParentOrThrow();if(d=Fn(u)?u:u.getParentOrThrow(),c=u,!f.is(d)&&d.isInline())do{c=d,d=d.getParentOrThrow()}while(d.isInline());"text"===s.type&&(0!==a||""===u.getTextContent())||"element"===s.type&&u.getIndexWithinParent()<a?or(u)&&!u.isToken()&&a!==u.getTextContentSize()?(u.isSegmented()&&(s=ir(u.getTextContent()),u.replace(s),u=s),u=u.spliceText(0,a,""),i.add(u.__key)):(s=u.getParentOrThrow()).canBeEmpty()||1!==s.getChildrenSize()?u.remove():s.remove():i.add(u.__key),s=d.getChildren(),a=new Set(o),u=f.is(d),f=f.isInline()&&null===t.getNextSibling()?f:t;for(let e=s.length-1;0<=e;e--){let n=s[e];if(n.is(t)||Fn(n)&&n.isParentOf(t))break;n.isAttached()&&(!a.has(n)||n.is(c)?u||f.insertAfter(n):n.remove())}if(!u)for(s=d,a=null;null!==s;)(0===(d=(u=s.getChildren()).length)||u[d-1].is(a))&&(i.delete(s.__key),a=s),s=s.getParent();for(t.isToken()?n===r?t.select():((e=ir(e)).select(),t.replace(e)):""===(t=t.spliceText(n,r-n,e,!0)).getTextContent()?t.remove():t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length),e=1;e<l;e++)t=o[e],i.has(t.__key)||t.remove()}}removeText(){this.insertText("")}formatText(e){if(this.isCollapsed())this.toggleFormat(e),ye(null);else{var t=this.getNodes(),n=[];for(var r of t)or(r)&&n.push(r);var i=n.length;if(0===i)this.toggleFormat(e),ye(null);else{r=this.anchor;var o=this.focus,l=this.isBackward();t=l?o:r,r=l?r:o;var s=0,a=n[0];if(o="element"===t.type?0:t.offset,"text"===t.type&&o===a.getTextContentSize()&&(s=1,a=n[1],o=0),null!=a){l=a.getFormatFlags(e,null);var d=i-1,u=n[d];if(i="text"===r.type?r.offset:u.getTextContentSize(),a.is(u))o!==i&&(0===o&&i===a.getTextContentSize()?a.setFormat(l):(e=a.splitText(o,i),(e=0===o?e[0]:e[1]).setFormat(l),"text"===t.type&&t.set(e.__key,0,"text"),"text"===r.type&&r.set(e.__key,i-o,"text")),this.format=l);else{0!==o&&([,a]=a.splitText(o),o=0),a.setFormat(l);var c=u.getFormatFlags(e,l);for(0<i&&(i!==u.getTextContentSize()&&([u]=u.splitText(i)),u.setFormat(c)),s+=1;s<d;s++){let t=n[s];if(!t.isToken()){let n=t.getFormatFlags(e,c);t.setFormat(n)}}"text"===t.type&&t.set(a.__key,o,"text"),"text"===r.type&&r.set(u.__key,i,"text"),this.format=l|c}}}}}insertNodes(e,t){this.isCollapsed()||this.removeText();var n=this.anchor,r=n.offset,i=n.getNode(),o=i;"element"===n.type&&(o=n.getNode(),n=o.getChildAtIndex(r-1),o=null===n?o:n),n=[];var l=i.getNextSiblings(),s=Ye(i)?null:i.getTopLevelElementOrThrow();if(or(i))if(o=i.getTextContent().length,0===r&&0!==o)o=null!==(o=i.getPreviousSibling())?o:i.getParentOrThrow(),n.push(i);else if(r===o)o=i;else{if(i.isToken())return!1;[o,i]=i.splitText(r),n.push(i)}i=o,n.push(...l),l=e[0];var a=!1,d=null;for(let t=0;t<e.length;t++){var u=e[t];if(Fn(u)&&!u.isInline()){if(u.is(l)){if(Fn(o)&&o.isEmpty()&&o.canReplaceWith(u)){o.replace(u),o=u,a=!0;continue}var c=u.getFirstDescendant();if(he(c)){for(c=c.getParentOrThrow();c.isInline();)c=c.getParentOrThrow();if(a=(d=c.getChildren()).length,Fn(o))for(var f=0;f<a;f++)o.append(d[f]);else{for(f=a-1;0<=f;f--)o.insertAfter(d[f]);o=o.getParentOrThrow()}if(d=d[a-1],c.remove(),a=!0,c.is(u))continue}}or(o)&&(null===s&&b(27),o=s)}else a&&!bn(u)&&Ye(o.getParent())&&b(28);a=!1,Fn(o)&&!o.isInline()?(d=u,bn(u)&&!u.isInline()?o=o.insertAfter(u):Fn(u)?!u.canBeEmpty()&&u.isEmpty()||(Ye(o)?(null!==(c=o.getChildAtIndex(r))?c.insertBefore(u):o.append(u),o=u):o=o.insertAfter(u)):(null!==(c=o.getFirstChild())?c.insertBefore(u):o.append(u),o=u)):!Fn(u)||Fn(u)&&u.isInline()||bn(o)&&!o.isInline()?(d=u,o=o.insertAfter(u)):(u=o.getParentOrThrow(),Jn(o)&&o.remove(),o=u,t--)}if(t&&(or(i)?i.select():or(e=o.getPreviousSibling())?e.select():(e=o.getIndexWithinParent(),o.getParentOrThrow().select(e,e))),Fn(o)){if(e=or(d)?d:Fn(d)&&d.isInline()?d.getLastDescendant():o.getLastDescendant(),t||(null===e?o.select():or(e)?e.select():e.selectNext()),0!==n.length)for(t=o,e=n.length-1;0<=e;e--)s=(r=n[e]).getParentOrThrow(),!Fn(o)||on(r)||bn(r)&&!r.isInline()?Fn(o)||on(r)?Fn(r)&&!r.canInsertAfter(o)?(Fn(i=s.constructor.clone(s))||b(29),i.append(r),o.insertAfter(i)):o.insertAfter(r):(o.insertBefore(r),o=r):(t===o?o.append(r):o.insertBefore(r),o=r),s.isEmpty()&&!s.canBeEmpty()&&s.remove()}else t||(or(o)?o.select():(n=o.getParentOrThrow(),o=o.getIndexWithinParent()+1,n.select(o,o)));return!0}insertParagraph(){this.isCollapsed()||this.removeText();var e=this.anchor,t=e.offset,n=[];if("text"===e.type){var r=e.getNode(),i=r.getNextSiblings().reverse(),o=r.getParentOrThrow(),l=o.isInline(),s=l?o.getTextContentSize():r.getTextContentSize();0===t?i.push(r):(l&&(n=o.getNextSiblings()),t===s||l&&t===r.getTextContentSize()||([,r]=r.splitText(t),i.push(r)))}else{if(Ye(o=e.getNode()))return i=ar(),n=o.getChildAtIndex(t),i.select(),void(null!==n?n.insertBefore(i):o.append(i));i=o.getChildren().slice(t).reverse()}if(r=i.length,0===t&&0<r&&o.isInline()){if(Fn(i=(n=o.getParentOrThrow()).insertNewAfter(this)))for(n=n.getChildren(),o=0;o<n.length;o++)i.append(n[o])}else if(null===(l=o.insertNewAfter(this)))this.insertLineBreak();else if(Fn(l))if(s=o.getFirstChild(),0===t&&(o.is(e.getNode())||s&&s.is(e.getNode()))&&0<r)o.insertBefore(l);else{if(o=null,t=n.length,e=l.getParentOrThrow(),0<t)for(s=0;s<t;s++)e.append(n[s]);if(0!==r)for(n=0;n<r;n++)t=i[n],null===o?l.append(t):o.insertBefore(t),o=t;l.canBeEmpty()||0!==l.getChildrenSize()?l.selectStart():(l.selectPrevious(),l.remove())}}insertLineBreak(e){let t=Un();var n=this.anchor;"element"===n.type&&Kn(n=n.getNode())&&this.insertParagraph(),e?this.insertNodes([t],!0):this.insertNodes([t])&&t.selectNext(0,0)}getCharacterOffsets(){return Qt(this)}extract(){var e=this.getNodes(),t=e.length,n=t-1,r=this.anchor;let i=this.focus;var o=e[0];let l=e[n],[s,a]=Qt(this);return 0===t?[]:1===t?or(o)&&!this.isCollapsed()?(e=s>a?a:s,n=o.splitText(e,s>a?s:a),null!=(e=0===e?n[0]:n[1])?[e]:[]):[o]:(t=r.isBefore(i),or(o)&&((r=t?s:a)===o.getTextContentSize()?e.shift():0!==r&&([,o]=o.splitText(r),e[0]=o)),or(l)&&(o=l.getTextContent().length,0===(t=t?a:s)?e.pop():t!==o&&([l]=l.splitText(t),e[n]=l)),e)}modify(e,t,n){var r=this.focus,i=this.anchor,o="move"===e,l=Le(r,t);bn(l)&&!l.isIsolated()?o?((o=sn()).add(l.__key),Oe(o)):or(e=t?l.getPreviousSibling():l.getNextSibling())?(l=e.__key,t=t?e.getTextContent().length:0,r.set(l,t,"text"),o&&i.set(l,t,"text")):(n=l.getParentOrThrow(),Fn(e)?(n=e.__key,l=t?e.getChildrenSize():0):(l=l.getIndexWithinParent(),n=n.__key,t||l++),r.set(n,l,"element"),o&&i.set(n,l,"element")):(r=window.getSelection())&&(r.modify(e,t?"backward":"forward",n),0<r.rangeCount&&(t=r.getRangeAt(0),this.applyDOMRange(t),this.dirty=!0,o||r.anchorNode===t.startContainer&&r.anchorOffset===t.startOffset||(o=this.focus,r=(t=this.anchor).key,i=t.offset,l=t.type,Ht(t,o.key,o.offset,o.type),Ht(o,r,i,l),this._cachedNodes=null)))}deleteCharacter(e){if(this.isCollapsed()){var t=this.anchor,n=this.focus,r=t.getNode();if(!e&&("element"===t.type&&Fn(r)&&t.offset===r.getChildrenSize()||"text"===t.type&&t.offset===r.getTextContentSize())&&Fn(r=r.getNextSibling()||r.getParentOrThrow().getNextSibling())&&!r.canExtractContents())return;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&("element"===t.type?t.getNode():t.getNode().getParentOrThrow()).collapseAtStart(this))return}else{var i="text"===n.type?n.getNode():null;if(r="text"===t.type?t.getNode():null,null!==i&&i.isSegmented()){if(t=n.offset,n=i.getTextContentSize(),i.is(r)||e&&t!==n||!e&&0!==t)return void Zt(i,e,t)}else if(null!==r&&r.isSegmented()&&(t=t.offset,n=r.getTextContentSize(),r.is(i)||e&&0!==t||!e&&t!==n))return void Zt(r,e,t);if(r=this.anchor,i=this.focus,(t=r.getNode())===(n=i.getNode())&&"text"===r.type&&"text"===i.type){var o=r.offset,l=i.offset;let s=o<l;(n=s?o:l)!==(o=(l=s?l:o)-1)&&(Me(t=t.getTextContent().slice(n,l))||(e?i.offset=o:r.offset=o))}}}this.removeText()}deleteLine(e){this.isCollapsed()&&("text"===this.anchor.type&&this.modify("extend",e,"lineboundary"),0===(e?this.focus:this.anchor).offset&&this.modify("extend",e,"character")),this.removeText()}deleteWord(e){this.isCollapsed()&&this.modify("extend",e,"word"),this.removeText()}}function jt(e){return e instanceof Gt}function qt(e){let t=e.offset;return"text"===e.type?t:t===(e=e.getNode()).getChildrenSize()?e.getTextContent().length:0}function Qt(e){let t=e.anchor;return e=e.focus,"element"===t.type&&"element"===e.type&&t.key===e.key&&t.offset===e.offset?[0,0]:[qt(t),qt(e)]}function Zt(e,t,n){let r=e.getTextContent().split(/(?=\s)/g),i=r.length,o=0,l=0;for(let e=0;e<i;e++){let s=e===i-1;if(l=o,o+=r[e].length,t&&o===n||o>n||s){r.splice(e,1),s&&(l=void 0);break}}""===(t=r.join("").trim())?e.remove():(e.setTextContent(t),e.select(l,l))}function en(e,t,n){var r=t;if(1===e.nodeType){let l=!1;var i=e.childNodes,o=i.length;if(r===o&&(l=!0,r=o-1),or(i=De(i[r])))r=l?i.getTextContentSize():0;else{if(null===(o=De(e)))return null;if(Fn(o)?((t=Fn(e=o.getChildAtIndex(r)))&&(t=e.getParent(),t=null===n||null===t||!t.canBeEmpty()||t!==n.getNode()),t&&(null===(n=l?e.getLastDescendant():e.getFirstDescendant())?(o=e,r=0):o=(e=n).getParentOrThrow()),or(e)?(i=e,o=null,r=l?e.getTextContentSize():0):e!==o&&l&&r++):(r=o.getIndexWithinParent(),r=0===t&&bn(o)&&De(e)===o?r:r+1,o=o.getParentOrThrow()),Fn(o))return new Kt(o.__key,r,"element")}}else i=De(e);return or(i)?new Kt(i.__key,r,"text"):null}function tn(e,t,n){var r=e.offset,i=e.getNode();0===r?(r=i.getPreviousSibling(),i=i.getParent(),t?(n||!t)&&null===r&&Fn(i)&&i.isInline()&&or(t=i.getPreviousSibling())&&(e.key=t.__key,e.offset=t.getTextContent().length):Fn(r)&&!n&&r.isInline()?(e.key=r.__key,e.offset=r.getChildrenSize(),e.type="element"):or(r)&&(e.key=r.__key,e.offset=r.getTextContent().length)):r===i.getTextContent().length&&(r=i.getNextSibling(),i=i.getParent(),t&&Fn(r)&&r.isInline()?(e.key=r.__key,e.offset=0,e.type="element"):(n||t)&&null===r&&Fn(i)&&i.isInline()&&!i.canInsertTextAfter()&&or(t=i.getNextSibling())&&(e.key=t.__key,e.offset=0))}function nn(e,t,n){if("text"===e.type&&"text"===t.type){var r=e.isBefore(t);let i=e.is(t);tn(e,r,i),tn(t,!r,i),i&&(t.key=e.key,t.offset=e.offset,t.type=e.type),(r=Nn()).isComposing()&&r._compositionKey!==e.key&&Ut(n)&&(r=n.anchor,n=n.focus,Ht(e,r.key,r.offset,r.type),Ht(t,n.key,n.offset,n.type))}}function rn(e,t,n,r,i,o){return null!==e&&null!==n&&de(i,e,n)?null===(t=en(e,t,Ut(o)?o.anchor:null))||null===(r=en(n,r,Ut(o)?o.focus:null))||"element"===t.type&&"element"===r.type&&(e=De(e),n=De(n),bn(e)&&bn(n))?null:(nn(t,r,o),[t,r]):null}function on(e){return Fn(e)&&!e.isInline()}function ln(e,t,n,r,i,o){let l=Tn();return(e=new Xt(new Kt(e,t,i),new Kt(n,r,o),0)).dirty=!0,l._selection=e}function sn(){return new Gt(new Set)}function an(e,t,n){var r=n._window;if(null===r)return null;var i=r.event,o=i?i.type:void 0;let l;if(r="selectionchange"===o,i=!ee&&(r||"beforeinput"===o||"compositionstart"===o||"compositionend"===o||"click"===o&&i&&3===i.detail||void 0===o),Ut(e)&&!i)return e.clone();if(null===t)return null;if(i=t.anchorNode,o=t.focusNode,l=t.anchorOffset,t=t.focusOffset,r&&Ut(e)&&!de(n,i,o))return e.clone();if(null===(n=rn(i,l,o,t,n,e)))return null;let[s,a]=n;return new Xt(s,a,Ut(e)?e.format:0)}function dn(){return Tn()._selection}function un(){return Nn()._editorState._selection}function cn(e,t,n,r=1){var i=e.anchor,o=e.focus,l=i.getNode(),s=o.getNode();if(t.is(l)||t.is(s))if(l=t.__key,e.isCollapsed())n<=(t=i.offset)&&(n=Math.max(0,t+r),i.set(l,n,"element"),o.set(l,n,"element"),fn(e));else{var a=e.isBackward(),d=(s=a?o:i).getNode();o=(i=a?i:o).getNode(),t.is(d)&&n<=(d=s.offset)&&s.set(l,Math.max(0,d+r),"element"),t.is(o)&&n<=(t=i.offset)&&i.set(l,Math.max(0,t+r),"element"),fn(e)}}function fn(e){var t=e.anchor,n=t.offset;let r=e.focus;var i=r.offset,o=t.getNode(),l=r.getNode();if(e.isCollapsed())Fn(o)&&or(l=(i=n>=(l=o.getChildrenSize()))?o.getChildAtIndex(l-1):o.getChildAtIndex(n))&&(n=0,i&&(n=l.getTextContentSize()),t.set(l.__key,n,"text"),r.set(l.__key,n,"text"));else{if(Fn(o)){let r=o.getChildrenSize();or(n=(e=n>=r)?o.getChildAtIndex(r-1):o.getChildAtIndex(n))&&(o=0,e&&(o=n.getTextContentSize()),t.set(n.__key,o,"text"))}Fn(l)&&or(i=(t=i>=(n=l.getChildrenSize()))?l.getChildAtIndex(n-1):l.getChildAtIndex(i))&&(l=0,t&&(l=i.getTextContentSize()),r.set(i.__key,l,"text"))}}function gn(e,t,n,r,i){let o=null,l=0,s=null;null!==r?(o=r.__key,or(r)?(l=r.getTextContentSize(),s="text"):Fn(r)&&(l=r.getChildrenSize(),s="element")):null!==i&&(o=i.__key,or(i)?s="text":Fn(i)&&(s="element")),null!==o&&null!==s?e.set(o,l,s):(l=t.getIndexWithinParent(),-1===l&&(l=n.getChildrenSize()),e.set(n.__key,l,"element"))}function hn(e,t,n,r,i){"text"===e.type?(e.key=n,t||(e.offset+=i)):e.offset>r.getIndexWithinParent()&&--e.offset}let _n=null,pn=null,mn=!1,yn=!1,Cn=0;function vn(){mn&&b(13)}function Tn(){return null===_n&&b(15),_n}function Nn(){return null===pn&&b(16),pn}function En(e,t,n){var r=t.__type;let i=e._nodes.get(r);for(void 0===i&&b(30),void 0===(e=n.get(r))&&(e=Array.from(i.transforms),n.set(r,e)),n=e.length,r=0;r<n&&(e[r](t),t.isAttached());r++);}function xn(e,t){var n=t.get(e.type);if(void 0===n&&b(17),n=n.klass,e.type!==n.getType()&&b(18),n=n.importJSON(e),e=e.children,Fn(n)&&Array.isArray(e))for(let r=0;r<e.length;r++){let i=xn(e[r],t);n.append(i)}return n}function Sn(e,t){let n=_n,r=mn,i=pn;_n=e,mn=!0,pn=null;try{return t()}finally{_n=n,mn=r,pn=i}}function On(e){var t=e._pendingEditorState,n=e._rootElement,r=e._headless;if((null!==n||r)&&null!==t){var i=e._editorState,o=i._selection,l=t._selection,s=0!==e._dirtyType,a=_n,d=mn,u=pn,c=e._updating,f=e._observer,g=null;if(e._pendingEditorState=null,e._editorState=t,!r&&s&&null!==f){pn=e,_n=t,mn=!1,e._updating=!0;try{var h=e._dirtyType,_=e._dirtyElements,p=e._dirtyLeaves;f.disconnect(),lt=st=ot="",at=2===h,ut=null,je=e,Xe=e._config,qe=e._nodes,Qe=je._listeners.mutation,Ze=_,et=p,tt=i._nodeMap,nt=t._nodeMap,dt=t._readOnly,rt=new Map(e._keyToDOMMap);var m=new Map;it=m,Tt("root",null),it=rt=Xe=nt=tt=et=Ze=qe=je=void 0,g=m}catch(r){if(r instanceof Error&&e._onError(r),yn)throw r;return dr(e,null,n,t),le(e),e._dirtyType=2,yn=!0,On(e),void(yn=!1)}finally{f.observe(n,{characterData:!0,childList:!0,subtree:!0}),e._updating=c,_n=a,mn=d,pn=u}}t._readOnly||(t._readOnly=!0),c=e._dirtyLeaves,f=e._dirtyElements,m=e._normalizedNodes,h=e._updateTags,d=e._deferred,s&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),p=e._decorators,_=e._pendingDecorators||p;var y=t._nodeMap;for(R in _)y.has(R)||(_===p&&(_=Ee(e)),delete _[R]);if(r=r?null:window.getSelection(),e._editable&&null!==r&&(s||null===l||l.dirty)){pn=e,_n=t;try{e:{let t=r.anchorNode,i=r.focusNode,a=r.anchorOffset,d=r.focusOffset,u=document.activeElement;if(!h.has("collaboration")||u===n)if(Ut(l)){var C=l.anchor,v=l.focus,T=C.key,N=v.key,E=Ke(e,T),x=Ke(e,N),S=C.offset,O=v.offset,D=l.format,M=l.isCollapsed();s=E,N=x;var R=!1;if("text"===C.type&&(s=fe(E),R=C.getNode().getFormat()!==D),"text"===v.type&&(N=fe(x)),null!==s&&null!==N){if(M&&(null===o||R||Ut(o)&&o.format!==D)){var A=performance.now();Pt=[D,S,T,A]}if(a===S&&d===O&&t===s&&i===N&&("Range"!==r.type||!M)&&(null===n||null!==u&&n.contains(u)||n.focus({preventScroll:!0}),!Y&&!z||"element"!==C.type))break e;try{if(r.setBaseAndExtent(s,S,N,O),l.isCollapsed()&&null!==n&&n===u){let t=C.getNode();if(Fn(t)){let e=t.getDescendantByIndex(C.offset);null!==e&&(t=e)}let r=e.getElementByKey(t.__key);if(null!==r){let t=r.getBoundingClientRect();if(t.bottom>ze(e).innerHeight)r.scrollIntoView(!1);else if(0>t.top)r.scrollIntoView();else{let e=n.getBoundingClientRect();Math.floor(t.bottom)>Math.floor(e.bottom)?r.scrollIntoView(!1):Math.floor(t.top)<Math.floor(e.top)&&r.scrollIntoView()}h.add("scroll-into-view")}}Rt=!0}catch(e){}}}else null!==o&&de(e,t,i)&&r.removeAllRanges()}}finally{pn=u,_n=a}}if(null!==g)for(n=g,l=(o=Array.from(e._listeners.mutation)).length,a=0;a<l;a++){let[e,t]=o[a];void 0!==(u=n.get(t))&&e(u,{dirtyLeaves:c,updateTags:h})}if(null!==(n=e._pendingDecorators)&&(e._decorators=n,e._pendingDecorators=null,Dn("decorator",e,!0,n)),(n=xe(i))!==(o=xe(t))&&Dn("textcontent",e,!0,o),Dn("update",e,!0,{dirtyElements:f,dirtyLeaves:c,editorState:t,normalizedNodes:m,prevEditorState:i,tags:h}),e._deferred=[],0!==d.length){t=e._updating,e._updating=!0;try{for(i=0;i<d.length;i++)d[i]()}finally{e._updating=t}}if(0!==(t=e._updates).length&&(t=t.shift())){let[n,r]=t;An(e,n,r)}}}function Dn(e,t,n,...r){let i=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(e=0;e<n.length;e++)n[e].apply(null,r)}finally{t._updating=i}}function Mn(e,t,n){if(!1===e._updating||pn!==e){let r=!1;return e.update((()=>{r=Mn(e,t,n)})),r}let r=Re(e);for(let o=4;0<=o;o--)for(let l=0;l<r.length;l++){var i=r[l]._commands.get(t);if(void 0!==i&&void 0!==(i=i[o])){let t=(i=Array.from(i)).length;for(let r=0;r<t;r++)if(!0===i[r](n,e))return!0}}return!1}function Rn(e,t){let n=e._updates;for(t=t||!1;0!==n.length;){var r=n.shift();if(r){let n,[i,o]=r;void 0!==o&&(r=o.onUpdate,n=o.tag,o.skipTransforms&&(t=!0),r&&e._deferred.push(r),n&&e._updateTags.add(n)),i()}}return t}function An(e,t,n){let r=e._updateTags;var i=!1;if(void 0!==n){var o=n.onUpdate;null!=(i=n.tag)&&r.add(i),i=n.skipTransforms||!1}o&&e._deferred.push(o),n=e._editorState;let l=!1;(null===(o=e._pendingEditorState)||o._readOnly)&&(o=e._pendingEditorState=new Yn(new Map(n._nodeMap)),l=!0);let s=_n,a=mn,d=pn,u=e._updating;_n=o,mn=!1,e._updating=!0,pn=e;try{l&&!e._headless&&(o._selection=function(e){let t=e.getEditorState()._selection,n=window.getSelection();return jt(t)||Vt(t)?t.clone():an(t,n,e)}(e));let r=e._compositionKey;t(),i=Rn(e,i),function(e,t){if(t=t.getEditorState()._selection,Ut(e=e._selection)){var n=e.anchor;let r,i=e.focus;"text"===n.type&&(r=n.getNode(),r.selectionTransform(t,e)),"text"===i.type&&r!==(n=i.getNode())&&n.selectionTransform(t,e)}}(o,e),0!==e._dirtyType&&(i?function(e,t){t=t._dirtyLeaves,e=e._nodeMap;for(let n of t)or(t=e.get(n))&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&Je(t)}(o,e):function(e,t){let n=t._dirtyLeaves,r=t._dirtyElements;e=e._nodeMap;let i=Ce(),o=new Map;var l=n;let s=l.size;for(var a=r,d=a.size;0<s||0<d;){if(0<s){t._dirtyLeaves=new Set;for(let r of l)or(l=e.get(r))&&l.isAttached()&&l.isSimpleText()&&!l.isUnmergeable()&&Je(l),void 0!==l&&void 0!==l&&l.__key!==i&&l.isAttached()&&En(t,l,o),n.add(r);if(s=(l=t._dirtyLeaves).size,0<s){Cn++;continue}}t._dirtyLeaves=new Set,t._dirtyElements=new Map;for(let n of a)a=n[0],d=n[1],("root"===a||d)&&(void 0!==(l=e.get(a))&&void 0!==l&&l.__key!==i&&l.isAttached()&&En(t,l,o),r.set(a,d));s=(l=t._dirtyLeaves).size,d=(a=t._dirtyElements).size,Cn++}t._dirtyLeaves=n,t._dirtyElements=r}(o,e),Rn(e),function(e,t,n,r){e=e._nodeMap,t=t._nodeMap;for(let r of n){let i=t.get(r);void 0===i||i.isAttached()||(e.has(r)||n.delete(r),t.delete(r))}for(let[i]of r)void 0===(n=t.get(i))||n.isAttached()||(Fn(n)&&He(n,i,e,t,r),e.has(i)||r.delete(i),t.delete(i))}(n,o,e._dirtyLeaves,e._dirtyElements)),r!==e._compositionKey&&(o._flushSync=!0);let c=o._selection;if(Ut(c)){let e=o._nodeMap,t=c.focus.key;void 0!==e.get(c.anchor.key)&&void 0!==e.get(t)||b(19)}else jt(c)&&0===c._nodes.size&&(o._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=n,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void On(e)}finally{_n=s,mn=a,pn=d,e._updating=u,Cn=0}0!==e._dirtyType||function(e,t){if(t=t.getEditorState()._selection,null!==(e=e._selection)){if(e.dirty||!e.is(t))return!0}else if(null!==t)return!0;return!1}(o,e)?o._flushSync?(o._flushSync=!1,On(e)):l&&ae((()=>{On(e)})):(o._flushSync=!1,l&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function wn(e,t,n){e._updating?e._updates.push([t,n]):An(e,t,n)}function $n(e,t,n){vn();var r=e.__key;let i=e.getParent();if(null!==i){var o=function(e,t=0){if(0!==t&&b(1),!Ut(t=dn())||!Fn(e))return t;let{anchor:n,focus:r}=t,i=n.getNode(),o=r.getNode();return We(i,e)&&n.set(e.__key,0,"element"),We(o,e)&&r.set(e.__key,0,"element"),t}(e),l=!1;if(Ut(o)&&t){var s=o.anchor;let t=o.focus;s.key===r&&(gn(s,e,i,e.getPreviousSibling(),e.getNextSibling()),l=!0),t.key===r&&(gn(t,e,i,e.getPreviousSibling(),e.getNextSibling()),l=!0)}-1===(r=(s=i.getWritable().__children).indexOf(r))&&b(31),me(e),s.splice(r,1),e.getWritable().__parent=null,Ut(o)&&t&&!l&&cn(o,i,r,-1),n||Ye(i)||i.canBeEmpty()||!i.isEmpty()||$n(i,t),Kn(i)&&i.isEmpty()&&i.selectEnd()}}function Pn(e){return null===(e=ve(e))&&b(63),e}class kn{static getType(){b(64)}static clone(){b(65)}constructor(e){if(this.__type=this.constructor.getType(),this.__parent=null,null!=e)this.__key=e;else{vn(),99<Cn&&b(14),e=Nn();var t=Tn(),n=""+se++;t._nodeMap.set(n,this),Fn(this)?e._dirtyElements.set(n,!0):e._dirtyLeaves.add(n),e._cloneNotNeeded.add(n),e._dirtyType=1,this.__key=n}}getType(){return this.__type}isAttached(){for(var e=this.__key;null!==e;){if("root"===e)return!0;if(null===(e=ve(e)))break;e=e.__parent}return!1}isSelected(){let e=dn();if(null==e)return!1;let t=e.getNodes().some((e=>e.__key===this.__key));return(or(this)||!Ut(e)||"element"!==e.anchor.type||"element"!==e.focus.type||e.anchor.key!==e.focus.key||e.anchor.offset!==e.focus.offset)&&t}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();return null===e?-1:e.__children.indexOf(this.__key)}getParent(){let e=this.getLatest().__parent;return null===e?null:ve(e)}getParentOrThrow(){let e=this.getParent();return null===e&&b(66),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(Ye(t))return e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&b(67),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){var e=this.getParent();if(null===e)return null;let t=(e=e.__children).indexOf(this.__key);return 0>=t?null:ve(e[t-1])}getPreviousSiblings(){var e=this.getParent();if(null===e)return[];let t=(e=e.__children).indexOf(this.__key);return e.slice(0,t).map((e=>Pn(e)))}getNextSibling(){var e=this.getParent();if(null===e)return null;let t=(e=e.__children).length,n=e.indexOf(this.__key);return n>=t-1?null:ve(e[n+1])}getNextSiblings(){var e=this.getParent();if(null===e)return[];let t=(e=e.__children).indexOf(this.__key);return e.slice(t+1).map((e=>Pn(e)))}getCommonAncestor(e){let t=this.getParents();var n=e.getParents();Fn(this)&&t.unshift(this),Fn(e)&&n.unshift(e),e=t.length;var r=n.length;if(0===e||0===r||t[e-1]!==n[r-1])return null;for(n=new Set(n),r=0;r<e;r++){let e=t[r];if(n.has(e))return e}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;var t=this.getCommonAncestor(e);let n=this;for(;;){var r=n.getParentOrThrow();if(r===t){r=r.__children.indexOf(n.__key);break}n=r}for(n=e;;){if((e=n.getParentOrThrow())===t){t=e.__children.indexOf(n.__key);break}n=e}return r<t}isParentOf(e){let t=this.__key;if(t===e.__key)return!1;for(;null!==e;){if(e.__key===t)return!0;e=e.getParent()}return!1}getNodesBetween(e){let t=this.isBefore(e),n=[],r=new Set;for(var i=this;;){var o=i.__key;if(r.has(o)||(r.add(o),n.push(i)),i===e)break;if(null!==(o=Fn(i)?t?i.getFirstChild():i.getLastChild():null))i=o;else if(null!==(o=t?i.getNextSibling():i.getPreviousSibling()))i=o;else{if(i=i.getParentOrThrow(),r.has(i.__key)||n.push(i),i===e)break;o=i;do{null===o&&b(68),i=t?o.getNextSibling():o.getPreviousSibling(),null!==(o=o.getParent())&&(null!==i||r.has(o.__key)||n.push(o))}while(null===i)}}return t||n.reverse(),n}isDirty(){let e=Nn()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){let e=ve(this.__key);return null===e&&b(69),e}getWritable(){vn();var e=Tn(),t=Nn();e=e._nodeMap;let n=this.__key,r=this.getLatest(),i=r.__parent;t=t._cloneNotNeeded;var o=dn();return null!==o&&(o._cachedNodes=null),t.has(n)?(pe(r),r):((o=r.constructor.clone(r)).__parent=i,Fn(r)&&Fn(o)?(o.__children=Array.from(r.__children),o.__indent=r.__indent,o.__format=r.__format,o.__dir=r.__dir):or(r)&&or(o)&&(o.__format=r.__format,o.__style=r.__style,o.__mode=r.__mode,o.__detail=r.__detail),t.add(n),o.__key=n,pe(o),e.set(n,o),o)}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(){b(70)}updateDOM(){b(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){b(72)}static importJSON(){b(18)}remove(e){$n(this,!0,e)}replace(e){vn();let t=this.__key;_e(e=e.getWritable());var n=this.getParentOrThrow(),r=n.getWritable().__children;let i=r.indexOf(this.__key),o=e.__key;return-1===i&&b(31),r.splice(i,0,o),e.__parent=n.__key,$n(this,!1),me(e),Ut(r=dn())&&(n=r.anchor,r=r.focus,n.key===t&&zt(n,e),r.key===t&&zt(r,e)),Ce()===t&&ye(o),e}insertAfter(e){vn();var t=this.getWritable(),n=e.getWritable(),r=n.getParent();let i=dn();var o=e.getIndexWithinParent(),l=!1,s=!1;null!==r&&(_e(n),Ut(i)&&(s=r.__key,l=i.anchor,r=i.focus,l="element"===l.type&&l.key===s&&l.offset===o+1,s="element"===r.type&&r.key===s&&r.offset===o+1)),o=this.getParentOrThrow().getWritable(),r=n.__key,n.__parent=t.__parent;let a=o.__children;return-1===(t=a.indexOf(t.__key))&&b(31),a.splice(t+1,0,r),me(n),Ut(i)&&(cn(i,o,t+1),n=o.__key,l&&i.anchor.set(n,t+2,"element"),s&&i.focus.set(n,t+2,"element")),e}insertBefore(e){var t=this.getWritable(),n=e.getWritable();_e(n);let r=this.getParentOrThrow().getWritable(),i=n.__key;n.__parent=t.__parent;let o=r.__children;return-1===(t=o.indexOf(t.__key))&&b(31),o.splice(t,0,i),me(n),Ut(n=dn())&&cn(n,r,t),e}selectPrevious(e,t){vn();let n=this.getPreviousSibling(),r=this.getParentOrThrow();return null===n?r.select(0,0):Fn(n)?n.select():or(n)?n.select(e,t):(e=n.getIndexWithinParent()+1,r.select(e,e))}selectNext(e,t){vn();let n=this.getNextSibling(),r=this.getParentOrThrow();return null===n?r.select():Fn(n)?n.select(0,0):or(n)?n.select(e,t):(e=n.getIndexWithinParent(),r.select(e,e))}markDirty(){this.getWritable()}}class In extends kn{constructor(e){super(e)}decorate(){b(47)}isIsolated(){return!1}isInline(){return!0}}function bn(e){return e instanceof In}class Ln extends kn{constructor(e){super(e),this.__children=[],this.__indent=this.__format=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){let e=this.getFormat();return q[e]||""}getIndent(){return this.getLatest().__indent}getChildren(){let e=this.getLatest().__children,t=[];for(let n=0;n<e.length;n++){let r=ve(e[n]);null!==r&&t.push(r)}return t}getChildrenKeys(){return this.getLatest().__children}getChildrenSize(){return this.getLatest().__children.length}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=Nn()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest();return e.getParentOrThrow().getLastChild()===e}getAllTextNodes(){let e=[],t=this.getLatest().__children;for(let r=0;r<t.length;r++){var n=ve(t[r]);or(n)?e.push(n):Fn(n)&&(n=n.getAllTextNodes(),e.push(...n))}return e}getFirstDescendant(){let e=this.getFirstChild();for(;null!==e;){if(Fn(e)){let t=e.getFirstChild();if(null!==t){e=t;continue}}break}return e}getLastDescendant(){let e=this.getLastChild();for(;null!==e;){if(Fn(e)){let t=e.getLastChild();if(null!==t){e=t;continue}}break}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;return e>=n?Fn(e=t[n-1])&&e.getLastDescendant()||e||null:Fn(e=t[e])&&e.getFirstDescendant()||e||null}getFirstChild(){let e=this.getLatest().__children;return 0===e.length?null:ve(e[0])}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&b(45),e}getLastChild(){let e=this.getLatest().__children,t=e.length;return 0===t?null:ve(e[t-1])}getLastChildOrThrow(){let e=this.getLastChild();if(null===e)throw Error(`Expected node ${this.__key} to have a last child.`);return e}getChildAtIndex(e){return void 0===(e=this.getLatest().__children[e])?null:ve(e)}getTextContent(){let e="",t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){let i=t[r];e+=i.getTextContent(),Fn(i)&&r!==n-1&&!i.isInline()&&(e+="\n\n")}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){return""!==e&&(e=j[e],0!=(this.getFormat()&e))}select(e,t){vn();let n=dn();var r=this.getChildrenSize();return void 0===e&&(e=r),void 0===t&&(t=r),r=this.__key,Ut(n)?(n.anchor.set(r,e,"element"),n.focus.set(r,t,"element"),n.dirty=!0,n):ln(r,e,r,t,"element","element")}selectStart(){let e=this.getFirstDescendant();return Fn(e)||or(e)?e.select(0,0):null!==e?e.selectPrevious():this.select(0,0)}selectEnd(){let e=this.getLastDescendant();return Fn(e)||or(e)?e.select():null!==e?e.selectNext():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach((e=>e.remove())),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?j[e]:0,this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){let r=this.getWritable();var i=r.__key;let o=r.__children,l=n.length;var s=[];for(let e=0;e<l;e++){let t=n[e],r=t.getWritable();t.__key===i&&b(76),_e(r),r.__parent=i,s.push(r.__key)}if((n=this.getChildAtIndex(e-1))&&pe(n),(i=this.getChildAtIndex(e+t))&&pe(i),e===o.length?(o.push(...s),e=[]):e=o.splice(e,t,...s),e.length&&Ut(t=dn())){let r=new Set(e),l=new Set(s);s=e=>{for(e=e.getNode();e;){const t=e.__key;if(r.has(t)&&!l.has(t))return!0;e=e.getParent()}return!1};let{anchor:a,focus:d}=t;for(s(a)&&gn(a,a.getNode(),this,n,i),s(d)&&gn(d,d.getNode(),this,n,i),s=e.length,t=0;t<s;t++)null!=(n=ve(e[t]))&&(n.getWritable().__parent=null);0!==o.length||this.canBeEmpty()||Ye(this)||this.remove()}return r}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(){return null}canInsertTab(){return!1}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function Fn(e){return e instanceof Ln}class Bn extends Ln{static getType(){return"root"}static clone(){return new Bn}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){b(51)}getTextContent(){let e=this.__cachedText;return!mn&&0!==Nn()._dirtyType||null===e?super.getTextContent():e}remove(){b(52)}replace(){b(53)}insertBefore(){b(54)}insertAfter(){b(55)}updateDOM(){return!1}append(...e){for(let t=0;t<e.length;t++){let n=e[t];Fn(n)||bn(n)||b(56)}return super.append(...e)}static importJSON(e){let t=Se();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}}function Kn(e){return e instanceof Bn}function Wn(){return new Yn(new Map([["root",new Bn]]))}function zn(e){let t=e.exportJSON();t.type!==e.constructor.getType()&&b(58);let n=t.children;if(Fn(e)){Array.isArray(n)||b(59),e=e.getChildren();for(let t=0;t<e.length;t++){let r=zn(e[t]);n.push(r)}}return t}class Yn{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._readOnly=this._flushSync=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e){return Sn(this,e)}clone(e){return(e=new Yn(this._nodeMap,void 0===e?this._selection:e))._readOnly=!0,e}toJSON(){return Sn(this,(()=>({root:zn(Se())})))}}class Hn extends kn{static getType(){return"linebreak"}static clone(e){return new Hn(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>{let t=e.parentElement;return null!=t&&t.firstChild===e&&t.lastChild===e?null:{conversion:Gn,priority:0}}}}static importJSON(){return Un()}exportJSON(){return{type:"linebreak",version:1}}}function Gn(){return{node:Un()}}function Un(){return new Hn}function Jn(e){return e instanceof Hn}function Vn(e,t){return 16&t?"code":32&t?"sub":64&t?"sup":null}function Xn(e,t){return 1&t?"strong":2&t?"em":"span"}function jn(e,t,n,r,i){e=r.classList,void 0!==(r=ke(i,"base"))&&e.add(...r);let o=!1,l=8&t&&4&t;var s=8&n&&4&n;void 0!==(r=ke(i,"underlineStrikethrough"))&&(s?(o=!0,l||e.add(...r)):l&&e.remove(...r));for(let a in V)s=V[a],void 0!==(r=ke(i,a))&&(n&s&&(!o||"underline"!==a&&"strikethrough"!==a)?(0==(t&s)||l&&"underline"===a||"strikethrough"===a)&&e.add(...r):t&s&&e.remove(...r))}function qn(e,t,n){let r=t.firstChild;if(e+=(n=n.isComposing())?H:"",null==r)t.textContent=e;else if((t=r.nodeValue)!==e)if(n||K){n=t.length;let i=e.length,o=0,l=0;for(;o<n&&o<i&&t[o]===e[o];)o++;for(;l+o<n&&l+o<i&&t[n-l-1]===e[i-l-1];)l++;e=[o,n-o-l,e.slice(o,i-l)];let[s,a,d]=e;0!==a&&r.deleteData(s,a),r.insertData(s,d)}else r.nodeValue=e}class Qn extends kn{static getType(){return"text"}static clone(e){return new Qn(e.__text,e.__key)}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let e=this.getLatest();return Z[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===Ce()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return 0!=(1&this.getLatest().__detail)}isUnmergeable(){return 0!=(2&this.getLatest().__detail)}hasFormat(e){return e=V[e],0!=(this.getFormat()&e)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return ge(this.getLatest().__format,e,t)}createDOM(e){var t=this.__format,n=Vn(0,t);let r=Xn(0,t),i=document.createElement(null===n?r:n),o=i;return null!==n&&(o=document.createElement(r),i.appendChild(o)),n=o,qn(this.__text,n,this),void 0!==(e=e.theme.text)&&jn(r,0,t,n,e),""!==(t=this.__style)&&(i.style.cssText=t),i}updateDOM(e,t,n){let r=this.__text;var i=e.__format,o=this.__format,l=Vn(0,i);let s=Vn(0,o);var a=Xn(0,i);let d=Xn(0,o);return(null===l?a:l)!==(null===s?d:s)||(l===s&&a!==d?(null==(i=t.firstChild)&&b(48),qn(r,e=l=document.createElement(d),this),void 0!==(n=n.theme.text)&&jn(d,0,o,e,n),t.replaceChild(l,i),!1):(a=t,null!==s&&null!==l&&null==(a=t.firstChild)&&b(49),qn(r,a,this),void 0!==(n=n.theme.text)&&i!==o&&jn(d,i,o,a,n),o=this.__style,e.__style!==o&&(t.style.cssText=o),!1))}static importDOM(){return{"#text":()=>({conversion:tr,priority:0}),b:()=>({conversion:er,priority:0}),code:()=>({conversion:rr,priority:0}),em:()=>({conversion:rr,priority:0}),i:()=>({conversion:rr,priority:0}),span:()=>({conversion:Zn,priority:0}),strong:()=>({conversion:rr,priority:0}),u:()=>({conversion:rr,priority:0})}}static importJSON(e){let t=ir(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?V[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?X[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){return e=V[e],this.setFormat(this.getFormat()^e)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){e=Q[e];let t=this.getWritable();return t.__mode=e,t}setTextContent(e){let t=this.getWritable();return t.__text=e,t}select(e,t){vn();let n=dn();var r=this.getTextContent();let i=this.__key;return"string"==typeof r?(r=r.length,void 0===e&&(e=r),void 0===t&&(t=r)):t=e=0,Ut(n)?((r=Ce())!==n.anchor.key&&r!==n.focus.key||ye(i),n.setTextNodeRange(this,e,this,t),n):ln(i,e,i,t,"text","text")}spliceText(e,t,n,r){let i=this.getWritable(),o=i.__text,l=n.length,s=e;0>s&&(s=l+s,0>s&&(s=0));let a=dn();return r&&Ut(a)&&(e+=l,a.setTextNodeRange(i,e,i,e)),t=o.slice(0,s)+n+o.slice(s+t),i.__text=t,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){vn();var t=this.getLatest(),n=t.getTextContent(),r=t.__key,i=Ce(),o=new Set(e);e=[];for(var l=n.length,s="",a=0;a<l;a++)""!==s&&o.has(a)&&(e.push(s),s=""),s+=n[a];if(""!==s&&e.push(s),0===(o=e.length))return[];if(e[0]===n)return[t];var d=e[0];a=(n=t.getParentOrThrow()).__key;let u=t.getFormat(),c=t.getStyle(),f=t.__detail;l=!1,t.isSegmented()?((s=ir(d)).__parent=a,s.__format=u,s.__style=c,s.__detail=f,l=!0):(s=t.getWritable()).__text=d,t=dn(),s=[s],d=d.length;for(let n=1;n<o;n++){var g=e[n],h=g.length;(g=ir(g).getWritable()).__format=u,g.__style=c,g.__detail=f;let o=g.__key;if(h=d+h,Ut(t)){let e=t.anchor,n=t.focus;e.key===r&&"text"===e.type&&e.offset>d&&e.offset<=h&&(e.key=o,e.offset-=d,t.dirty=!0),n.key===r&&"text"===n.type&&n.offset>d&&n.offset<=h&&(n.key=o,n.offset-=d,t.dirty=!0)}i===r&&ye(o),d=h,g.__parent=a,s.push(g)}return me(this),r=(i=n.getWritable().__children).indexOf(r),e=s.map((e=>e.__key)),l?(i.splice(r,0,...e),this.remove()):i.splice(r,1,...e),Ut(t)&&cn(t,n,r,o-1),s}mergeWithSibling(e){var t=e===this.getPreviousSibling();t||e===this.getNextSibling()||b(50);var n=this.__key;let r=e.__key,i=this.__text,o=i.length;Ce()===r&&ye(n);let l=dn();if(Ut(l)){let i=l.anchor,s=l.focus;null!==i&&i.key===r&&(hn(i,t,n,e,o),l.dirty=!0),null!==s&&s.key===r&&(hn(s,t,n,e,o),l.dirty=!0)}return n=e.__text,this.setTextContent(t?n+i:i+n),t=this.getWritable(),e.remove(),t}isTextEntity(){return!1}}function Zn(e){let t="700"===e.style.fontWeight,n="line-through"===e.style.textDecoration,r="italic"===e.style.fontStyle,i="underline"===e.style.textDecoration,o=e.style.verticalAlign;return{forChild:e=>or(e)?(t&&e.toggleFormat("bold"),n&&e.toggleFormat("strikethrough"),r&&e.toggleFormat("italic"),i&&e.toggleFormat("underline"),"sub"===o&&e.toggleFormat("subscript"),"super"===o&&e.toggleFormat("superscript"),e):e,node:null}}function er(e){let t="normal"===e.style.fontWeight;return{forChild:e=>(or(e)&&!t&&e.toggleFormat("bold"),e),node:null}}function tr(e,t,n){return e=e.textContent||"",!n&&/\n/.test(e)&&0===(e=e.replace(/\r?\n/gm," ")).trim().length?{node:null}:{node:ir(e)}}let nr={code:"code",em:"italic",i:"italic",strong:"bold",u:"underline"};function rr(e){let t=nr[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:e=>(or(e)&&e.toggleFormat(t),e),node:null}}function ir(e=""){return new Qn(e)}function or(e){return e instanceof Qn}class lr extends Ln{static getType(){return"paragraph"}static clone(e){return new lr(e.__key)}createDOM(e){let t=document.createElement("p");return void 0!==(e=ke(e.theme,"paragraph"))&&t.classList.add(...e),t}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:sr,priority:0})}}exportDOM(e){if(({element:e}=super.exportDOM(e)),e&&this.isEmpty()&&e.append(document.createElement("br")),e){var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t),0<(t=this.getIndent())&&(e.style.textIndent=20*t+"px")}return{element:e}}static importJSON(e){let t=ar();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}insertNewAfter(){let e=ar(),t=this.getDirection();return e.setDirection(t),this.insertAfter(e),e}collapseAtStart(){let e=this.getChildren();if(0===e.length||or(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function sr(){return{node:ar()}}function ar(){return new lr}function dr(e,t,n,r){let i=e._keyToDOMMap;i.clear(),e._editorState=Wn(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],null!==(r=e._observer)&&(r.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",i.set("root",n))}class ur{constructor(e,t,n,r,i,o){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Ae(),this._onError=i,this._htmlConversions=o,this._editable=!0,this._headless=!1,this._window=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){void 0===n&&b(35);let r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=r.get(e);void 0===i&&b(36);let o=i[n];return o.add(t),()=>{o.delete(t),i.every((e=>0===e.size))&&r.delete(e)}}registerMutationListener(e,t){void 0===this._nodes.get(e.getType())&&b(37);let n=this._listeners.mutation;return n.set(t,e),()=>{n.delete(t)}}registerNodeTransform(e,t){e=e.getType();let n=this._nodes.get(e);void 0===n&&b(37);let r=n.transforms;return r.add(t),function(e,t){wn(e,(()=>{var e=Tn();if(!e.isEmpty())if("root"===t)Se().markDirty();else{e=e._nodeMap;for(let[,t]of e)t.markDirty()}}),null===e._pendingEditorState?{tag:"history-merge"}:void 0)}(this,e),()=>{r.delete(t)}}hasNodes(e){for(let t=0;t<e.length;t++){let n=e[t].getType();if(!this._nodes.has(n))return!1}return!0}dispatchCommand(e,t){return Mn(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){var n=this._pendingEditorState||this._editorState;if(this._rootElement=e,dr(this,t,e,n),null!==t&&!this._config.disableEvents){if(0!==Mt&&(Mt--,0===Mt&&t.ownerDocument.removeEventListener("selectionchange",Bt)),null!=(n=t.__lexicalEditor)){if(null!==n._parentEditor){var r=Re(n);r=r[r.length-1]._key,Ft.get(r)===n&&Ft.delete(r)}else Ft.delete(n._key);t.__lexicalEditor=null}for(n=Lt(t),r=0;r<n.length;r++)n[r]();t.__lexicalEventHandles=[]}null!==e?(n=(n=e.ownerDocument)&&n.defaultView||null,(r=e.style).userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=n,this._dirtyType=2,le(this),this._updateTags.add("history-merge"),On(this),this._config.disableEvents||function(e,t){0===Mt&&e.ownerDocument.addEventListener("selectionchange",Bt),Mt++,e.__lexicalEditor=t;let n=Lt(e);for(let r=0;r<St.length;r++){let[i,o]=St[r],l="function"==typeof o?e=>{t.isEditable()&&o(e,t)}:e=>{if(t.isEditable())switch(i){case"cut":return Mn(t,$,e);case"copy":return Mn(t,w,e);case"paste":return Mn(t,a,e);case"dragstart":return Mn(t,M,e);case"dragover":return Mn(t,R,e);case"dragend":return Mn(t,A,e);case"focus":return Mn(t,P,e);case"blur":return Mn(t,k,e);case"drop":return Mn(t,D,e)}};e.addEventListener(i,l),n.push((()=>{e.removeEventListener(i,l)}))}}(e,this)):this._window=null,Dn("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&b(38),oe(this);let n=this._pendingEditorState,r=this._updateTags;t=void 0!==t?t.tag:null,null===n||n.isEmpty()||(null!=t&&r.add(t),On(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=t&&r.add(t),On(this)}parseEditorState(e,t){e="string"==typeof e?JSON.parse(e):e;let n=Wn(),r=_n,i=mn,o=pn,l=this._dirtyElements,s=this._dirtyLeaves,a=this._cloneNotNeeded,d=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,_n=n,mn=!1,pn=this;try{xn(e.root,this._nodes),t&&t(),n._readOnly=!0}finally{this._dirtyElements=l,this._dirtyLeaves=s,this._cloneNotNeeded=a,this._dirtyType=d,_n=r,mn=i,pn=o}return n}update(e,t){wn(this,e,t)}focus(e,t={}){let n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),wn(this,(()=>{let e=dn(),n=Se();null!==e?e.dirty=!0:0!==n.getChildrenSize()&&("rootStart"===t.defaultSelection?n.selectStart():n.selectEnd())}),{onUpdate:()=>{n.removeAttribute("autocapitalize"),e&&e()}}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){var e=this._rootElement;null!==e&&e.blur(),null!==(e=window.getSelection())&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,Dn("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}class cr extends Ln{constructor(e,t){super(t),this.__colSpan=e}exportJSON(){return{...super.exportJSON(),colSpan:this.__colSpan}}}function fr(e){return e instanceof cr}class gr extends Ln{}function hr(e){return e instanceof gr}class _r extends Ln{}function pr(e){return e instanceof _r}t.$addUpdateTag=function(e){vn(),Nn()._updateTags.add(e)},t.$createLineBreakNode=Un,t.$createNodeSelection=sn,t.$createParagraphNode=ar,t.$createRangeSelection=function(){let e=new Kt("root",0,"element"),t=new Kt("root",0,"element");return new Xt(e,t,0)},t.$createTextNode=ir,t.$getDecoratorNode=Le,t.$getNearestNodeFromDOMNode=Ne,t.$getNodeByKey=ve,t.$getPreviousSelection=un,t.$getRoot=Se,t.$getSelection=dn,t.$hasAncestor=We,t.$insertNodes=function(e,t){let n=dn();return null===n&&(n=Se().selectEnd()),n.insertNodes(e,t)},t.$isDecoratorNode=bn,t.$isElementNode=Fn,t.$isInlineElementOrDecoratorNode=function(e){return Fn(e)&&e.isInline()||bn(e)&&e.isInline()},t.$isLeafNode=he,t.$isLineBreakNode=Jn,t.$isNodeSelection=jt,t.$isParagraphNode=function(e){return e instanceof lr},t.$isRangeSelection=Ut,t.$isRootNode=Kn,t.$isRootOrShadowRoot=Ye,t.$isTextNode=or,t.$nodesOfType=function(e){var t=Tn();let n=t._readOnly,r=e.getType();t=t._nodeMap;let i=[];for(let[,o]of t)o instanceof e&&o.__type===r&&(n||o.isAttached())&&i.push(o);return i},t.$parseSerializedNode=function(e){return xn(e,Nn()._nodes)},t.$setCompositionKey=ye,t.$setSelection=Oe,t.BLUR_COMMAND=k,t.CAN_REDO_COMMAND={},t.CAN_UNDO_COMMAND={},t.CLEAR_EDITOR_COMMAND={},t.CLEAR_HISTORY_COMMAND={},t.CLICK_COMMAND=r,t.COMMAND_PRIORITY_CRITICAL=4,t.COMMAND_PRIORITY_EDITOR=0,t.COMMAND_PRIORITY_HIGH=3,t.COMMAND_PRIORITY_LOW=1,t.COMMAND_PRIORITY_NORMAL=2,t.CONTROLLED_TEXT_INSERTION_COMMAND=s,t.COPY_COMMAND=w,t.CUT_COMMAND=$,t.DELETE_CHARACTER_COMMAND=i,t.DELETE_LINE_COMMAND=c,t.DELETE_WORD_COMMAND=u,t.DEPRECATED_$createGridSelection=function(){let e=new Kt("root",0,"element"),t=new Kt("root",0,"element");return new Jt("root",e,t)},t.DEPRECATED_$isGridCellNode=fr,t.DEPRECATED_$isGridNode=hr,t.DEPRECATED_$isGridRowNode=pr,t.DEPRECATED_$isGridSelection=Vt,t.DEPRECATED_GridCellNode=cr,t.DEPRECATED_GridNode=gr,t.DEPRECATED_GridRowNode=_r,t.DRAGEND_COMMAND=A,t.DRAGOVER_COMMAND=R,t.DRAGSTART_COMMAND=M,t.DROP_COMMAND=D,t.DecoratorNode=In,t.ElementNode=Ln,t.FOCUS_COMMAND=P,t.FORMAT_ELEMENT_COMMAND={},t.FORMAT_TEXT_COMMAND=f,t.INDENT_CONTENT_COMMAND={},t.INSERT_LINE_BREAK_COMMAND=o,t.INSERT_PARAGRAPH_COMMAND=l,t.KEY_ARROW_DOWN_COMMAND=v,t.KEY_ARROW_LEFT_COMMAND=m,t.KEY_ARROW_RIGHT_COMMAND=_,t.KEY_ARROW_UP_COMMAND=C,t.KEY_BACKSPACE_COMMAND=E,t.KEY_DELETE_COMMAND=S,t.KEY_ENTER_COMMAND=T,t.KEY_ESCAPE_COMMAND=x,t.KEY_MODIFIER_COMMAND=I,t.KEY_SPACE_COMMAND=N,t.KEY_TAB_COMMAND=O,t.LineBreakNode=Hn,t.MOVE_TO_END=p,t.MOVE_TO_START=y,t.OUTDENT_CONTENT_COMMAND={},t.PASTE_COMMAND=a,t.ParagraphNode=lr,t.REDO_COMMAND=h,t.REMOVE_TEXT_COMMAND=d,t.RootNode=Bn,t.SELECTION_CHANGE_COMMAND=n,t.TextNode=Qn,t.UNDO_COMMAND=g,t.VERSION="0.4.1",t.createCommand=function(){return{}},t.createEditor=function(e){var t=e||{},n=pn,r=t.theme||{};let i=void 0===e?n:t.parentEditor||null,o=t.disableEvents||!1,l=Wn(),s=t.namespace||(null!==i?i._config.namespace:Ae()),a=t.editorState,d=[Bn,Qn,Hn,lr,...t.nodes||[]],u=t.onError;if(t=void 0===t.editable||t.editable,void 0===e&&null!==n)e=n._nodes;else for(e=new Map,n=0;n<d.length;n++){let t=d[n],r=t.getType();e.set(r,{klass:t,transforms:new Set})}return r=new ur(l,i,e,{disableEvents:o,namespace:s,theme:r},u||console.error,function(e){let t=new Map,n=new Set;return e.forEach((e=>{if(null!=(e=null!=e.klass.importDOM?e.klass.importDOM.bind(e.klass):null)&&!n.has(e)){n.add(e);var r=e();null!==r&&Object.keys(r).forEach((e=>{let n=t.get(e);void 0===n&&(n=[],t.set(e,n)),n.push(r[e])}))}})),t}(e),t),void 0!==a&&(r._pendingEditorState=a,r._dirtyType=2),r}}}]);
//# sourceMappingURL=npm.lexical-5d954a96c32743d80b1f.js.map