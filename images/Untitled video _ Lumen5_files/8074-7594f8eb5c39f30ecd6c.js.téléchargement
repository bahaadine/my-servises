(self.webpackChunkweb=self.webpackChunkweb||[]).push([[8074,9163],{84261:function(e,t,n){"use strict";n.d(t,{H:function(){return u},Hb:function(){return r},L0:function(){return i},No:function(){return o},d6:function(){return a},sc:function(){return s},zY:function(){return c}});const r="65647a42-6a86-4098-bad1-6c8769eb8f23",i="https://storage.googleapis.com/lumen5-user-cc859198-d474-46f3-b125-bd73806bd369/preview-07Tw-Andromedaonboardingvideo1mp4-ouO7r45NGMo.mp4",o="https://storage.googleapis.com/lumen5-user-cc859198-d474-46f3-b125-bd73806bd369/tmp06bct09t.png",a={startTime:20300,endTime:24800},s={startTime:26900,endTime:34700},u={startTime:38e3,endTime:47700},c={uuid:r,type:"video",source:21,source_id:i,license:"user_private",is_editorial:null,width:1920,height:1080,thumbnail_url:"https://storage.googleapis.com/lumen5-user-cc859198-d474-46f3-b125-bd73806bd369/thumb-dVzO-Andromedaonboardingvideo1mp4-ouO7r45NGMo.mp4",preview_url:i,render_url:i,poster_url:"https://storage.googleapis.com/lumen5-user-cc859198-d474-46f3-b125-bd73806bd369/tmp-placeholder-imgy3QtN6.jpg",duration:52128.798,has_audio:!0,has_voiceover:!0}},48178:function(e,t,n){"use strict";n.d(t,{YM:function(){return A},Q8:function(){return D},GC:function(){return v}});var r=n(67294),i=n(94184),o=n.n(i),a=n(93379),s=n.n(a),u=n(7795),c=n.n(u),d=n(90569),l=n.n(d),_=n(3565),E=n.n(_),f=n(19216),p=n.n(f),T=n(44589),h=n.n(T),S=n(23955),g={};g.styleTagTransform=h(),g.setAttributes=E(),g.insert=l().bind(null,"head"),g.domAPI=c(),g.insertStyleElement=p(),s()(S.Z,g),S.Z&&S.Z.locals&&S.Z.locals;var m,I=n(89366);function R(e){let{show:t=!1,onClick:n,className:i="",zIndexOrder:a=m.content,children:s}=e;const u="function"==typeof n,c=o()("common-ui-backdrop",i,{"backdrop-visible":t,"backdrop-hidden":!t,clickable:u&&t,"not-clickable":!u||!t},m[a]);return r.createElement("div",{className:c,onClick:n},s)}!function(e){e.content="z-content",e["slide-overlay"]="z-slide-overlay",e["dashboard-backdrop"]="z-dashboard-backdrop"}(m||(m={}));const A=r.memo(R);function y(e){return r.createElement(R,e,r.createElement("div",{className:"content-loading"},r.createElement(I.Z,{className:"text-white"})))}const v=r.memo(y);function O(e){const t={...e};return delete t.children,r.createElement(R,t,r.createElement("div",{className:"content-blur"}),e.children)}const D=r.memo(O)},79078:function(e,t,n){"use strict";n.d(t,{G:function(){return A},Z:function(){return v}});var r=n(93379),i=n.n(r),o=n(7795),a=n.n(o),s=n(90569),u=n.n(s),c=n(3565),d=n.n(c),l=n(19216),_=n.n(l),E=n(44589),f=n.n(E),p=n(79678),T={};T.styleTagTransform=f(),T.setAttributes=d(),T.insert=u().bind(null,"head"),T.domAPI=a(),T.insertStyleElement=_(),i()(p.Z,T),p.Z&&p.Z.locals&&p.Z.locals;var h=n(67294),S=n(88956),g=n(60668),m=n(94184),I=n.n(m),R=n(48178);let A;!function(e){e.DEFAULT="default",e.SM="sm",e.LG="lg",e.XL="xl",e.FS="fs"}(A||(A={}));class y extends h.PureComponent{constructor(e){super(e),this.onHide=this.onHide.bind(this),this.onEntered=this.onEntered.bind(this),this.onEnter=this.onEnter.bind(this),this.onShow=this.onShow.bind(this)}onHide(){"function"==typeof this.props.onHidden&&this.props.onHidden()}onEntered(){"function"==typeof this.props.onShown&&this.props.onShown()}onEnter(){"function"==typeof this.props.beforeShown&&this.props.beforeShown()}onShow(){this.usesAnimation||(this.onEnter(),this.onEntered())}get usesAnimation(){return"off"!==this.props.animation&&!g.QE}render(){const e=this.props.closeable??!0,t=this.props.loadingContents??!1,n=this.props.size??A.DEFAULT;let r;this.props.title&&(r=h.createElement(S.Z.Title,{className:"ellipsis-text-overflow","data-sharewithclosebtn":!0===e},this.props.title));let i=null;return(e||r)&&(i=h.createElement(h.Fragment,null,h.createElement(S.Z.Header,{className:"d-block",closeButton:!1!==e},r),this.props.title&&h.createElement("hr",null))),h.createElement(S.Z,{animation:this.usesAnimation,show:this.props.showing,className:this.props.className,backdrop:this.props.backdrop,onHide:this.onHide,onEnter:this.onEnter,onEntered:this.onEntered,onShow:this.onShow,size:n,dialogClassName:I()(this.props.dialogClassName,{"overflow-unset":this.props.unsetOverflow}),backdropClassName:this.props.backdropClassName},i,h.createElement(S.Z.Body,null,this.props.children),this.props.footer&&h.createElement(S.Z.Footer,null,this.props.footer),h.createElement(R.GC,{className:"modal-contents-loading",show:t}))}}var v=y},83272:function(e,t,n){"use strict";n.d(t,{ZP:function(){return h},mm:function(){return f},Zb:function(){return p}});var r=n(14890),i=n(35369);const o=[{hidden:"hidden",event:"visibilitychange",state:"visibilityState"},{hidden:"webkitHidden",event:"webkitvisibilitychange",state:"webkitVisibilityState"},{hidden:"mozHidden",event:"mozvisibilitychange",state:"mozVisibilityState"},{hidden:"msHidden",event:"msvisibilitychange",state:"msVisibilityState"},{hidden:"oHidden",event:"ovisibilitychange",state:"oVisibilityState"}],a="undefined"!=typeof document&&Boolean(document.addEventListener);class s{constructor(e){this.total_accumulated_seconds=e,this.current_interval_start=s.get_current_seconds(),this.currently_visible=!0;const t=this.visibility();a&&null!==t&&document.addEventListener(t.event,(()=>this.handleVisibilityChange()))}clear(){this.total_accumulated_seconds=0,this.current_interval_start=s.get_current_seconds(),this.currently_visible=!0}getSecondsPassed(){let e=this.total_accumulated_seconds;return this.currently_visible&&(e+=s.get_current_seconds()-this.current_interval_start),Math.floor(e)}handleVisibilityChange(){const e=this.visibility(),t=!document[e.hidden];if(t)this.currently_visible||(this.current_interval_start=s.get_current_seconds());else if(this.currently_visible){const e=s.get_current_seconds()-this.current_interval_start;this.total_accumulated_seconds+=e,this.current_interval_start=null}this.currently_visible=t}static get_current_seconds(){return(new Date).getTime()/1e3}visibility(){if(!a)return null;for(let e=0;e<o.length;e++){const t=o[e];if(t.hidden in document)return t}return null}}var u=s,c=n(84829);const d=new u(0);function l(){return i.default.fromJS({story_tab_duration:0,media_tab_duration:0,music_tab_duration:0,style_tab_duration:0,format_tab_duration:0})}let _;!function(e){e.INITIALIZE_TAB_DURATIONS="INITIALIZE_TAB_DURATIONS",e.SYNC_DURATION="SYNC_DURATION"}(_||(_={}));var E=n(29829);const f=(0,E.PH)(_.INITIALIZE_TAB_DURATIONS),p=(0,E.PH)(_.SYNC_DURATION),T=(0,r.UY)({tab_durations:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l(),t=arguments.length>1?arguments[1]:void 0;if(f.match(t))return e=e.set("story_tab_duration",t.payload.story??0),e=e.set("media_tab_duration",t.payload.media??0),e=e.set("music_tab_duration",t.payload.music??0),e=e.set("style_tab_duration",t.payload.style??0),e=e.set("format_tab_duration",t.payload.format??0),d.clear(),e;if(p.match(t)){const n=d.getSecondsPassed();switch(d.clear(),t.payload.currentTab){case c.BB.STORY:return e.set("story_tab_duration",e.get("story_tab_duration")+n);case c.BB.MEDIA:return e.set("media_tab_duration",e.get("media_tab_duration")+n);case c.BB.MUSIC:return e.set("music_tab_duration",e.get("music_tab_duration")+n);case c.BB.STYLE:return e.set("style_tab_duration",e.get("style_tab_duration")+n);case c.BB.FORMAT:return e.set("format_tab_duration",e.get("format_tab_duration")+n);default:return e}}return e}});var h=T},94561:function(e,t,n){"use strict";n.d(t,{Cj:function(){return E},GK:function(){return m},Gy:function(){return c},Lf:function(){return o},OO:function(){return s},P5:function(){return f},PM:function(){return A},Rz:function(){return a},T3:function(){return g},Ty:function(){return p},Vs:function(){return u},_Q:function(){return y},a9:function(){return S},bm:function(){return N},cB:function(){return v},cE:function(){return h},dl:function(){return _},fQ:function(){return R},gJ:function(){return i},gM:function(){return O},nC:function(){return C},of:function(){return l},pC:function(){return D},pP:function(){return I},v_:function(){return T},yf:function(){return d}});var r=n(36062);function i(e){return e.app.video_id}function o(e){return e.app.editor_tab}function a(e){return e.app.videoCreationSource}function s(e){return e.app.parentVideoLanguage}function u(e){return e.app.videoDataHash}function c(e){return e.app.sharePageUrl}function d(e){return e.app.videoVisibility}function l(e){return e.app.video_language}function _(e){return e.app.has_article}function E(e,t){return e.app.loadingScenes.get(t)}function f(e,t){return e.app.loadingScenes.has(t)}function p(e){return!!e.app&&e.app.isStoryboardLoading}function T(e){return!!e.app&&e.app.user_edited_text}function h(e){return e.app?e.app.selected_format:null}function S(e){return e.app.activeSceneInfo}function g(e){return e.app.isStoryboardGenerating}function m(e){return e.app.video_project}function I(e){return e.app.video_owner}function R(e){return e.app.videoApprovalStatus}function A(e){return e.app.videoAssignee}function y(e){return e.app.videoName}function v(e){return e.app?e.app.currentSavedTemplate:null}function O(e){return e.app&&e.app.currentSavedTemplate?e.app.currentSavedTemplate.get("video_data_hash"):null}function D(e){return!!e.app&&e.app.creatorMode===r.pc.SAVED_TEMPLATE_EDITOR}function C(e){return e.app.docToScriptPage}function N(e){return e.app.docToScriptData.get("scriptData")}},84829:function(e,t,n){"use strict";n.d(t,{_A:function(){return E},BB:function(){return l},eO:function(){return _},__:function(){return Se},K2:function(){return be},Tp:function(){return De},s3:function(){return Ce},ZP:function(){return He},CT:function(){return me},YL:function(){return ge},A:function(){return Me},ST:function(){return Oe},ui:function(){return Ue},tS:function(){return Ne},bm:function(){return te.bm},a9:function(){return te.a9},nC:function(){return te.nC},Lf:function(){return te.Lf},dl:function(){return te.dl},Cj:function(){return te.Cj},b_:function(){return ve},OO:function(){return te.OO},zA:function(){return Re},cB:function(){return te.cB},gM:function(){return te.gM},cE:function(){return te.cE},Gy:function(){return te.Gy},t_:function(){return ye},fQ:function(){return te.fQ},PM:function(){return te.PM},Rz:function(){return te.Rz},gJ:function(){return te.gJ},of:function(){return te.of},_Q:function(){return te._Q},pP:function(){return te.pP},GK:function(){return te.GK},yf:function(){return te.yf},v_:function(){return te.v_},pC:function(){return te.pC},P5:function(){return te.P5},Ty:function(){return te.Ty},$I:function(){return we},GQ:function(){return w},Mv:function(){return U},s5:function(){return Pe},m1:function(){return F},Q8:function(){return M},yy:function(){return V},K8:function(){return G},BO:function(){return Te},oM:function(){return Y},M:function(){return Z},r8:function(){return j},lS:function(){return K},Pr:function(){return W},hV:function(){return P},bg:function(){return q},Vo:function(){return H},Tm:function(){return A},QM:function(){return k},TZ:function(){return h},Ng:function(){return g},E2:function(){return S},wU:function(){return v},jD:function(){return m},gB:function(){return p},WU:function(){return x},cl:function(){return b},Y4:function(){return B},Te:function(){return R},KC:function(){return y},TP:function(){return I},jf:function(){return Ge},eB:function(){return C},fG:function(){return ke},jx:function(){return D},oG:function(){return L},xO:function(){return N},KP:function(){return O},xM:function(){return xe.oG},SB:function(){return xe.SB},n2:function(){return xe.n2},M7:function(){return xe.M7},hP:function(){return he},s2:function(){return T},Pj:function(){return xe.Pj},HH:function(){return Ve},DE:function(){return Le},pj:function(){return Ie},Nk:function(){return Ae}});var r=n(14890),i=n(35369),o=n(36062),a=n(82023),s=n(56228),u=n(26720),c=(0,r.UY)({temporary_scene_stage:u.Qk,scene_group_id:u.j$,insert_ids:u.c,add_scene_from_media_params:u.Bw,media_preview_data:u.y9});let d,l,_,E;!function(e){e.SET_STORYBOARD_LOADING="SET_STORYBOARD_LOADING",e.SWITCH_EDITOR_TAB="SWITCH_EDITOR_TAB",e.SET_SELECTED_TEMPLATE_ID="SET_SELECTED_TEMPLATE_ID",e.SET_SELECTED_SAVED_TEMPLATE_ID="SET_SELECTED_SAVED_TEMPLATE_ID",e.SET_SELECTED_FORMAT="SET_SELECTED_FORMAT",e.SET_STAGE="SET_STAGE",e.SET_VIDEO_ID="SET_VIDEO_ID",e.SET_VIDEO_CREATION_SOURCE="SET_VIDEO_CREATION_SOURCE",e.SET_PARENT_VIDEO_LANGUAGE="SET_PARENT_VIDEO_LANGUAGE",e.SET_VIDEO_NAME="SET_VIDEO_NAME",e.SET_VIDEO_LANGUAGE="SET_VIDEO_LANGUAGE",e.SET_VIDEO_PROJECT="SET_VIDEO_PROJECT",e.SET_HAS_ARTICLE="SET_HAS_ARTICLE",e.SET_VIDEO_APPROVAL_STATUS="SET_VIDEO_APPROVAL_STATUS",e.MARK_SLIDE_AS_LOADING="MARK_SLIDE_AS_LOADING",e.MARK_SLIDE_AS_FINISHED_LOADING="MARK_SLIDE_AS_FINISHED_LOADING",e.SET_RENDER_TARGET="SET_RENDER_TARGET",e.SET_USER_EDITED_TEXT="SET_USER_EDITED_TEXT",e.SET_ACTIVE_SCENE_INFO="SET_ACTIVE_SCENE_INFO",e.SET_ACTIVE_SCENE_INFO_ON_SCROLL="SET_ACTIVE_SCENE_INFO_ON_SCROLL",e.SET_ACTIVE_SCENE_SCROLL_EVENT_STATUS="SET_ACTIVE_SCENE_SCROLL_EVENT_STATUS",e.SET_PROJECTS_FOR_USER="SET_PROJECTS_FOR_USER",e.SET_IS_STORYBOARD_GENERATING="SET_IS_STORYBOARD_GENERATING",e.SET_VIDEO_DATA_HASH="SET_VIDEO_DATA_HASH",e.SET_SHARE_PAGE_URL="SET_SHARE_PAGE_URL",e.SET_VIDEO_VISIBILITY="SET_VIDEO_VISIBILITY",e.SET_VIDEO_OWNER_ID="SET_VIDEO_OWNER_ID",e.SET_VIDEO_ASSIGNEE="SET_VIDEO_ASSIGNEE",e.SET_CURRENT_SAVED_TEMPLATE="SET_CURRENT_SAVED_TEMPLATE",e.SET_CREATOR_MODE="SET_CREATOR_MODE",e.SET_CURRENT_SAVED_TEMPLATE_NAME="SET_CURRENT_SAVED_TEMPLATE_NAME",e.SET_CURRENT_DOC_TO_SCRIPT_PAGE="SET_CURRENT_DOC_TO_SCRIPT_PAGE",e.SET_DOC_TO_SCRIPT_DATA="SET_DOC_TO_SCRIPT_DATA",e.SET_IS_FETCHING_AI_SCRIPT="SET_IS_FETCHING_AI_SCRIPT"}(d||(d={})),function(e){e.STORY="story",e.MEDIA="media",e.MUSIC="music",e.STYLE="style",e.FORMAT="format",e.ICONS="icons",e.VOICEOVER="voiceover"}(l||(l={})),function(e){e.INIT="init",e.ONBOARDING_SURVEY="welcome",e.LOADING_EDIT_VIDEO="loading-edit",e.CREATOR="creator",e.NEW_CREATE_VIDEO_FLOW_PAGE="new-create-video-flow-page"}(_||(_={})),function(e){e.INITIAL_SCRIPT="initial",e.SUMMARIZED_SCRIPT="summarized"}(E||(E={}));var f=n(29829);const p=(0,f.PH)(d.SET_STORYBOARD_LOADING),T=(0,f.PH)(d.SWITCH_EDITOR_TAB),h=(0,f.PH)(d.SET_SELECTED_FORMAT),S=(0,f.PH)(d.SET_SELECTED_TEMPLATE_ID),g=(0,f.PH)(d.SET_SELECTED_SAVED_TEMPLATE_ID),m=(0,f.PH)(d.SET_STAGE),I=(0,f.PH)(d.SET_VIDEO_ID),R=(0,f.PH)(d.SET_VIDEO_CREATION_SOURCE),A=(0,f.PH)(d.SET_PARENT_VIDEO_LANGUAGE),y=(0,f.PH)(d.SET_VIDEO_DATA_HASH),v=(0,f.PH)(d.SET_SHARE_PAGE_URL),O=(0,f.PH)(d.SET_VIDEO_VISIBILITY),D=(0,f.PH)(d.SET_VIDEO_NAME),C=(0,f.PH)(d.SET_VIDEO_LANGUAGE),N=(0,f.PH)(d.SET_VIDEO_PROJECT),L=(0,f.PH)(d.SET_VIDEO_OWNER_ID),P=(0,f.PH)(d.SET_HAS_ARTICLE),b=(0,f.PH)(d.SET_VIDEO_APPROVAL_STATUS),U=(0,f.PH)(d.MARK_SLIDE_AS_LOADING),w=(0,f.PH)(d.MARK_SLIDE_AS_FINISHED_LOADING),M=(0,f.PH)(d.SET_ACTIVE_SCENE_INFO),V=(0,f.PH)(d.SET_ACTIVE_SCENE_INFO_ON_SCROLL),G=(0,f.PH)(d.SET_ACTIVE_SCENE_SCROLL_EVENT_STATUS),k=(0,f.PH)(d.SET_RENDER_TARGET),x=(0,f.PH)(d.SET_USER_EDITED_TEXT),F=(0,f.PH)(d.SET_PROJECTS_FOR_USER),H=(0,f.PH)(d.SET_IS_STORYBOARD_GENERATING),B=(0,f.PH)(d.SET_VIDEO_ASSIGNEE),Z=(0,f.PH)(d.SET_CURRENT_SAVED_TEMPLATE),j=(0,f.PH)(d.SET_CURRENT_SAVED_TEMPLATE_NAME),Y=(0,f.PH)(d.SET_CREATOR_MODE),W=(0,f.PH)(d.SET_CURRENT_DOC_TO_SCRIPT_PAGE),K=(0,f.PH)(d.SET_DOC_TO_SCRIPT_DATA),q=(0,f.PH)(d.SET_IS_FETCHING_AI_SCRIPT);var X=n(21090),J=n(77551),z=n(47176),Q=n(59163),ee=n(35276),te=n(94561),ne=n(74635),re=n(17479),ie=n(15442),oe=n(59047),ae=n(97303),se=n(48970),ue=n(38990),ce=n(78089),de=n(31309),le=n(29720),_e=n(94743),Ee=n(83272),fe=n(51225);const pe={success:void 0,error:void 0};function Te(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(r,i)=>{(0,te.T3)(i())||(J.Z.scrollToSlide(e,n),r(M({sceneId:e,sceneGroupId:t})))}}function he(e){return(t,n)=>{t((0,Ee.Zb)({currentTab:(0,te.Lf)(n())})),t(T({nextTab:e}))}}function Se(){return e=>{e(X.zF.clearHistory())}}function ge(){return(e,t)=>{const n=(0,te.a9)(t()),r=n.get("scrollEventStatus"),i=n.get("sceneId");let o=!1;try{o=!r&&i&&J.Z.checkIfActiveSceneIsVisibleInViewport(i,n.get("subsceneIndex"))&&!(0,te.T3)(t())}catch(e){e.message===J.Z.COULD_NOT_FIND_SUBSLIDE&&(o=!1)}if(o)e(G({scrollEventStatus:!1}));else{const{center_slide_id:n,center_sub_scene_index:r,center_slide_group_id:i}=J.Z.calculateCentermostSlideInfo();n&&!(0,te.T3)(t())&&e(V({sceneId:n,sceneGroupId:i,subsceneIndex:r,scrollEventStatus:!0}))}}}function me(e,t,n){return(r,i)=>{const o=(0,te.a9)(i()).get("sceneId");e===o&&r(M(t?{sceneId:t,sceneGroupId:n,subsceneIndex:0,scrollEventStatus:!0}:{sceneId:null,sceneGroupId:null,subsceneIndex:0,scrollEventStatus:!1}))}}function Ie(e,t){return(n,r)=>{$.ajax({type:"PATCH",url:SERVER.URLS.specific_video(t),data:JSON.stringify({name:e}),dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{n(ke(e.name)),(0,te.pC)(r())&&n(j({savedTemplateName:e.name}))},error:(e,t)=>{z.Z.error("There was an error renaming that video.")}})}}const Re=()=>e=>{$.ajax({type:"GET",url:SERVER.URLS.get_projects_for_user,dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{e(F({projects:i.default.fromJS(t)})),SERVER.USER.role===o.K$.EDITOR&&0===t.length&&(window.onbeforeunload=null,z.Z.error("You need access to a project in order to create a video.","Redirecting to Dashboard..."),window.setTimeout((function(){window.location=SERVER.URLS.dashboard}),1e3))},error:(e,t)=>{z.Z.error("There was an error fetching projects for this user")}})};function Ae(e,t){return $.ajax({type:"PATCH",url:SERVER.URLS.specific_video(t),data:JSON.stringify({visibility:e}),dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function ye(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=JSON.stringify({asset_uuid:e,captions_language:t});return $.ajax({url:SERVER.URLS.talking_head_caption_generation,method:"POST",contentType:"application/json",dataType:"json",data:n,beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function ve(e,t,n,r,i,o){const a=JSON.stringify({template:e,overlay_tag:t,start_time:n,end_time:r,overlays_used:o,overlay_text:i});return $.ajax({url:SERVER.URLS.overlay_clicks,method:"POST",contentType:"application/json",dataType:"json",data:a,beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function Oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.dW.TALKING_HEAD,t=arguments.length>1?arguments[1]:void 0;return $.ajax({url:SERVER.URLS.media_transcript(e,t),method:"GET",contentType:"application/json",dataType:"json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function De(e,t,n){return(r,i)=>{const o=(0,ne.xt)(i(),e).toJS();return(0,ee.d)((e=>(e.load(t),e.aspectRatio=Q.VideoData.get_aspect_ratio_of_format(n),e.format=n,(0,fe.q3)(e,!1))),o)}}function Ce(e,t){return(n,r)=>{const i=(0,ne.xt)(r(),e).toJS(),o=(0,ne.Dw)(r(),e);return(0,ee.d)((e=>(e.aspectRatio=Q.VideoData.get_aspect_ratio_of_format(t),e.format=t,e.addScene({sceneDesignId:o}),(0,fe.q3)(e,!1))),i)}}function Ne(e){let{videoId:t}=e;return e=>new Promise(((n,r)=>{$.ajax({url:SERVER.URLS.video_approval_status(t),method:"GET",contentType:"application/json",dataType:"json",data:{videoId:t},beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{const{status:r=null,assignee:i=null}=t;e(b({status:r})),e(B({assignee:i})),n({status:r,assignee:i})},error:(e,t,n)=>{var i;r(new Error(`Something went wrong retrieving approval status. Status: ${t}. Error: ${n}. Response: ${null==e||null===(i=e.responseJSON)||void 0===i?void 0:i.error}`))}})}))}function Le(e){let{videoId:t,status:n,assignee:r,notifyAssignee:i}=e;return(e,o)=>new Promise(((e,o)=>{$.ajax({url:SERVER.URLS.video_approval_status(t),method:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify({status:n,assignee:r,notify_assignee:i}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{const{status:n=null,assignee:r=null}=t;e({status:n,assignee:r})},error:(e,t,n)=>{var r;o(new Error(`Something went wrong setting approval status. Status: ${t}. Error: ${n}. Response: ${null==e||null===(r=e.responseJSON)||void 0===r?void 0:r.error}`))}})}))}function Pe(e){return(t,n,r)=>{const i=e.videoId,o=e.videoData?e.videoData:(0,fe.q3)(r,!1),a=e.isRender,s=e.successCallback,u=e.errorCallback,c=e.isSavedTemplate,d=(0,ie.du)(n()),l=(0,oe._P)(n()),_=n().analytics.tab_durations,E=(0,ue.Z)(n()),f=(0,ce.l)(n()),p=r.template.id,T=(0,ce.d)(n()),h=!!(0,de.IZ)(n()),S=c?(0,te.gM)(n()):(0,te.Vs)(n()),g=(0,le.a_)(n()),m={video:o,render:a,tab_durations:_,edited_story:(0,se.U)((0,ae.hZ)(n())),ai_voiceover:E,video_data_hash:S,template_id:p,saved_template_id:f};if(a){const e=_e.Z.getPublishOption(r.format),t=_e.Z.toRenderTarget(e);m.render_target=t}m.user_overrides=d,m.user_uploads=l,m.brand_kit_id=T,m.video_updated_by_user=h,m.transcripts=g,$.ajax({url:SERVER.URLS.specific_video(i),type:"PUT",data:JSON.stringify(m),dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{s&&s(e)},error:(e,t,n)=>{u&&u(e,t,n)}})}}function be(){let{success:e,error:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return async(r,i,o)=>{const a={};a.video_data=(0,fe.q3)(o,!1),a.template_id=o.template.id,n&&(n.videoData&&(a.video_data=n.videoData),n.savedTemplateName&&(a.name=n.savedTemplateName),n.templateId&&(a.template_id=n.templateId)),await $.ajax({url:SERVER.URLS.saved_templates,method:"POST",data:JSON.stringify(a),dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{e&&e(t)},error:(e,n,r)=>{t&&t(e,n,r)}})}}function Ue(e){return t=>new Promise(((n,r)=>{$.ajax({url:SERVER.URLS.saved_template(e),method:"GET",contentType:"application/json",success:e=>{const r=i.default.fromJS(e);t(Z({savedTemplate:r})),n()},error:(e,t,n)=>{var i;r(Error(`Error getting the saved template. Status: ${t}. Error: ${n}. Response: ${null==e||null===(i=e.responseJSON)||void 0===i?void 0:i.error}`))}})}))}function we(e){let{videoIds:t=null,withPrefix:n=!1,targetProjectId:r=null,beforeCallback:i=null,useDefaultName:o=!1}=e;const a={video_ids:t,with_prefix:n,use_default_name:o,target_project_id:void 0};return r&&(a.target_project_id=r),$.ajax({type:"post",url:SERVER.URLS.duplicate_videos,dataType:"json",contentType:"application/json",data:JSON.stringify(a),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN),i&&"function"==typeof i&&i()}})}function Me(e,t){return async(n,r)=>{const o=(0,re.yS)(r(),e),a=await we({videoIds:[o],targetProjectId:t,useDefaultName:!0});return i.default.fromJS(a[0])}}function Ve(e,t,n,r){return(i,o)=>new Promise(((i,o)=>{$.ajax({type:"PATCH",url:SERVER.URLS.specific_video(e),data:JSON.stringify({video_data:t,saved_template_id:n,template_id:r}),dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{i()},error:(e,t,n)=>{o(n)}})}))}function Ge(e){return t=>{"string"==typeof e&&(e=parseFloat(e)),analytics&&analytics.setVideoIdContext&&analytics.setVideoIdContext(e),t(I({videoId:e}))}}function ke(e){return t=>{document.title=`${e} | Lumen5`,t(D({videoName:e}))}}var xe=n(84991);const Fe=(0,r.UY)({editor_tab:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.STORY,t=arguments.length>1?arguments[1]:void 0;return T.match(t)?t.payload.nextTab:e},selected_format:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return h.match(t)?t.payload.format:e},selected_saved_template_id:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return g.match(t)?t.payload.savedTemplateId:e},selected_template_id:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return S.match(t)?t.payload.templateId:e},stage:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.INIT,t=arguments.length>1?arguments[1]:void 0;return m.match(t)?t.payload.stage:e},video_language:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return C.match(t)?t.payload.video_language:e},has_article:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return P.match(t)?t.payload.hasArticle??!0:e},video_id:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return I.match(t)?t.payload.videoId:e},videoDataHash:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return y.match(t)?t.payload.videoDataHash:e},sharePageUrl:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return v.match(t)?t.payload.sharePageUrl:e},videoVisibility:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.bX.UNLISTED,t=arguments.length>1?arguments[1]:void 0;return O.match(t)?t.payload.videoVisibility:e},videoName:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return D.match(t)?t.payload.videoName:e},video_project:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return N.match(t)?t.payload.projectId:e},video_owner:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return L.match(t)?t.payload.videoOwnerId:e},loadingScenes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments.length>1?arguments[1]:void 0;return U.match(t)?e.set(t.payload.sceneId,{loadingMsg:t.payload.loadingMsg}):w.match(t)?e.delete(t.payload.sceneId):e},render_target:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Ou.DOWNLOAD,t=arguments.length>1?arguments[1]:void 0;return k.match(t)?t.payload.render_target:e},user_edited_text:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return x.match(t)?t.payload.user_edited_text:e},activeSceneInfo:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map({sceneId:null,sceneGroupId:null,subsceneIndex:null,scrollEventStatus:!1}),t=arguments.length>1?arguments[1]:void 0;return M.match(t)||V.match(t)?e.merge({sceneId:t.payload.sceneId,subsceneIndex:t.payload.subsceneIndex,scrollEventStatus:t.payload.scrollEventStatus,sceneGroupId:t.payload.sceneGroupId}):G.match(t)?e.set("scrollEventStatus",t.payload.scrollEventStatus):s.M6.match(t)?e.merge({sceneId:t.payload.sceneId,subsceneIndex:0,scrollEventStatus:!1,sceneGroupId:t.payload.sceneGroupId}):t.type===a.Sf.TRANSCRIPT_TAB_VISIBLE&&t.visible?e.merge({sceneId:t.sceneId,subsceneIndex:0,scrollEventStatus:!1,sceneGroupId:t.sceneGroupId}):e},accessibleProjects:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return F.match(t)?t.payload.projects:e},isStoryboardLoading:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return p.match(t)?t.payload.isLoading:e},isStoryboardGenerating:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return H.match(t)?t.payload.isGenerating:e},videoApprovalStatus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return b.match(t)?t.payload.status:e},videoAssignee:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return B.match(t)?t.payload.assignee:e},videoCreationSource:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return R.match(t)?t.payload.creationSource:e},parentVideoLanguage:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return A.match(t)?t.payload.language:e},currentSavedTemplate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Z.match(t)?t.payload.savedTemplate:j.match(t)?e.set("name",t.payload.savedTemplateName):e},creatorMode:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.pc.VIDEO_EDITOR,t=arguments.length>1?arguments[1]:void 0;return Y.match(t)?t.payload.creatorMode:e},temporary_scene:c,docToScriptPage:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return W.match(t)?t.payload.page:e},docToScriptData:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map({url:"",originalEditorState:null,scriptData:null}),t=arguments.length>1?arguments[1]:void 0;return K.match(t)?e.merge(i.default.Map(t.payload)):e},isFetchingAIScript:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return q.match(t)?t.payload:e}});var He=Fe},84991:function(e,t,n){"use strict";n.d(t,{M7:function(){return s},Pj:function(){return i},SB:function(){return a},n2:function(){return u},oG:function(){return o}});var r=n(29829);const i=(0,r.PH)("TRANSITION_TEMPORARY_SCENE_STAGE"),o=(0,r.PH)("STORE_TEMPORARY_SCENE_GROUP_ID"),a=(0,r.PH)("STORE_TEMPORARY_SCENE_INSERTS"),s=(0,r.PH)("STORE_TEMPORARY_SCENE_MODAL_PARAMS"),u=(0,r.PH)("STORE_TEMPORARY_SCENE_MEDIA")},26720:function(e,t,n){"use strict";n.d(t,{Bw:function(){return c},Lp:function(){return i},Qk:function(){return o},c:function(){return u},j$:function(){return a},y9:function(){return l}});var r=n(84991);let i;function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.OMITTED,t=arguments.length>1?arguments[1]:void 0;if(r.Pj.match(t)){const{stage:e}=t.payload;return e}return e}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(r.oG.match(t)){const{sceneGroupId:e}=t.payload;return e}return e}!function(e){e.REQUIRED="REQUIRED",e.SHOWING_USER_MEDIA_MODAL="SHOWING_USER_MEDIA_MODAL",e.PREVIEW_SETUP="PREVIEW_SETUP",e.PREVIEWING="PREVIEWING",e.PREVIEW_CLEARED="PREVIEW_CLEARED",e.FINISHED="FINISHED",e.OMITTED="OMITTED"}(i||(i={}));const s={lowerThirdInsertId:null,calloutInsertId:null,cutawayInsertId:null};function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;if(r.SB.match(t)){const{lowerThirdInsertId:e,calloutInsertId:n,cutawayInsertId:r}=t.payload;return{lowerThirdInsertId:e,calloutInsertId:n,cutawayInsertId:r}}return e}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return r.M7.match(t)?t.payload:e}const d={preview_url:"",poster_url:""};function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;if(r.n2.match(t)){const{preview_url:e,poster_url:n,width:r,height:i}=t.payload;return{preview_url:e,poster_url:n,width:r,height:i}}return e}},28254:function(e,t,n){"use strict";n.d(t,{Ae:function(){return l},Cl:function(){return u},NQ:function(){return i},Nl:function(){return c},Zt:function(){return o},c:function(){return a},hF:function(){return s},xs:function(){return d}});var r=n(26720);function i(e){var t;return null===(t=e.app.temporary_scene)||void 0===t?void 0:t.temporary_scene_stage}function o(e){return i(e)===r.Lp.REQUIRED}function a(e){var t;return null===(t=e.app.temporary_scene)||void 0===t?void 0:t.scene_group_id}function s(e){var t,n;return null===(t=e.app.temporary_scene)||void 0===t||null===(n=t.insert_ids)||void 0===n?void 0:n.lowerThirdInsertId}function u(e){var t,n;return null===(t=e.app.temporary_scene)||void 0===t||null===(n=t.insert_ids)||void 0===n?void 0:n.calloutInsertId}function c(e){var t,n;return null===(t=e.app.temporary_scene)||void 0===t||null===(n=t.insert_ids)||void 0===n?void 0:n.cutawayInsertId}function d(e){var t;return null===(t=e.app.temporary_scene)||void 0===t?void 0:t.add_scene_from_media_params}function l(e){var t;return null===(t=e.app.temporary_scene)||void 0===t?void 0:t.media_preview_data}},43328:function(e,t,n){"use strict";n.d(t,{R0:function(){return L},cl:function(){return D},Oo:function(){return C},Ar:function(){return N},w1:function(){return O}});const r="media_search_v2",i="audio_search_v1",o="recent_search_v1",a="favorite_search_v1",s="uploads_search_v1",u="media_recommendations_v1",c="audio_recommendations_v1",d="recent_recommendations_v1",l="favorite_recommendations_v1",_="uploads_recommendations_v1",E="media",f="recent",p="favorite",T="uploads",h="media_recommendations",S="recent_recommendations",g="favorite_recommendations",m="uploads_recommendations";var I=n(9514),R=n(84829),A=n(86130);function y(e){return t=>{$.ajax({url:SERVER.URLS.click_logs_click,method:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(e),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}}function v(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i="C",o={video_id:e,action:i,result:t,language:n},{log_name:a=null}=r;return null!==a&&(o.log_name=a),y(o)}function O(e,t,n,A,y,v,O,D){return(C,N)=>{let L=null,P=null;if(""===t&&y===I.Pf.RECOMMENDED_VISUALS?(L=u,P=h):""===t&&y===I.Pf.CREATIVE_COMMONS_AUDIO?(L=c,P="audio_recommendations"):""===t&&y===I.Pf.RECENT_VISUALS?(L=d,P=S):""===t&&y===I.Pf.FAVORITE_VISUALS?(L=l,P=g):""===t&&y===I.Pf.UPLOADED_VISUALS?(L=_,P=m):y===I.Pf.RECOMMENDED_VISUALS?(L=r,P=E):y===I.Pf.CREATIVE_COMMONS_AUDIO?(L=i,P="audio"):y===I.Pf.RECENT_VISUALS?(L=o,P=f):y===I.Pf.FAVORITE_VISUALS?(L=a,P=p):y===I.Pf.UPLOADED_VISUALS&&(L=s,P=T),L){const r=N(),i=(0,R.gJ)(r),o={log_name:L,filter_state:{active:O}};!0===v&&(o.results_shape=[-1,1]);const a=(0,R.of)(r);""===D&&(D=t);let{source:s="recommended"}=e;"template"===(0,I.vV)(r)&&(s=`${s}-template`);const u=(0,I.WN)(r,y);if(C(""===t?function(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};const s={video_id:e,query:t,strategy:n,page:r,results:i,language:o},{log_name:u=null,results_shape:c=null,filter_state:d=null}=a;return null!==u&&(s.log_name=u),null!==c&&(s.results_shape=c),null!==d&&(s.filter=d),e=>{$.ajax({url:SERVER.URLS.click_logs_recommendation,method:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(s),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}}(i,u,s,A,e.results.map((e=>({type:!0===v?"audio":e.type,uuid:!0===v?e.uuid:e[e.type].uuid}))),a,o):function(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};const u={video_id:e,query:t,corrected_query:n,processed_query:r,page:i,results:o,language:a},{log_name:c=null,results_shape:d=null,filter_state:l=null}=s;return null!==c&&(u.log_name=c),null!==d&&(u.results_shape=d),null!==l&&(u.filter=l),e=>{$.ajax({url:SERVER.URLS.click_logs_query,method:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(u),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}}(i,t,D,n,A,e.results.map((e=>({type:!0===v?"audio":e.type,uuid:!0===v?e.uuid:e[e.type].uuid}))),a,o)),""!==t&&null!=P&&1===A){const e=t.replace(/&/g,"and");analytics.trackSearch(`/${P}/search?q=${encodeURIComponent(e)}`)}}""!==t&&0===e.results.length&&1===A&&analytics.track("Media Search: No Results Found For Search",{search_term:t,source:y})}}function D(e){return(t,n)=>{const r=(0,I.B8)(n());if(r===I.Pf.CREATIVE_COMMONS_AUDIO){let o=i;""===(0,I.CF)(n(),r)&&(o=c),t(v((0,R.gJ)(n()),{type:"audio",uuid:e.get("uuid")},(0,R.of)(n()),{log_name:o}))}}}function C(e,t){return(n,i)=>{const c=e.get("type"),y=e.getIn([c,"uuid"]),O=(0,I.B8)(i()),D=(0,I.CF)(i(),O),C=A.Z.badge_required_for_source(e.getIn([c,"source"]));if(C===A.l.UPGRADE_FOR_MARKETPLACE||C===A.l.UPGRADE_FOR_UNLIMITED)return;const N={type:c,uuid:y};let L=null,P=null;if(""===D&&O===I.Pf.RECOMMENDED_VISUALS?(L=u,P=h):""===D&&O===I.Pf.RECENT_VISUALS?(L=d,P=S):""===D&&O===I.Pf.FAVORITE_VISUALS?(L=l,P=g):""===D&&O===I.Pf.UPLOADED_VISUALS?(L=_,P=m):O===I.Pf.RECOMMENDED_VISUALS?(L=r,P=E):O===I.Pf.RECENT_VISUALS?(L=o,P=f):O===I.Pf.FAVORITE_VISUALS?(L=a,P=p):O===I.Pf.UPLOADED_VISUALS&&(L=s,P=T),null!==L&&(n(v((0,R.gJ)(i()),N,(0,R.of)(i()),{log_name:L})),null!==P)){""!==D&&analytics.trackSearchAction(`/${P}/click/?id=${N.uuid}`);const e=t+1;analytics.trackSearchClick(P,e)}}}function N(e,t){return(n,i)=>{const c=A.Z.badge_required_for_source(e.getIn([e.get("type"),"source"]));if(c===A.l.UPGRADE_FOR_MARKETPLACE||c===A.l.UPGRADE_FOR_UNLIMITED)return;const v=(0,I.B8)(i()),O=(0,I.CF)(i(),v),D={type:e.get("type"),uuid:e.getIn([e.get("type"),"uuid"])};let C=null,N=null;if(""===O&&v===I.Pf.RECOMMENDED_VISUALS?(C=u,N=h):""===O&&v===I.Pf.RECENT_VISUALS?(C=d,N=S):""===O&&v===I.Pf.FAVORITE_VISUALS?(C=l,N=g):""===O&&v===I.Pf.UPLOADED_VISUALS?(C=_,N=m):v===I.Pf.RECOMMENDED_VISUALS?(C=r,N=E):v===I.Pf.RECENT_VISUALS?(C=o,N=f):v===I.Pf.FAVORITE_VISUALS?(C=a,N=p):v===I.Pf.UPLOADED_VISUALS&&(C=s,N=T),null!==C&&(n(function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i={video_id:e,action:"D",result:t,language:n},{log_name:o=null}=r;return null!==o&&(i.log_name=o),y(i)}((0,R.gJ)(i()),D,(0,R.of)(i()),{log_name:C})),null!==N)){""!==O&&analytics.trackSearchAction(`/${N}/drag/?id=${D.uuid}`);const e=parseInt($(t).attr("data-dragula-media-index"));if(!Number.isNaN(e)&&e>-1){const t=e+1;analytics.trackSearchDrag(N,t),t<=10&&analytics.trackSearchDragFirstPage(N,t)}}}}function L(e,t){return(n,i)=>{const c=A.Z.badge_required_for_source(e.getIn([e.get("type"),"source"]));if(c===A.l.UPGRADE_FOR_MARKETPLACE||c===A.l.UPGRADE_FOR_UNLIMITED)return;const v=(0,I.B8)(i()),O=(0,I.CF)(i(),v),D={type:e.get("type"),uuid:e.getIn([e.get("type"),"uuid"])};let C=null,N=null;if(""===O&&v===I.Pf.RECOMMENDED_VISUALS?(C=u,N=h):""===O&&v===I.Pf.RECENT_VISUALS?(C=d,N=S):""===O&&v===I.Pf.FAVORITE_VISUALS?(C=l,N=g):""===O&&v===I.Pf.UPLOADED_VISUALS?(C=_,N=m):v===I.Pf.RECOMMENDED_VISUALS?(C=r,N=E):v===I.Pf.RECENT_VISUALS?(C=o,N=f):v===I.Pf.FAVORITE_VISUALS?(C=a,N=p):v===I.Pf.UPLOADED_VISUALS&&(C=s,N=T),null!==C&&(n(function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i={video_id:e,action:"A",result:t,language:n},{log_name:o=null}=r;return null!==o&&(i.log_name=o),y(i)}((0,R.gJ)(i()),D,(0,R.of)(i()),{log_name:C})),null!==N&&(""!==O&&analytics.trackSearchAction(`/${N}/apply/?id=${D.uuid}`),!Number.isNaN(t)&&t>-1))){const e=t+1;analytics.trackSearchApply(N,e),e<=10&&analytics.trackSearchApplyFirstPage(N,e)}}}},11049:function(e,t,n){"use strict";n.d(t,{vj:function(){return o},ZP:function(){return E},lH:function(){return d},P:function(){return c},Ig:function(){return l},Z7:function(){return s},Yf:function(){return u}});var r=n(14890),i=n(35369);let o;!function(e){e.SET_SLIDE_COLOR_SHUFFLE_DATA="SET_SLIDE_COLOR_SHUFFLE_DATA",e.SET_SLIDE_COLOR_SHUFFLE_INDEX="SET_SLIDE_COLOR_SHUFFLE_INDEX"}(o||(o={}));var a=n(29829);const s=(0,a.PH)(o.SET_SLIDE_COLOR_SHUFFLE_DATA),u=(0,a.PH)(o.SET_SLIDE_COLOR_SHUFFLE_INDEX);function c(e,t){var n;return null===(n=e.undoable)||void 0===n?void 0:n.present.color_shuffle.color_shuffle_index.get(t,0)}function d(e,t){var n;return null===(n=e.undoable)||void 0===n?void 0:n.present.color_shuffle.color_shuffle_data.get(t,null)}function l(e,t){const n=d(e,t);return n&&n.colorShuffles&&n.colorShuffles.length>1}const _=(0,r.UY)({color_shuffle_data:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments.length>1?arguments[1]:void 0;return s.match(t)?e.set(t.payload.sceneId,t.payload.colorShuffleInfo):e},color_shuffle_index:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments.length>1?arguments[1]:void 0;return u.match(t)?e.set(t.payload.sceneId,t.payload.colorShuffleIndex):e}});var E=_},38990:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7973);function i(e){try{return function(e){return e.undoable.present.editor_settings}(e).get("ai_voiceover")}catch(e){return r.N7.AI_VOICEOVER}}},7973:function(e,t,n){"use strict";n.d(t,{N7:function(){return c},m:function(){return r},ZP:function(){return d},ZI:function(){return s.Z},IN:function(){return a},uq:function(){return o}});const r={TOGGLE_AI_VOICEOVER:"TOGGLE_AI_VOICEOVER",SET_AI_VOICEOVER:"SET_AI_VOICEOVER"};var i=n(43187);function o(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.Z)();return{type:r.TOGGLE_AI_VOICEOVER,systemTriggered:e,parentActionGroup:t}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)();return{type:r.SET_AI_VOICEOVER,aiVoiceoverStatus:e,systemTriggered:t,parentActionGroup:n}}var s=n(38990),u=n(35369);const c={AI_VOICEOVER:!1};var d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.default.Map({ai_voiceover:c.AI_VOICEOVER}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.TOGGLE_AI_VOICEOVER:return e.set("ai_voiceover",!e.get("ai_voiceover"));case r.SET_AI_VOICEOVER:return e.set("ai_voiceover",t.aiVoiceoverStatus);default:return e}}},78192:function(e,t,n){"use strict";n.d(t,{r9:function(){return i},ZP:function(){return p},Ox:function(){return o},OW:function(){return a.OW},tk:function(){return d}});var r=n(14890);const i={NEW_PREVIEW_READY:"NEW_PREVIEW_READY",DELETE_PREVIEW:"DELETE_PREVIEW",STORE_ASSET_BOUNDS:"STORE_ASSET_BOUNDS"};function o(e,t){return{type:i.DELETE_PREVIEW,sceneId:e,subsceneIndex:t}}var a=n(78841),s=n(28216),u=n(59163),c=n(37485);function d(e,t,n,r){return o=>{let a=e.getSceneById(t).getChildren({deep:!0});a=a.filter((e=>e.classType===u.VideoData.GROUP_ASSET_TYPE||e.isEditable)),a=a.filter((e=>null===e.subscene||e.subscene.index===n)),(0,s.dC)((()=>{a.forEach((r=>{o(function(e,t,n,r){return{type:i.STORE_ASSET_BOUNDS,sceneId:e,subsceneIndex:t,assetId:n,bounds:r}}(t,n,r.id,(0,c.my)(r,e)))})),o(function(e,t,n){return{type:i.NEW_PREVIEW_READY,sceneId:e,subsceneIndex:t,imageUrl:n}}(t,n,r))}))}}var l=n(18446),_=n.n(l),E=n(35369);const f=(0,r.UY)({previews:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.default.Map(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.NEW_PREVIEW_READY:if(e.has(t.slideId)){if(e.getIn([t.sceneId,t.subsceneIndex])){const n=e.getIn([t.sceneId,t.subsceneIndex]);"string"==typeof n&&(0,c.sl)(n)}}else e=e.set(t.slideId,E.default.Map());return e=e.setIn([t.sceneId,t.subsceneIndex],t.imageUrl),e;case i.DELETE_PREVIEW:if(e.has(t.sceneId)){const n=e.getIn([t.sceneId,t.subsceneIndex]);"string"==typeof n&&(0,c.sl)(n);const r=e.get(t.sceneId).delete(t.subsceneIndex);let i=E.default.Map(),o=0;return r.forEach((e=>{i=i.set(o,e),o++})),e=e.set(t.sceneId,i),e}return e;default:return e}},asset_bounds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.default.Map(),t=arguments.length>1?arguments[1]:void 0;if(t.type===i.STORE_ASSET_BOUNDS){const n=`${t.sceneId}-${t.subsceneIndex}-${t.assetId}`;return e.has(n)&&_()(e.get(n),t.bounds)||(e=e.set(n,t.bounds)),e}return e}});var p=f},78841:function(e,t,n){"use strict";n.d(t,{OW:function(){return a},lx:function(){return o}});var r=n(35369);function i(e){return e.luminary}function o(e,t){return i(e).previews.get(t,r.default.Map())}function a(e,t,n,r){const o=`${t}-${n}-${r}`;let a=i(e).asset_bounds.get(o,void 0);return void 0===a&&(a={normalizedWidth:0,normalizedHeight:0,normalizedX:0,normalizedY:0}),a}},37485:function(e,t,n){"use strict";n.d(t,{BD:function(){return c},R3:function(){return u},iF:function(){return s},lE:function(){return l},my:function(){return d},sl:function(){return a}});var r=n(59163),i=n(28074);const o=(e,t,n)=>Math.min(Math.max(e,t),n),a=e=>{window.setTimeout((()=>{URL.revokeObjectURL(e)}),2e3)};function s(e){if(!e.autoUpdate)throw new Error("Cannot resize text to fit on scene when scene.autoUpdate is false");e.getChildrenByType(r.VideoData.TEXT_ASSET_TYPE,{deep:!0}).filter((e=>e.isEditable)).forEach((e=>{e.setFontSizeToFitAllText()}))}function u(e){let t="";const n=e.sceneGroup.captions;if((0,i.ujg)(e.sceneGroup)&&n){var o;const r=e.startTime-e.sceneGroup.startTime+((null===(o=e.sceneGroup.mediaAsset)||void 0===o?void 0:o.startTime)||0),i=r+e.duration;let a=0,s=0;for(let e=0;e<n.blocks.length;e++){const o=n.blocks[e];o.endTime>r&&o.startTime<i&&(t||(a=e),s=e,t=t+" "+o.text.trim())}t=t.trim();const u=[".","?","!"];let c=s+1;if(c<n.blocks.length&&(!t||!u.includes(t.charAt(t.length-1)))){const e=n.blocks[c].text.trim();let r=0;for(;r<e.length;){if(u.includes(e.charAt(r))){r+=1;break}r+=1}t=t+" "+e.substring(0,r).trim()}c=a-1;const d=c>=0?n.blocks[c].text.trim():"";if(d&&!u.includes(d.charAt(t.length-1))){const e=n.blocks[c].text.trim();let r=e.length-1;for(;r>=0&&!u.includes(e.charAt(r));)r-=1;t=e.substring(r+1,e.length).trim()+" "+t}}else e.getChildrenByType(r.VideoData.TEXT_ASSET_TYPE,{deep:!0}).filter((e=>e.isEditable)).forEach((e=>{t+=e.text.trim()+" "}));return t.trim()}function c(e){const t=void 0!==e.getOutroSceneGroup(),n=void 0!==e.scenes.find((e=>e.sceneCategory===r.VideoData.CATEGORY_BRAND));return e.scenes.length-1-(t?1:0)-(n?1:0)}function d(e,t){let n,a,s,u;if(e.classType===r.VideoData.TEXT_ASSET_TYPE||e.classType===r.VideoData.GROUP_ASSET_TYPE){const{x:t,y:r,height:i,width:o}=e.getBounds();n=t,a=r,u=i,s=o}else{const{x:t,y:r,height:i,width:o}=e.approximateMaxBounds;n=t,a=r,u=i,s=o}const c=(0,i.z7I)(e),d=null!==c&&c!==e;let l=t.referenceResolution.width,_=t.referenceResolution.height,E=n,f=a;if(d){const e=c.getBounds();l=e.width,_=e.height,E-=e.x,f-=e.y}return E<0&&(s+=E,E=Math.max(0,E)),f<0&&(u+=f,f=Math.max(0,f)),{normalizedWidth:o(s/l,0,1),normalizedHeight:o(u/_,0,1),normalizedX:o(E/l,0,1),normalizedY:o(f/_,0,1)}}function l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?[r.VideoData.CATEGORY_TALKING_HEAD_INSERT,r.VideoData.CATEGORY_TALKING_HEAD,r.VideoData.CATEGORY_VOICEOVER].includes(e):[r.VideoData.CATEGORY_TALKING_HEAD_INSERT,r.VideoData.CATEGORY_VOICEOVER].includes(e)}},9514:function(e,t,n){"use strict";n.d(t,{i1:function(){return a.i1},E1:function(){return a.E1},$3:function(){return a.$3},lT:function(){return a.lT},Ti:function(){return a.Ti},n9:function(){return a.n9},nj:function(){return a.nj},Wf:function(){return a.Wf},ty:function(){return a.ty},iv:function(){return a.iv},N$:function(){return a.N$},Pf:function(){return a.Pf},vZ:function(){return a.vZ},dy:function(){return a.dy},hh:function(){return a.hh},a3:function(){return f.a3},oN:function(){return f.oN},yx:function(){return T.yx},Lu:function(){return f.Lu},vm:function(){return f.vm},Ib:function(){return p.Ib},cj:function(){return f.cj},wO:function(){return T.wO},hf:function(){return f.hf},Ap:function(){return T.Ap},vL:function(){return f.vL},j$:function(){return T.j$},W7:function(){return T.W7},xG:function(){return T.xG},qW:function(){return f.qW},Go:function(){return f.Go},Dr:function(){return T.Dr},DU:function(){return c.DU},tb:function(){return T.tb},ee:function(){return f.ee},aH:function(){return T.aH},uT:function(){return T.uT},a9:function(){return p.a9},id:function(){return p.id},RY:function(){return p.RY},h0:function(){return p.h0},z2:function(){return p.z2},BS:function(){return p.BS},ou:function(){return p.ou},lc:function(){return p.lc},G7:function(){return p.G7},H5:function(){return p.H5},Ll:function(){return p.Ll},D1:function(){return p.D1},LF:function(){return p.LF},zl:function(){return p.zl},Tz:function(){return p.Tz},yT:function(){return p.yT},UF:function(){return p.UF},xe:function(){return p.xe},hn:function(){return p.hn},B8:function(){return p.B8},ps:function(){return p.ps},CF:function(){return p.CF},zW:function(){return p.zW},Kj:function(){return T.Kj},fV:function(){return c.fV},aV:function(){return c.aV},Lm:function(){return p.Lm},Cz:function(){return p.Cz},Z:function(){return p.Z},xI:function(){return p.xI},oo:function(){return c.oo},oG:function(){return p.oG},I9:function(){return p.I9},Nt:function(){return p.Nt},Q$:function(){return p.Q$},YB:function(){return p.YB},PC:function(){return p.PC},jl:function(){return p.jl},f_:function(){return T.hn},dq:function(){return p.dq},dY:function(){return p.dY},J9:function(){return p.J9},M1:function(){return p.M1},ep:function(){return p.ep},wQ:function(){return p.wQ},vV:function(){return p.vV},sM:function(){return p.sM},Ay:function(){return c.Ay},os:function(){return p.os},WN:function(){return p.WN},U:function(){return c.U},HU:function(){return a.HU},BC:function(){return g},RJ:function(){return S},Lb:function(){return f.Lb},Ni:function(){return f.Ni},fQ:function(){return f.fQ},$x:function(){return p.$x},UX:function(){return p.UX},mG:function(){return p.mG},Yi:function(){return f.Yi},kC:function(){return T.kC},iB:function(){return f.iB},YQ:function(){return T.YQ},bO:function(){return f.bO},VY:function(){return f.VY},Bi:function(){return f.Bi},Wh:function(){return T.Wh},p6:function(){return f.p6},Jy:function(){return f.Jy},Eg:function(){return f.Eg},Tv:function(){return f.Tv},Q7:function(){return f.Q7},iT:function(){return f.iT},Ov:function(){return f.Ov},iV:function(){return f.iV},gX:function(){return T.gX},TR:function(){return f.TR},W2:function(){return f.W2},c:function(){return T.c},lQ:function(){return f.lQ},Qb:function(){return f.Qb},Mw:function(){return f.Mw},nP:function(){return m},rk:function(){return f.rk},Cr:function(){return f.Cr}});var r=n(14890),i=n(35369),o=n(45970),a=n(41964),s=n(84829),u=n(61948),c=n(72891);function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.CHANGE_MEDIA_SEARCH_TERM?t.search_term:e}const l=i.default.fromJS({[s.BB.MEDIA]:a.Pf.RECOMMENDED_VISUALS,[s.BB.MUSIC]:a.Pf.CREATIVE_COMMONS_AUDIO,[s.BB.ICONS]:a.Pf.RECOMMENDED_ICONS,[s.BB.VOICEOVER]:a.Pf.UPLOADED_VOICEOVERS}),_=i.default.Map({url:null,seekPercent:0,scrubberSeekPercent:0,duration:0,isPlaying:!1}),E=i.default.fromJS({[a.Pf.UPLOADED_VISUALS]:null,[a.Pf.UPLOADED_ICONS]:null});var f=n(81475),p=n(21623),T=n(34802);const h={search_context:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.CHANGE_ACTIVE_SEARCH_CONTEXT?e.set(a.JK[t.new_search_context],t.new_search_context):e},all_favorite_media:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix("user-favourite-media").data,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g3.SET_ALL_FAVORITES:{const n=new o.ZP(e);for(let e=0;e<t.allFavoriteMedia.length;e++)n.pushJSItem(t.allFavoriteMedia[e],"uuid");return n.data}case a.g3.ADD_FAVORITE_MEDIA:{let n=null;return n=new o.ZP(e),n.pushJSItem(t.favoriteMedia,"uuid"),n.data}case a.g3.REMOVE_FAVORITE_MEDIA:{let n=null;return n=new o.ZP(e),n.delete([t.favoriteMedia.uuid]),n.data}default:return e}},playingAudioDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;if(s.s2.match(t))return e.set("isPlaying",!1);switch(t.type){case a.g3.SET_CURRENT_PLAYING_AUDIO_URL:return e.set("url",t.audioUrl);case a.g3.SET_CURRENT_PLAYING_AUDIO_SEEK_PERCENT:return e.set("seekPercent",t.seekPercent);case a.g3.SET_CURRENT_PLAYING_AUDIO_SCRUBBER_SEEK_PERCENT:return e.set("scrubberSeekPercent",t.scrubberSeekPercent);case a.g3.SET_CURRENT_PLAYING_AUDIO_DURATION:return e.set("duration",t.duration);case a.g3.SET_CURRENT_AUDIO_PLAYING_STATUS:return e.set("isPlaying",t.isPlaying);default:return e}},all_uploads_folders:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix(a.zI).data,t=arguments.length>1?arguments[1]:void 0;const n=new o.ZP(e);switch(t.type){case a.g3.STORE_ALL_FOLDERS:return t.folders.forEach((e=>{n.pushItem(e,"id")})),n.data;case a.g3.ADD_NEW_FOLDER:{const e=(0,c.Nn)(t.folder);return n.pushItemToFront(e,"id"),n.data}case a.g3.EDIT_FOLDER_NAME:{const e=t.folder.get("id"),r=n.getById(e).merge(t.folder);return n.updateById(e,{value:r,key:[]}),n.data}case a.g3.DELETE_FOLDER:return n.delete([t.folderId]),n.data;case a.g3.ADD_RECENT_UPLOADED_ASSET_TO_A_FOLDER:{const{folderId:e,mediaAsset:r}=t,i=n.getById(e);let a="";if("image"===r.type?a=r.image.thumbnail_url:"video"===r.type&&(a=r.video.poster_url),i){const e=new o.ZP(i.get("media_results"));t.mediaAsset.current_session_upload=!0,e.pushJSItem(t.mediaAsset);const r=i.get("media_count");n.updateById(t.folderId,{key:["media_results"],value:e.data}),n.updateById(t.folderId,{key:["media_count"],value:r+1}),n.updateById(t.folderId,{key:["thumbnail_url"],value:a})}return n.data}case u.u_.REMOVE_UPLOAD:if(t.activeFolderId){const e=t.asset.get("_id"),r=n.getById(t.activeFolderId).get("media_results"),i=n.getById(t.activeFolderId).get("media_count"),a=new o.ZP(r);a.delete([e]),n.updateById(t.activeFolderId,{key:["media_results"],value:a.data}),n.updateById(t.activeFolderId,{key:["media_count"],value:i-1});const{asset:s}=t;("image"===s.get("type")?s.getIn(["image","thumbnail_url"]):s.getIn(["video","poster_url"]))===n.getById(t.activeFolderId).get("thumbnail_url")&&n.updateById(t.activeFolderId,{key:["thumbnail_url"],value:void 0})}return n.data;case a.g3.MOVE_ASSET_TO_FOLDER:{const e=t.asset.get("_id"),r=parseInt(t.targetFolderId);if(t.sourceFolderId&&t.sourceFolderId!==r){const r=n.getById(t.sourceFolderId).get("media_results"),i=n.getById(t.sourceFolderId).get("media_count"),a=new o.ZP(r);a.delete([e]),n.updateById(t.sourceFolderId,{key:["media_results"],value:a.data}),n.updateById(t.sourceFolderId,{key:["media_count"],value:i-1})}const i=n.getById(r).get("media_results"),a=n.getById(r).get("media_count"),s=new o.ZP(i);return s.pushJSItem(t.asset),n.updateById(r,{key:["media_results"],value:s.data}),n.updateById(r,{key:["media_count"],value:a+1}),n.data}case a.g3.UPDATE_MEDIA_TAGS:{const r=t.folderId,i=n.getById(r);if(!i)return e;const a=new o.ZP(i.get("media_results"));return a.updateById(t.mediaORMId,{key:[t.mediaType,"tags"],value:t.mediaTags}),n.updateById(r,{key:["media_results"],value:a.data}),n.data}case a.g3.SET_SORT:{const r=t.folderId;return n.getById(r)?((0,c.HQ)(n,r),n.updateById(r,{key:["sort"],value:t.sort_method}),n.data):e}case a.g3.TOGGLE_MEDIA_SOURCE_FILTER:{const r=t.folderId,i=n.getById(r);if(!i)return e;(0,c.HQ)(n,r);let o=i.get("sourceFilter");return o=o.set(t.filter_key,t.filter_value),n.updateById(r,{key:["sourceFilter"],value:o}),n.data}case a.g3.SET_SELECTED_MEDIA_TYPE_FILTER:{const r=t.folderId;return n.getById(r)?((0,c.HQ)(n,r),n.updateById(r,{key:["selectedType"],value:t.selected_type}),n.data):e}case a.g3.RESET_FOLDER_SEARCH_STATE:return(0,c.HQ)(n,t.folder_id),n.data;case a.g3.START_MEDIA_SEARCH:{if(!t.folderId)return e;const r=t.folderId;return n.updateById(r,{key:["ajax"],value:t.ajax}),n.data}case a.g3.RECEIVE_MEDIA_RESPONSE:{if(!t.folderId)return e;const r=t.folderId,i=n.getById(r),o=S;let a;for(a in o){const e=i.get(a);n.updateById(r,{key:[a],value:o[a](e,t)})}return n.updateById(r,{key:["ajax"],value:null}),n.data}case a.g3.CHANGE_MEDIA_SEARCH_TERM:{if(!t.folderId)return e;const r=t.folderId,i=d(n.getById(r).get("search_term"),t);return n.updateById(r,{key:["search_term"],value:i}),n.data}case a.g3.UPDATE_FOLDER_THUMBNAIL:{const{srcFolderId:r,srcThumbnailUrl:i,targetFolderId:o,targetThumbnailUrl:a}=t;return r||o?(n.updateById(r,{key:["thumbnail_url"],value:i}),n.updateById(o,{key:["thumbnail_url"],value:a}),n.data):e}default:return f.W2.match(t)?t.payload.folderId?(n.updateById(t.payload.folderId,{key:["frequently_used_tags"],value:t.payload.frequently_used_tags}),n.data):e:f.vL.match(t)&&t.payload.folderId?(n.updateById(t.payload.folderId,{key:["frequently_used_tags"],value:null}),n.data):e}},active_uploads_folder:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;if(t.type===a.g3.SET_ACTIVE_FOLDER){if(!e.has(t.searchContext))throw Error(`You cannot set the active folder for a search context that does not support folders. Got ${t.searchContext}`);return e.set(t.searchContext,t.folderId)}return e},music_volume_override:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.CHANGE_MUSIC_VOLUME_OVERRIDE?t.music_volume_override:e},current_media_query_scene:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.SET_CURRENT_MEDIA_QUERY_SCENE?t.sceneId:e},is_media_query_search_loading:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.SET_IS_MEDIA_QUERY_SEARCH_LOADING?t.isLoading:e},media_query_search_results:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.SET_MEDIA_QUERY_SEARCH_RESULTS?i.default.fromJS(t.searchResults):e},show_media_query_suggestion_error:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.SHOW_MEDIA_QUERY_SUGGESTION_ERROR?t.show:e}},S={media_results:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix(a.Zt).data,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g3.START_MEDIA_SEARCH:return!0!==t.append_results?o.ZP.newFromIdPrefix(a.Zt).data:e;case a.g3.RECEIVE_MEDIA_RESPONSE:{let n=null;n=!0===t.append_results?new o.ZP(e):o.ZP.newFromIdPrefix(a.Zt);const r=t.response.premium_results||[],i={};if(r){const e=Math.min(r.length,2),n=Math.floor(t.response.results.length/e);for(let t=0;t<e;t++){const e=r[t][r[t].type].uuid[0],o=parseInt(`0x${e}`);i[t*n+Math.floor(o*n/15)]=r[t]}}for(let e=0;e<t.response.results.length;e++)i[e]&&n.pushJSItem(i[e]),n.pushJSItem(t.response.results[e]);return 0===t.response.results.length&&i[0]&&n.pushJSItem(i[0]),n.data}case u.u_.REMOVE_UPLOAD:case a.g3.MOVE_ASSET_TO_FOLDER:{const n=new o.ZP(e),r=t.asset.get("type"),i=t.asset.getIn([r,"uuid"]),a=n.query({key:[r,"uuid"],value:i,valuesList:[o.$7]});return 1===a.size?(n.delete(a),n.data):e}case a.g3.UPDATE_MEDIA_TAGS:{const n=new o.ZP(e);return n.updateById(t.mediaORMId,{key:[t.mediaType,"tags"],value:t.mediaTags}),n.data}case a.g3.ADD_MEDIA_TO_UPLOADS:{const n=new o.ZP(e),r=t.mediaAsset;return r?(r.current_session_upload=!0,n.pushJSItemToFront(r),n.data):n.data}case a.g3.DELETE_AUDIO_SUCCESS:{const n=new o.ZP(e),r=n.query({key:["id"],value:t.id,valuesList:[o.$7]});return n.delete(r),n.data}default:return e}},no_access:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;var n;return t.type===a.g3.RECEIVE_MEDIA_RESPONSE?"no_access"===(null===(n=t.response)||void 0===n?void 0:n.error):e},no_results:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g3.START_MEDIA_SEARCH:return!0===t.append_results&&e;case a.g3.RECEIVE_MEDIA_RESPONSE:return 0===t.response.results.length&&0===t.num_existing_results;default:return e}},more_results:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g3.RECEIVE_MEDIA_RESPONSE:return null!==t.response.next;case a.g3.RECEIVE_MEDIA_ERROR:return!1;default:return e}},page:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g3.START_MEDIA_SEARCH:return!1===t.append_results?1:e;case a.g3.RECEIVE_MEDIA_RESPONSE:return t.page+1;default:return e}},last_searched_term:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.START_MEDIA_SEARCH?t.search_term:e},search_term:d,ajax:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g3.START_MEDIA_SEARCH:return t.ajax;case a.g3.RECEIVE_MEDIA_ERROR:case a.g3.RECEIVE_MEDIA_RESPONSE:case a.g3.SET_ACTIVE_FOLDER:return t.folderId?e:null;default:return e}},sourceFilter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g3.SET_FILTER:return t.filter;case a.g3.TOGGLE_MEDIA_SOURCE_FILTER:return e.set(t.filter_key,t.filter_value);default:return e}},selectedType:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.ty.ALL,t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.SET_SELECTED_MEDIA_TYPE_FILTER?t.selected_type:e},filter_by_user_level:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.Ti.filter_by_workspace_level,t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.TOGGLE_FILTER_BY_USER_LEVEL?t.filter_by_user_level:e},sort:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.Rt,t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.SET_SORT?t.sort_method:e},corrected_search_term:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g3.CHANGE_CORRECTED_MEDIA_SEARCH_TERM:return t.search_term;case a.g3.START_MEDIA_SEARCH:return 1===t.page?"":e;default:return e}},corrected_search_term_indices:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments.length>1?arguments[1]:void 0;if(t.type===a.g3.CHANGE_CORRECTED_MEDIA_SEARCH_TERM){const n=i.default.List(t.search_term_indices);return 2===n.size?n:e}return e},suggested_search_term:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g3.CHANGE_SUGGESTED_MEDIA_SEARCH_TERM:return t.query;case a.g3.START_MEDIA_SEARCH:return 1===t.page?"":e;default:return e}},highlighted_suggested_search_term:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.CHANGE_SUGGESTED_MEDIA_SEARCH_TERM?t.highlighted_query:e},related_search_terms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.CHANGE_RELATED_MEDIA_SEARCH_TERMS?i.default.List(t.popular_queries):e},frequently_used_tags:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return f.W2.match(t)?t.payload.frequently_used_tags:f.vL.match(t)?null:e}};for(const e in a.Pf){const t=(0,r.UY)(S);h[a.Pf[e]]=(n,r)=>{var i,o;let s=!0;const u=(null==r?void 0:r.search_context)||(null==r||null===(i=r.payload)||void 0===i?void 0:i.search_context);u!==a.Pf[e]&&(s=!1);const c=!(null==r||!r.folderId)||!(null==r||null===(o=r.payload)||void 0===o||!o.folderId),d=u===a.Pf.UPLOADED_VISUALS,l=u===a.Pf.UPLOADED_ICONS;return c&&(d||l)&&(s=!1),void 0===n&&(s=!0),s?t(n,r):n}}const g=(0,r.UY)(h),m=(0,r.UY)({recommended_search_terms:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.SET_RECOMMENDED_SEARCH_TERMS?t.terms:e},recommended_search_terms_strategy:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"article",t=arguments.length>1?arguments[1]:void 0;return t.type===a.g3.SET_RECOMMENDED_SEARCH_TERMS?t.strategy:e}})},81475:function(e,t,n){"use strict";n.d(t,{Al:function(){return L},Bi:function(){return k},Cr:function(){return g},Eg:function(){return M},Go:function(){return Z},Jy:function(){return V},Lb:function(){return W},Lu:function(){return Y},Mw:function(){return m},Ni:function(){return w},Ov:function(){return v},Q7:function(){return z},Qb:function(){return y},TR:function(){return F},Tv:function(){return E},VY:function(){return C},W2:function(){return T},Yi:function(){return j},a3:function(){return U},bO:function(){return x},cj:function(){return S},ee:function(){return B},fQ:function(){return q},hf:function(){return p},iB:function(){return b},iT:function(){return D},iV:function(){return f},lQ:function(){return O},oN:function(){return H},p6:function(){return G},qW:function(){return J},rk:function(){return X},tS:function(){return P},vL:function(){return h},vm:function(){return K},zY:function(){return N}});var r=n(29829),i=n(41964),o=n(72891),a=n(21623),s=n(43328),u=n(61948),c=n(78133),d=n(43187),l=n(9514),_=n(47176);function E(e,t,n){return{type:i.g3.SET_FILTER,search_context:e,filter:t,folderId:n}}function f(e,t,n,r){return o=>{o(function(e,t,n){return{type:i.g3.SET_SORT,search_context:e,sort_method:t,folderId:n}}(e,t,r)),o(m(e,!1,n,!1,r))}}function p(e,t){return(n,r)=>{const o=(0,l.RY)(r(),e);return n({type:i.g3.CHANGE_MEDIA_SEARCH_TERM,search_context:e,search_term:t,folderId:null==o?void 0:o.get("id")}),Promise.resolve()}}const T=(0,r.PH)(i.g3.STORE_FREQUENTLY_USED_TAGS),h=(0,r.PH)(i.g3.CLEAR_FREQUENTLY_USED_TAGS);function S(e){return(t,n)=>{t({type:i.g3.CHANGE_ACTIVE_SEARCH_CONTEXT,new_search_context:e});const r=n(),o=(0,a.$x)(r,e);t((0,l.aH)(e,o))}}function g(e,t,n,r,o){return{type:i.g3.UPDATE_MEDIA_TAGS,mediaORMId:e,mediaType:t,mediaTags:n,search_context:r,folderId:o}}function m(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return(d,l)=>{const E=l(),f=!0===t?(0,a.zl)(E,e):1,p=(0,a.a9)(E,e);let T=(0,a.CF)(E,e);const h=(0,a.wQ)(E,e),S=(0,a.G7)(E,e),g=(0,a.yT)(E,e),m=(0,a.lc)(E,e)===i.Ti.filter_by_user_level,y=(0,a.ou)(E,e),v=(0,a.XX)(E,e);let O=!0;if(null!==y)return;const D=""===T||0===T.replace(/\s/g,"").length;T=D?"":T;const N=(0,o.fV)(e)===c.Z.audio_asset_type;let L=i.i1[e].search_source;D&&0===h.size&&(L=i.i1[e].no_query_search_source);let P=[];"uploads"===L&&(P=(0,u._P)(E).take(50).toJS());let b=T;f>1&&""!==p&&(b=p,r=!1,O=!1),D&&(r=!1,O=!1);const U={q:b,source:L,page:f,filter:S.join(","),filter_by_user_level:m,video_duration:Math.floor(n/1e3),autocorrect:r,did_you_mean:O,sort:g,uuids:P};s&&(U.folder_id=s);const w=[i.Pf.RECOMMENDED_VISUALS,i.Pf.TENOR_VISUALS];D&&0!==h.size&&w.indexOf(e)>-1&&(U.q=h.take(5).join(" "));const M=$.ajax({url:N?SERVER.URLS.audio:SERVER.URLS.media_search,method:N?"GET":"POST",data:U,beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:n=>{d(I(n,T,p,f,e,h,S,t,v,N,s))},error:(t,n,r)=>{_.Z.error("Something went wrong retrieving search results."),d(R(e,0,0,0,s))}});d(C(null)),d(A(M,T,f,e,h,S,t,s));let V="Media Search: Search Triggered";!0===N&&(V="Media Stage: Audio Search Triggered"),""!==T&&1===f&&analytics.track(V,{term:T,scope:e})}}function I(e,t,n,r,o,a,u,c,d,l,_){return(E,f)=>{let{corrected_query:p,corrected_query_indices:T,did_you_mean_query:h="",did_you_mean_highlighted_query:S="",popular_queries:g=[],processed_query:m=t}=e;null==p&&(p=""),1===r&&(E(function(e,t,n){return{type:i.g3.CHANGE_CORRECTED_MEDIA_SEARCH_TERM,search_context:e,search_term:t,search_term_indices:n}}(o,p,T)),E(function(e,t,n){return{type:i.g3.CHANGE_SUGGESTED_MEDIA_SEARCH_TERM,search_context:e,query:t,highlighted_query:n}}(o,h,S)),E(function(e,t){return{type:i.g3.CHANGE_RELATED_MEDIA_SEARCH_TERMS,search_context:e,popular_queries:t}}(o,g))),E((0,s.w1)(e,t,m,r,o,l,u,n)),E({type:i.g3.RECEIVE_MEDIA_RESPONSE,response:e,search_term:t,page:r,search_context:o,boost_terms:a,filter:u,append_results:c,num_existing_results:d,folderId:_})}}function R(e,t,n,r,o){return{type:i.g3.RECEIVE_MEDIA_ERROR,search_context:e,folderId:o}}function A(e,t,n,r,o,a,s,u){return{type:i.g3.START_MEDIA_SEARCH,ajax:e,search_term:t,page:n,search_context:r,boost_terms:o,filter:a,append_results:s,folderId:u}}function y(e,t,n,r){return o=>(o({type:i.g3.TOGGLE_MEDIA_SOURCE_FILTER,search_context:e,filter_key:t,filter_value:n,folderId:r}),o(m(e,!1,void 0,void 0,r)),Promise.resolve())}function v(e,t,n){return r=>(r({type:i.g3.SET_SELECTED_MEDIA_TYPE_FILTER,search_context:e,selected_type:t,folderId:n}),r((0,l.Ap)(e,n)),r(m(e,!1,void 0,void 0,n)),Promise.resolve())}function O(e,t,n){return r=>{r({type:i.g3.TOGGLE_FILTER_BY_USER_LEVEL,search_context:e,filter_by_user_level:t}),r(m(e,!1,n,void 0))}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"article",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,d.Z)();return{type:i.g3.SET_RECOMMENDED_SEARCH_TERMS,terms:e,strategy:t,systemTriggered:n,parentActionGroup:r}}function C(e){return{type:i.g3.SET_CURRENT_MEDIA_QUERY_SCENE,sceneId:e}}function N(e){return{type:i.g3.SET_IS_MEDIA_QUERY_SEARCH_LOADING,isLoading:e}}function L(e){return{type:i.g3.SET_MEDIA_QUERY_SEARCH_RESULTS,searchResults:e}}function P(e){return{type:i.g3.SHOW_MEDIA_QUERY_SUGGESTION_ERROR,show:e}}function b(e){return{type:i.g3.SET_ALL_FAVORITES,allFavoriteMedia:e}}function U(e){return{type:i.g3.ADD_FAVORITE_MEDIA,favoriteMedia:e}}function w(e){return{type:i.g3.REMOVE_FAVORITE_MEDIA,favoriteMedia:e}}function M(e){return{type:i.g3.SET_CURRENT_PLAYING_AUDIO_URL,audioUrl:e}}function V(e){return{type:i.g3.SET_CURRENT_PLAYING_AUDIO_SEEK_PERCENT,seekPercent:e}}function G(e){return{type:i.g3.SET_CURRENT_PLAYING_AUDIO_SCRUBBER_SEEK_PERCENT,scrubberSeekPercent:e}}function k(e){return{type:i.g3.SET_CURRENT_PLAYING_AUDIO_DURATION,duration:e}}function x(e){return{type:i.g3.SET_CURRENT_AUDIO_PLAYING_STATUS,isPlaying:e}}function F(e){return{type:i.g3.STORE_ALL_FOLDERS,folders:e}}function H(e){return{type:i.g3.ADD_NEW_FOLDER,folder:e}}function B(e){return{type:i.g3.EDIT_FOLDER_NAME,folder:e}}function Z(e){return{type:i.g3.DELETE_FOLDER,folderId:e}}function j(e,t){return{type:i.g3.SET_ACTIVE_FOLDER,folderId:e,searchContext:t}}function Y(e,t){return{type:i.g3.ADD_RECENT_UPLOADED_ASSET_TO_A_FOLDER,folderId:e,mediaAsset:t}}function W(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:i.g3.MOVE_ASSET_TO_FOLDER,targetFolderId:e,asset:t,sourceFolderId:n}}function K(e,t){return{type:i.g3.ADD_MEDIA_TO_UPLOADS,mediaAsset:e,search_context:t}}function q(e){return{type:i.g3.RESET_FOLDER_SEARCH_STATE,folder_id:e}}function X(e){let{srcFolderId:t,srcThumbnailUrl:n,targetFolderId:r,targetThumbnailUrl:o}=e;return{type:i.g3.UPDATE_FOLDER_THUMBNAIL,srcFolderId:t,srcThumbnailUrl:n,targetFolderId:r,targetThumbnailUrl:o}}function J(e){return{type:i.g3.DELETE_AUDIO_SUCCESS,search_context:i.Pf.UPLOADED_AUDIO,id:e}}function z(e){return{type:i.g3.CHANGE_MUSIC_VOLUME_OVERRIDE,music_volume_override:e}}},34802:function(e,t,n){"use strict";n.d(t,{yx:function(){return P},wO:function(){return M},Ap:function(){return w},j$:function(){return G},W7:function(){return C},xG:function(){return k},Dr:function(){return L},tb:function(){return N},xE:function(){return R},aH:function(){return U},uT:function(){return x},Kj:function(){return D},hn:function(){return V},kC:function(){return b},YQ:function(){return A},Wh:function(){return y},gX:function(){return v},c:function(){return O}});var r=n(28216),i=n(35369),o=n(9514),a=n(61948),s=n(47176),u=n(27182),c=n(81475);function d(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function l(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,E(e,t,"get"))}function _(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,E(e,t,"set"),n),n}function E(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}class f extends Error{}var p=new WeakMap,T=new WeakMap,h=new WeakMap,S=new WeakMap,g=new WeakMap,m=new WeakMap;class I{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,p,{writable:!0,value:void 0}),d(this,T,{writable:!0,value:void 0}),d(this,h,{writable:!0,value:void 0}),d(this,S,{writable:!0,value:void 0}),d(this,g,{writable:!0,value:0}),d(this,m,{writable:!0,value:20}),_(this,p,e),_(this,T,t),_(this,h,!1),_(this,S,[])}async walkPages(){let e=l(this,p);for(;!l(this,h);){const t=await fetch(e,l(this,T)),n=await t.json();if(_(this,S,l(this,S).concat(n.results)),n.next?e=n.next:_(this,h,!0),_(this,g,l(this,g)+1),l(this,g)>=l(this,m))throw new f}return i.default.fromJS(l(this,S))}}function R(e){let{audio_favorites:t=!1,icons_favorites:n=!1}=e;return e=>{$.ajax({url:SERVER.URLS.favorites,method:"GET",contentType:"application/json",dataType:"json",data:{audio_favorites:t,icons_favorites:n},beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{e((0,o.iB)(t.results))}})}}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(s,u)=>{e===(0,o.ep)(u())?(0,r.dC)((()=>{s((0,o.p6)(i)),s((0,o.Jy)(t))})):(0,r.dC)((()=>{s((0,o.p6)(i)),s((0,o.Eg)(e)),s((0,o.Jy)(t))})),s((0,o.Bi)(a)),s((0,o.bO)(n))}}function y(e,t){return n=>{const i=parseFloat((e/t*100).toFixed(2));(0,r.dC)((()=>{n((0,o.Bi)(e)),n((0,o.p6)(i))}))}}const v=e=>$.ajax({url:SERVER.URLS.asset_validation,method:"PUT",data:JSON.stringify(e),contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}});function O(e,t,n){return $.ajax({url:SERVER.URLS.uploads_tag_update,dataType:"json",contentType:"application/json",method:"PUT",data:JSON.stringify({asset_id:e,asset_type:t,asset_tags:n}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function D(){return new I(SERVER.URLS.media_folders,{method:"GET"}).walkPages()}function C(e,t){return $.ajax({url:SERVER.URLS.media_folders,dataType:"json",contentType:"application/json",method:"POST",data:JSON.stringify({name:e,creation_source:t}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function N(e,t){return $.ajax({url:SERVER.URLS.media_folders_detail(e),dataType:"json",contentType:"application/json",method:"PUT",data:JSON.stringify({name:t}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function L(e,t){return $.ajax({url:SERVER.URLS.media_folders_detail(e),dataType:"json",contentType:"application/json",method:"DELETE",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function P(e){return t=>new Promise(((n,r)=>{try{t((0,o.oN)(e)),n(e)}catch(e){r(e)}}))}function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(t,n)=>{const r=n(),i=(0,o.B8)(r),a=(0,o.CF)(r,i),s=(0,o.$x)(r,i),u=(0,o.Lm)(r,e);t((0,o.Yi)(e,i)),e&&1===(null==u?void 0:u.get("page"))&&t((0,c.Mw)(i,!1,0,!1,e)),t(U(i,e)),!e&&a&&(t((0,o.hf)(i,"")),t((0,o.fQ)(s)))}}function U(e,t){return(n,r)=>{const a=r();if(e!==o.Pf.UPLOADED_VISUALS)return;const s=(0,o.Z)(a,e,t),u=(0,o.G7)(a,e);null===s&&$.ajax({url:SERVER.URLS.top_uploads_tags,method:"GET",data:{folder_id:t,filter:u.join(",")},success:r=>{n((0,c.W2)({folderId:t,search_context:e,frequently_used_tags:i.default.fromJS(r.top_tags)}))}})}}function w(e,t){return n=>{n((0,c.vL)({search_context:e,folderId:t})),n(U(e,t))}}function M(e,t){const n=e.get("type"),r=e.getIn([n]).get("id");return $.ajax({url:SERVER.URLS.uploads_metadata_update,dataType:"json",contentType:"application/json",method:"PUT",data:JSON.stringify({asset_id:r,asset_type:n,folder_id:t}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function V(){return async(e,t)=>{const n=t(),r=(0,o.mG)(n);if(r)return r;{const n=await C(o.N$,o.Pf.UPLOADED_VISUALS);await e(P(i.default.fromJS(n)));const r=t();return(0,o.mG)(r)}}}function G(e,t){return async(n,r)=>{const c=r(),d={name:"",id:null,isNew:!0},l={};if(e.forEach((e=>{const t=e.webkitRelativePath.split("/")[0];l.folderName=t,l.folderId=null,l.isNewFolder=!0,d.name=t;const n=(0,o.Cz)(c,t);if(n){const e=n.get("id");l.folderId=e,l.isNewFolder=!1,d.id=e}})),!d.id)try{const r=await C(d.name,o.Pf.UPLOADED_VISUALS);n(P(i.default.fromJS(r))),s.Z.success(`Folder "${r.name}" created successfully. Now uploading all file(s) in the folder"`),d.id=r.id,e.map((e=>({file:e,metadata:{...l}}))),t.file_list=e,n(a.Ww.startUpload(t)).catch((()=>{}))}catch(e){(0,u.Yt)(void 0,e,void 0,!0,"Unable to create a folder, please try again.")}}}function k(e){return $.ajax({url:SERVER.URLS.audio,dataType:"json",contentType:"application/json",method:"DELETE",data:JSON.stringify({id:e}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}function x(e){return(t,n)=>{t((0,c.tS)(!1)),t((0,c.zY)(!0));const r=SERVER.URLS.media_queries,i=JSON.stringify({sentence:e,search_count:2}),o=r+i;let a=!0;if(sessionStorage.getItem(o)){const e=JSON.parse(sessionStorage.getItem(o)),n=new Date(e.createdAt),r=e.data;n&&r&&(n.setTime(n.getTime()+36e5),(new Date).getTime()<n.getTime()&&(t((0,c.Al)(r)),t((0,c.zY)(!1)),a=!1))}a&&$.ajax({method:"POST",contentType:"application/json",dataType:"json",url:r,data:i,timeout:2e4,beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{const n=e.search_results;let r=0;if(n.forEach((e=>{r+=e.results.length})),r>0){const e={createdAt:new Date,data:n};sessionStorage.setItem(o,JSON.stringify(e))}t((0,c.Al)(n)),t((0,c.zY)(!1))},error:(e,n)=>{t((0,c.zY)(!1)),t((0,c.tS)(!0))}})}}},21623:function(e,t,n){"use strict";n.d(t,{$x:function(){return ee},B8:function(){return x},BS:function(){return p},CF:function(){return l},Cz:function(){return re},D1:function(){return O},G7:function(){return m},H5:function(){return v},I9:function(){return ae},Ib:function(){return I},J9:function(){return W},LF:function(){return D},Ll:function(){return y},Lm:function(){return ne},M1:function(){return q},Nt:function(){return w},PC:function(){return V},Q$:function(){return G},RY:function(){return te},Tz:function(){return P},UF:function(){return C},UX:function(){return Q},WN:function(){return X},XX:function(){return k},YB:function(){return d},Z:function(){return S},a9:function(){return _},dY:function(){return K},dq:function(){return $},ep:function(){return Y},h0:function(){return ie},hn:function(){return T},id:function(){return E},jl:function(){return oe},lc:function(){return R},mG:function(){return z},oG:function(){return M},os:function(){return U},ou:function(){return A},ps:function(){return F},sM:function(){return b},vV:function(){return Z},wQ:function(){return B},xI:function(){return j},xe:function(){return N},yT:function(){return L},z2:function(){return h},zW:function(){return f},zl:function(){return g}});var r=n(35369),i=n(45970),o=n(9514),a=n(84829);const s=r.default.List();function u(e,t){const n=t===o.Pf.UPLOADED_VISUALS,r=t===o.Pf.UPLOADED_ICONS,i=null!==ee(e,t);return(n||r)&&i}function c(e,t){return u(e,t)?new i.ZP(te(e,t).get("media_results")):new i.ZP(e.media[t].media_results)}function d(e,t,n){return c(e,t).getById(n).get("mp3_url")}function l(e,t){return u(e,t)?te(e,t).get("search_term"):e.media[t].search_term}function _(e,t){return e.media[t].corrected_search_term}function E(e,t){return e.media[t].corrected_search_term_indices}function f(e,t){return e.media[t].suggested_search_term}function p(e,t){return e.media[t].highlighted_suggested_search_term}function T(e,t){return e.media[t].related_search_terms}function h(e,t){return S(e,t,ee(e,t))}function S(e,t,n){return n?ne(e,n).get("frequently_used_tags"):e.media[t].frequently_used_tags}function g(e,t){return u(e,t)?te(e,t).get("page"):e.media[t].page}function m(e,t){const n=function(e){let t=Object.values(o.Wf).filter((t=>!1===e.has(t)||!0===e.get(t)));return 0===t.length&&(t=Object.values(o.Wf)),t}(u(e,t)?te(e,t).get("sourceFilter"):e.media[t].sourceFilter),r=u(e,t)?te(e,t).get("selectedType"):e.media[t].selectedType;return[...n,...r===o.ty.ALL?[o.ty.PHOTOS,o.ty.VIDEOS]:[r]]}function I(e,t){if((u(e,t)?te(e,t).get("selectedType"):e.media[t].selectedType)!==o.ty.ALL)return!0;const n=u(e,t)?te(e,t).get("sourceFilter"):e.media[t].sourceFilter;return!Object.values(n.toJS()).every((e=>!0===e))}function R(e,t){return e.media[t].filter_by_user_level}function A(e,t){return u(e,t)?te(e,t).get("ajax"):e.media[t].ajax}function y(e,t){return u(e,t)?te(e,t).get("more_results"):e.media[t].more_results}function v(e,t){return e.media[t].last_searched_term}function O(e,t){return e.media[t].no_access}function D(e,t){return u(e,t)?te(e,t).get("no_results"):e.media[t].no_results}function C(e,t,n){var r;return u(e,t)?!1!==(null===(r=te(e,t).get("sourceFilter"))||void 0===r?void 0:r.get(n)):!1!==e.media[t].sourceFilter.get(n)}function N(e,t,n){return u(e,t)?te(e,t).get("selectedType")===n:e.media[t].selectedType===n}function L(e,t){return u(e,t)?function(e,t){if(J(e)){const n=ee(e,t);if(n)return new i.ZP(e.media.all_uploads_folders).getById(n).get("sort")}return null}(e,t):e.media[t].sort}function P(e,t){return c(e,t).getAllIds()}function b(e,t,n){return u(e,t)?function(e,t,n){const r=te(e,t);return r?new i.ZP(r.get("media_results")).getById(n):null}(e,t,n):w(e,t,n)}function U(e,t){const n=c(e,t),r=n.query({key:["current_session_upload"],value:!0}),i=n.query({key:["current_session_upload"],value:void 0});return r.size>0?r.map((e=>e.get("_id"))).concat(i.map((e=>e.get("_id")))):i.map((e=>e.get("_id")))}function w(e,t,n){return c(e,t).getById(n)}function M(e,t,n){const r=c(e,t).getById(n);return r.getIn([r.get("type"),"preview_url"])}function V(e,t,n){const r=c(e,t).getById(n);return r.getIn([r.get("type"),"source"])}function G(e,t,n){const r=c(e,t).getById(n);return r.getIn([r.get("type"),"uuid"])}function k(e,t){return c(e,t).length}function x(e){return F(e,(0,a.Lf)(e))}function F(e,t){return e.media.search_context.get(t)}function H(e,t){return[o.Pf.CREATIVE_COMMONS_AUDIO,o.Pf.UPLOADED_AUDIO,o.Pf.RECENTS_AUDIO,o.Pf.FAVORITE_AUDIO].includes(t)?s:e.undoable.present.media.recommended_search_terms}function B(e,t){return H(e,t)}function Z(e){return e.undoable.present.media.recommended_search_terms_strategy}function j(e,t){return function(e){return new i.ZP(e.media.all_favorite_media)}(e).contains(t)}function Y(e){return e.media.playingAudioDetails.get("url")}function W(e){return e.media.playingAudioDetails.get("seekPercent")}function K(e){return e.media.playingAudioDetails.get("scrubberSeekPercent")}function $(e){return e.media.playingAudioDetails.get("duration")}function q(e){return e.media.playingAudioDetails.get("isPlaying")}function X(e,t){return H(e,t).toJS().splice(0,5)}function J(e){var t;return!(null===(t=e.media)||void 0===t||!t.all_uploads_folders)}function z(e){var t;if(J(e))return null===(t=new i.ZP(e.media.all_uploads_folders).query({key:["name"],value:o.N$}))||void 0===t?void 0:t.get(0)}function Q(e){return J(e)?new i.ZP(e.media.all_uploads_folders).map((e=>e)):[]}function ee(e,t){return J(e)?e.media.active_uploads_folder.get(t,null):null}function te(e,t){if(J(e)){const n=ee(e,t);if(n)return new i.ZP(e.media.all_uploads_folders).getById(n)}return null}function ne(e,t){return J(e)?new i.ZP(e.media.all_uploads_folders).getById(t):null}function re(e,t){if(J(e)){const n=new i.ZP(e.media.all_uploads_folders).query({key:["name"],value:t});return n.size>0?n.first():null}return null}function ie(e,t){const n=te(e,t);if(!n)return r.default.List();const o=new i.ZP(n.get("media_results")),a=o.query({key:["current_session_upload"],value:!0}),s=o.query({key:["current_session_upload"],value:void 0});return a.size>0?a.map((e=>e.get("_id"))).concat(s.map((e=>e.get("_id")))):o.getAllIds()}function oe(e){return e.media.music_volume_override}function ae(e,t,n){var r,i;return null===(r=e.media.media_query_search_results.get(t))||void 0===r||null===(i=r.get("results"))||void 0===i?void 0:i.get(n)}},41964:function(e,t,n){"use strict";n.d(t,{$3:function(){return f},E1:function(){return T},EE:function(){return h},HU:function(){return C},JK:function(){return S},N$:function(){return o},Pf:function(){return d},Rt:function(){return A},Ti:function(){return v},Wf:function(){return _},XX:function(){return y},Zt:function(){return u},dy:function(){return N},g3:function(){return i},hh:function(){return L},i1:function(){return R},iv:function(){return D},lT:function(){return p},n9:function(){return O},nj:function(){return s},ty:function(){return l},vZ:function(){return a},zI:function(){return c}});var r=n(84829);let i;!function(e){e.SET_FILTER="SET_FILTER",e.SET_SORT="SET_SORT",e.CHANGE_MEDIA_SEARCH_TERM="CHANGE_MEDIA_SEARCH_TERM",e.CHANGE_CORRECTED_MEDIA_SEARCH_TERM="CHANGE_CORRECTED_MEDIA_SEARCH_TERM",e.CHANGE_SUGGESTED_MEDIA_SEARCH_TERM="CHANGE_SUGGESTED_MEDIA_SEARCH_TERM",e.CHANGE_RELATED_MEDIA_SEARCH_TERMS="CHANGE_RELATED_MEDIA_SEARCH_TERMS",e.STORE_FREQUENTLY_USED_TAGS="STORE_FREQUENTLY_USED_TAGS",e.CLEAR_FREQUENTLY_USED_TAGS="CLEAR_FREQUENTLY_USED_TAGS",e.CHANGE_ACTIVE_SEARCH_CONTEXT="CHANGE_ACTIVE_SEARCH_CONTEXT",e.RECEIVE_MEDIA_RESPONSE="RECEIVE_MEDIA_RESPONSE",e.RECEIVE_MEDIA_ERROR="RECEIVE_MEDIA_ERROR",e.START_MEDIA_SEARCH="START_MEDIA_SEARCH",e.TOGGLE_MEDIA_SOURCE_FILTER="TOGGLE_MEDIA_SOURCE_FILTER",e.SET_SELECTED_MEDIA_TYPE_FILTER="SET_SELECTED_MEDIA_TYPE_FILTER",e.TOGGLE_FILTER_BY_USER_LEVEL="TOGGLE_FILTER_BY_USER_LEVEL",e.SET_RECOMMENDED_SEARCH_TERMS="SET_RECOMMENDED_SEARCH_TERMS",e.SET_CURRENT_MEDIA_QUERY_SCENE="SET_CURRENT_MEDIA_QUERY_SCENE",e.SET_IS_MEDIA_QUERY_SEARCH_LOADING="SET_IS_MEDIA_QUERY_SEARCH_LOADING",e.SET_MEDIA_QUERY_SEARCH_RESULTS="SET_MEDIA_QUERY_SEARCH_RESULTS",e.SHOW_MEDIA_QUERY_SUGGESTION_ERROR="SHOW_MEDIA_QUERY_SUGGESTION_ERROR",e.SET_ALL_FAVORITES="SET_ALL_FAVORITES",e.ADD_FAVORITE_MEDIA="ADD_FAVORITE_MEDIA",e.REMOVE_FAVORITE_MEDIA="REMOVE_FAVORITE_MEDIA",e.SET_CURRENT_PLAYING_AUDIO_URL="SET_CURRENT_PLAYING_AUDIO_URL",e.SET_CURRENT_PLAYING_AUDIO_SEEK_PERCENT="SET_CURRENT_PLAYING_AUDIO_SEEK_PERCENT",e.SET_CURRENT_PLAYING_AUDIO_DURATION="SET_CURRENT_PLAYING_AUDIO_DURATION",e.SET_CURRENT_AUDIO_PLAYING_STATUS="SET_CURRENT_AUDIO_PLAYING_STATUS",e.SET_CURRENT_PLAYING_AUDIO_SCRUBBER_SEEK_PERCENT="SET_CURRENT_PLAYING_AUDIO_SCRUBBER_SEEK_PERCENT",e.UPDATE_MEDIA_TAGS="UPDATE_MEDIA_TAGS",e.SET_ACTIVE_FOLDER="SET_ACTIVE_FOLDER",e.STORE_ALL_FOLDERS="STORE_ALL_FOLDERS",e.ADD_NEW_FOLDER="ADD_NEW_FOLDER",e.EDIT_FOLDER_NAME="EDIT_FOLDER_NAME",e.DELETE_FOLDER="DELETE_FOLDER",e.ADD_RECENT_UPLOADED_ASSET_TO_A_FOLDER="ADD_RECENT_UPLOADED_ASSET_TO_A_FOLDER",e.MOVE_ASSET_TO_FOLDER="MOVE_ASSET_TO_FOLDER",e.ADD_MEDIA_TO_UPLOADS="ADD_MEDIA_TO_UPLOADS",e.RESET_FOLDER_SEARCH_STATE="RESET_FOLDER_SEARCH_STATE",e.DELETE_AUDIO_SUCCESS="DELETE_AUDIO_SUCCESS",e.UPDATE_FOLDER_THUMBNAIL="UPDATE_FOLDER_THUMBNAIL",e.CHANGE_MUSIC_VOLUME_OVERRIDE="CHANGE_MUSIC_VOLUME_OVERRIDE"}(i||(i={}));const o="Recordings",a="uploaded_media",s="media_result",u="media",c="uploads-folder";let d,l,_,E;!function(e){e.RECOMMENDED_VISUALS="recommended-visuals",e.UPLOADED_VISUALS="uploaded-visuals",e.TENOR_VISUALS="tenor-visuals",e.RECENT_VISUALS="recent-visuals",e.FAVORITE_VISUALS="favorite-visuals",e.CREATIVE_COMMONS_AUDIO="cc-audio",e.UPLOADED_AUDIO="uploaded-audio",e.RECENTS_AUDIO="recents-audio",e.FAVORITE_AUDIO="favorite-audio",e.RECOMMENDED_ICONS="recommended-icons",e.UPLOADED_ICONS="uploaded-icons",e.RECENT_ICONS="recents-icons",e.FAVORITE_ICONS="favorite-icons",e.UPLOADED_VOICEOVERS="uploaded-voiceovers"}(d||(d={})),function(e){e.ALL="all",e.VIDEOS="videos",e.PHOTOS="photos"}(l||(l={})),function(e){e.BASIC="basic",e.PREMIUM="premium",e.MARKETPLACE="marketplace"}(_||(_={})),function(e){e.CC="cc",e.UPLOADS="uploads",e.ICON_LIBRARY="icon_library",e.ICON_UPLOADS="icon_uploads",e.RECOMMENDED="recommended",e.EXACT="exact",e.TENOR="tenor",e.CURATED="curated",e.RECENTLY_USED="recent",e.RECENTLY_USED_ICONS="recent-icons",e.FAVORITES="favorites",e.FAVORITE_ICONS="favorite-icons",e.VOICEOVER_UPLOADS="voiceover_uploads"}(E||(E={}));const f=[d.RECOMMENDED_VISUALS,d.TENOR_VISUALS,d.UPLOADED_VISUALS,d.RECENT_VISUALS,d.FAVORITE_VISUALS],p=[d.CREATIVE_COMMONS_AUDIO,d.UPLOADED_AUDIO,d.RECENTS_AUDIO,d.FAVORITE_AUDIO],T=[d.RECOMMENDED_ICONS,d.UPLOADED_ICONS,d.RECENT_ICONS,d.FAVORITE_ICONS],h=[d.UPLOADED_VOICEOVERS],S={};Object.values(d).forEach((e=>{let t=null;if(f.includes(e))t=r.BB.MEDIA;else if(p.includes(e))t=r.BB.MUSIC;else if(T.includes(e))t=r.BB.ICONS;else{if(!h.includes(e))throw Error(`All search contexts must be inside of either the MEDIA, MUSIC, or ICONS tab. Got ${e}`);t=r.BB.VOICEOVER}S[e]=t}));const g=[{name:"Nature",search_term:"nature"},{name:"People",search_term:"people"},{name:"City",search_term:"city"},{name:"Tech",search_term:"tech"},{name:"Abstract",search_term:"abstract"}],m=[{name:"Business",search_term:"business"},{name:"Education",search_term:"education"},{name:"Environment",search_term:"environment"},{name:"Health",search_term:"health"},{name:"Marketing",search_term:"marketing"},{name:"Social Media",search_term:"social media"},{name:"Technology",search_term:"technology"}],I=[{name:"Angry",search_term:"angry"},{name:"Bright",search_term:"bright"},{name:"Calm",search_term:"calm"},{name:"Dark",search_term:"dark"},{name:"Dramatic",search_term:"dramatic"},{name:"Funky",search_term:"funky"},{name:"Happy",search_term:"happy"},{name:"Inspirational",search_term:"inspirational"},{name:"Romantic",search_term:"romantic"},{name:"Sad",search_term:"sad"}],R={[d.RECOMMENDED_VISUALS]:{search_source:E.RECOMMENDED,no_query_search_source:E.CURATED,description_text:"",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/media-empty.png",empty_message:"No media found",attribution_text:"Powered by Shutterstock.\nShutterstock watermark will be removed when you download or share your video.",button_text:"Library",search_placeholder:"Search millions of photos and videos...",SEARCH_CONTEXT:g},[d.TENOR_VISUALS]:{search_source:E.TENOR,no_query_search_source:E.TENOR,description_text:"tenor's gif library",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/media-empty.png",empty_message:"No GIFs found",attribution_text:"Powered by Tenor",button_text:"GIFs",search_placeholder:"Search GIFs...",SEARCH_CONTEXT:g},[d.UPLOADED_VISUALS]:{search_source:E.UPLOADS,no_query_search_source:E.UPLOADS,description_text:"your uploads",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/media-empty.png",empty_message:"Your uploaded media\n will appear here",attribution_text:null,button_text:"Uploads",search_placeholder:"Search your uploaded media...",SEARCH_CONTEXT:g},[d.RECOMMENDED_ICONS]:{search_source:E.ICON_LIBRARY,no_query_search_source:E.ICON_LIBRARY,description_text:"icons",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/icons-icon.png",empty_message:"No icons found",attribution_text:null,button_text:"Library",search_placeholder:"Search our collection of icons...",SEARCH_CONTEXT:m},[d.UPLOADED_ICONS]:{search_source:E.ICON_UPLOADS,no_query_search_source:E.ICON_UPLOADS,description_text:"your uploaded icons",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/icons-icon.png",empty_message:"Your uploaded icons\n will appear here",attribution_text:null,button_text:"Uploads",search_placeholder:"Search your uploaded icons...",SEARCH_CONTEXT:m},[d.RECENT_VISUALS]:{search_source:E.RECENTLY_USED,no_query_search_source:E.RECENTLY_USED,description_text:"",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/media-empty.png",empty_message:"Media used in published videos will appear here.",attribution_text:null,button_text:"Recent",search_placeholder:"Search your recently used media...",SEARCH_CONTEXT:g},[d.FAVORITE_VISUALS]:{search_source:E.FAVORITES,no_query_search_source:E.FAVORITES,description_text:"",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/favorite-icon.png",empty_message:"Your favourited media will appear here",attribution_text:null,button_text:"",button_icon:"star_border",search_placeholder:"Search your favorited media...",SEARCH_CONTEXT:g},[d.FAVORITE_ICONS]:{search_source:E.FAVORITE_ICONS,no_query_search_source:E.FAVORITE_ICONS,description_text:"",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/favorite-icon.png",empty_message:"Your favorited icons will appear here",attribution_text:null,button_text:"",button_icon:"star_border",search_placeholder:"Search your favorited icons...",SEARCH_CONTEXT:m},[d.CREATIVE_COMMONS_AUDIO]:{search_source:E.CC,no_query_search_source:E.CC,description_text:"free audio tracks",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/music-empty.png",empty_message:"No music found",attribution_text:null,button_text:"Tracks",search_placeholder:"Search free audio tracks...",SEARCH_CONTEXT:I},[d.UPLOADED_AUDIO]:{search_source:E.UPLOADS,no_query_search_source:E.UPLOADS,description_text:"your uploaded audio",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/music-empty.png",empty_message:"Your uploaded music\n will appear here",attribution_text:null,button_text:"Uploads",search_placeholder:"Search your uploaded audio...",SEARCH_CONTEXT:I},[d.RECENTS_AUDIO]:{search_source:E.RECENTLY_USED,no_query_search_source:E.RECENTLY_USED,description_text:"recently used tracks",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/music-empty.png",empty_message:"Tracks used in published\n videos will appear here",attribution_text:null,button_text:"Recent",search_placeholder:"Search your recently used tracks...",SEARCH_CONTEXT:I},[d.FAVORITE_AUDIO]:{search_source:E.FAVORITES,no_query_search_source:E.FAVORITES,description_text:"favorite tracks",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/favorite-icon.png",empty_message:"Your favorited tracks will appear here",attribution_text:null,button_text:"",button_icon:"star_border",search_placeholder:"Search your favorited tracks...",SEARCH_CONTEXT:I},[d.RECENT_ICONS]:{search_source:E.RECENTLY_USED_ICONS,no_query_search_source:E.RECENTLY_USED_ICONS,description_text:"recently used icons",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/icons-icon.png",empty_message:"Icons used in published videos will appear here.",attribution_text:null,button_text:"Recent",search_placeholder:"Search your recently used icons...",SEARCH_CONTEXT:m},[d.UPLOADED_VOICEOVERS]:{search_source:E.VOICEOVER_UPLOADS,no_query_search_source:E.VOICEOVER_UPLOADS,description_text:"your uploaded voiceover files",empty_img_url:"https://storage.googleapis.com/lumen5-site-images/music-empty.png",empty_message:"No voiceover files found",attribution_text:null,button_text:"Uploads",search_placeholder:"Search your uploaded voiceover...",SEARCH_CONTEXT:I}},A="latest",y={most_relevant:"Most relevant",latest:"Newest",earliest:"Oldest"},v={filter_by_user_level:"filter_by_user_level",filter_by_workspace_level:"filter_by_workspace_level"},O={[d.FAVORITE_VISUALS]:{[v.filter_by_workspace_level]:"Starred by anyone",[v.filter_by_user_level]:"Starred by me"},[d.RECENT_VISUALS]:{[v.filter_by_workspace_level]:"Anyone's recents",[v.filter_by_user_level]:"My recents"},[d.RECENTS_AUDIO]:{[v.filter_by_workspace_level]:"Anyone's recents",[v.filter_by_user_level]:"My recents"},[d.RECENT_ICONS]:{[v.filter_by_workspace_level]:"Anyone's recents",[v.filter_by_user_level]:"My recents"},[d.FAVORITE_AUDIO]:{[v.filter_by_workspace_level]:"Starred by anyone",[v.filter_by_user_level]:"Starred by me"},[d.FAVORITE_ICONS]:{[v.filter_by_workspace_level]:"Starred by anyone",[v.filter_by_user_level]:"Starred by me"}};let D;function C(e){return void 0!==e.get("mp3_url")}!function(e){e.Image="image",e.Video="video",e.Icon="icon",e.Audio="audio"}(D||(D={}));const N=100,L=.75},72891:function(e,t,n){"use strict";n.d(t,{Ay:function(){return f},DU:function(){return S},HQ:function(){return T},Nn:function(){return p},U:function(){return h},aV:function(){return _},fV:function(){return l},oo:function(){return E}});var r=n(35369),i=n(41964),o=n(9514),a=n(84829),s=n(28074),u=n(78133),c=n(14890),d=n(57834);function l(e){let t=u.Z.background_asset_type;return(i.lT.indexOf(e)>=0||i.EE.indexOf(e)>=0)&&(t=u.Z.audio_asset_type),i.E1.indexOf(e)>=0&&(t=u.Z.icon_asset_type),t}function _(e){return[i.Pf.RECOMMENDED_VISUALS,i.Pf.UPLOADED_VISUALS,i.Pf.RECENT_VISUALS,i.Pf.FAVORITE_VISUALS].includes(e)}function E(e){return[i.Pf.UPLOADED_VISUALS,i.Pf.UPLOADED_ICONS,i.Pf.UPLOADED_AUDIO,i.Pf.UPLOADED_VOICEOVERS].includes(e)}function f(e){return[i.Pf.FAVORITE_VISUALS,i.Pf.FAVORITE_ICONS,i.Pf.FAVORITE_AUDIO].includes(e)}function p(e){const t=(0,c.UY)(o.RJ)(void 0,{type:"INIT_FOLDERS"});return e.merge(r.default.fromJS(t))}function T(e,t){if(!e)return;const n=(0,c.UY)(o.RJ)(void 0,{type:"INIT_FOLDERS"});for(const r in n)e.updateById(t,{key:[r],value:n[r]})}function h(e,t){return null!==t&&(t===s.dpc&&("image"===e.get("type")||"video"===e.get("type"))||t===s.xwS&&"icon"===e.get("type"))}async function S(e,t){const n=await(0,a.t_)(e,t),r=$.Deferred();return d.Z.poll_for_result(n.task_id,r),new Promise(((e,t)=>{r.done((async t=>{e(t.hasVoiceover)})),r.fail((()=>{t(new Error("Failed to determine voiceover status"))}))}))}},62104:function(e,t,n){"use strict";n.d(t,{Pd:function(){return s},fX:function(){return a},ZP:function(){return w},AJ:function(){return E},Um:function(){return P},RB:function(){return S},VG:function(){return d},EZ:function(){return y},XB:function(){return R},lv:function(){return b},VJ:function(){return h},wu:function(){return L},h2:function(){return I},R2:function(){return f},cz:function(){return _},rs:function(){return N},Hx:function(){return D},gv:function(){return v},m5:function(){return O},_S:function(){return A},fr:function(){return g},tn:function(){return C},BQ:function(){return p},QU:function(){return T},ZF:function(){return m},K4:function(){return c}});var r=n(14890),i=n(35369);let o,a,s;!function(e){e.SHOW_MODAL="SHOW_MODAL",e.HIDE_MODAL="HIDE_MODAL"}(o||(o={})),function(e){e.GENERIC_ERROR="GENERIC_ERROR",e.FEATURE_LOCK="FEATURE_LOCK",e.VIDEO_PREVIEW="VIDEO_PREVIEW",e.UPLOAD_MEDIA="UPLOAD_MEDIA",e.UPLOAD_ICONS="UPLOAD_ICONS",e.UPLOAD_MUSIC="UPLOAD_MUSIC",e.VOICEOVER="VOICEOVER",e.PROJECT_CREATE="PROJECT_CREATE",e.VIDEO_LIST_MEMBERS_UPDATE="VIDEO_LIST_MEMBERS_UPDATE",e.PROJECT_DELETE="PROJECT_DELETE",e.LOGIN_REQUIRED_FOR_COMMENTING="LOGIN_REQUIRED_FOR_COMMENTING",e.CROP="CROP",e.TRIM="TRIM",e.APPROVAL_STATUS="APPROVAL_STATUS",e.SAVED_TEMPLATE="SAVED_TEMPLATE",e.TRANSCRIPT_GENERATED="TRANSCRIPT_GENERATED",e.REMOVE_TEAM_MEMBER="REMOVE_TEAM_MEMBER",e.USER_SETTINGS="USER_SETTINGS",e.RECORD_YOURSELF="RECORD_YOURSELF",e.DOC_TO_SCRIPT_SPLASH_PAGE="DOC_TO_SCRIPT_SPLASH_PAGE"}(a||(a={})),function(e){e.RENDER_720P="RENDER_720P",e.RENDER_1080P="RENDER_1080P",e.CUSTOM_WATERMARK="CUSTOM_WATERMARK",e.THEMING_SETTINGS="THEMING_SETTINGS",e.UNLIMITED_PREMIUM_MEDIA="UNLIMITED_PREMIUM_MEDIA",e.MARKETPLACE_MEDIA="MARKETPLACE_MEDIA",e.CUSTOM_FONT="CUSTOM_FONT",e.UPLOAD_ICONS="UPLOAD_ICONS",e.PREMIUM_ICONS="PREMIUM_ICONS",e.CUSTOM_COLORS="CUSTOM_COLORS",e.MULTIPLE_SAVED_TEMPLATES="MULTIPLE_SAVED_TEMPLATES",e.HIT_MAX_SAVED_TEMPLATES="HIT_MAX_SAVED_TEMPLATES",e.MULTIPLE_WORKSPACES="MULTIPLE_WORKSPACES",e.HIT_MAX_WORKSPACES="HIT_MAX_WORKSPACES",e.HIT_MEDIA_CREDIT_LIMIT="HIT_MEDIA_CREDIT_LIMIT",e.BRAND_KITS="BRAND_KITS",e.BRAND_KITS_LIMIT="BRAND_KITS_LIMIT",e.ENTERPRISE_BRAND_KITS="ENTERPRISE_BRAND_KITS",e.BRAND_KITS_LIMIT_CONTACT_US="BRAND_KITS_LIMIT_CONTACT_US"}(s||(s={}));var u=n(29829);const c=(0,u.PH)(o.SHOW_MODAL),d=(0,u.PH)(o.HIDE_MODAL);var l=n(78133);function _(e){return e.modals.visible_stack.peek()===a.PROJECT_DELETE}function E(e){return h(e)?P(e).get("featureName"):null}function f(e){return e.modals.visible_stack.peek()===a.PROJECT_CREATE}function p(e){return e.modals.visible_stack.peek()===a.VIDEO_LIST_MEMBERS_UPDATE}function T(e){return e.modals.visible_stack.peek()===a.VIDEO_PREVIEW}function h(e){return e.modals.visible_stack.peek()===a.FEATURE_LOCK}function S(e){switch(e){case l.Z.background_asset_type:return a.UPLOAD_MEDIA;case l.Z.icon_asset_type:return a.UPLOAD_ICONS;case l.Z.audio_asset_type:return a.UPLOAD_MUSIC;default:return}}function g(e,t){return void 0!==t&&void 0!==e.modals.visible_stack.peek()&&e.modals.visible_stack.peek()===S(t)}function m(e){return e.modals.visible_stack.peek()===a.VOICEOVER}function I(e){return e.modals.visible_stack.peek()===a.LOGIN_REQUIRED_FOR_COMMENTING}function R(e){return e.modals.visible_stack.peek()===a.CROP}function A(e){return e.modals.visible_stack.peek()===a.TRIM}function y(e){return e.modals.visible_stack.peek()===a.APPROVAL_STATUS}function v(e){return e.modals.visible_stack.peek()===a.SAVED_TEMPLATE}function O(e){return e.modals.visible_stack.peek()===a.TRANSCRIPT_GENERATED}function D(e){return e.modals.visible_stack.peek()===a.REMOVE_TEAM_MEMBER}function C(e){return e.modals.visible_stack.peek()===a.USER_SETTINGS}function N(e){return e.modals.visible_stack.peek()===a.RECORD_YOURSELF}function L(e){return e.modals.visible_stack.peek()===a.GENERIC_ERROR}function P(e){return e.modals.visible_stack_context.peek()}function b(e){return e.modals.visible_stack.peek()===a.DOC_TO_SCRIPT_SPLASH_PAGE}const U=(0,r.UY)({visible_stack:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Stack(),t=arguments.length>1?arguments[1]:void 0;return c.match(t)?e.push(t.payload.modal_id):d.match(t)?e.pop():e},visible_stack_context:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Stack(),t=arguments.length>1?arguments[1]:void 0;return c.match(t)?e.push(t.payload.modal_context):d.match(t)?e.pop():e}});var w=U},94075:function(e,t,n){"use strict";n.d(t,{ZP:function(){return S},aG:function(){return _},$n:function(){return d},I6:function(){return l},QF:function(){return c},j_:function(){return E},Jh:function(){return T},i5:function(){return p}});var r=n(14890);let i;!function(e){e.RECEIVE_PREMIUM_MEDIA_STATUS="RECEIVE_PREMIUM_MEDIA_STATUS",e.RECEIVE_PREMIUM_MEDIA_USAGE="RECEIVE_PREMIUM_MEDIA_USAGE"}(i||(i={}));var o=n(29829);const a=(0,o.PH)(i.RECEIVE_PREMIUM_MEDIA_USAGE),s=(0,o.PH)(i.RECEIVE_PREMIUM_MEDIA_STATUS);function u(e){return e.premium_media}function c(e){return l(e)-function(e){return u(e).total_active_credit_expense}(e)}function d(e){return c(e)-_(e)}function l(e){return u(e).total_active_credit_availability}function _(e){return u(e).credits_used_in_draft}function E(e){return u(e).total_active_hidden_credit_availability-u(e).total_active_hidden_credit_expense}var f=n(80135);function p(){return(e,t)=>new Promise(((n,r)=>{$.ajax({url:SERVER.URLS.premium_media_credit_check,method:"POST",data:{video_data:JSON.stringify(t().undoable.present.video_data)},beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{e(a({credits:t.credits_in_data})),n()},error:f.TU})}))}function T(){return e=>new Promise(((t,n)=>{$.ajax({url:SERVER.URLS.premium_media,method:"GET",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:n=>{e(s({total_active_credit_availability:n.total_active_credit_availability,total_active_credit_expense:n.total_active_credit_expense,total_hidden_credits:n.total_hidden_credits,total_hidden_credits_used:n.total_hidden_credits_used})),t()},error:f.TU})}))}const h=(0,r.UY)({total_active_hidden_credit_availability:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return s.match(t)?t.payload.total_hidden_credits:e},total_active_hidden_credit_expense:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return s.match(t)?t.payload.total_hidden_credits_used:e},total_active_credit_availability:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return s.match(t)?t.payload.total_active_credit_availability:e},total_active_credit_expense:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return s.match(t)?t.payload.total_active_credit_expense:e},credits_used_in_draft:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return a.match(t)?t.payload.credits:e}});var S=h},17479:function(e,t,n){"use strict";n.d(t,{a1:function(){return c},f:function(){return l},hg:function(){return E},o_:function(){return p},wx:function(){return _},yS:function(){return f}});var r=n(35369),i=n(20573),o=n(36062),a=n(9566),s=n(45970),u=n(54551);function c(e){return new s.ZP(e.savedTemplates.list).getAllIds()}function d(e,t){return new s.ZP(e.savedTemplates.list).getById(t)}function l(e,t){return d(e,t).get("name")}function _(e,t){return d(e,t).get("templateId")}function E(e){return e.savedTemplates.loading}function f(e,t){return t?d(e,t).get("video_child_id"):null}const p=(0,i.P1)((e=>(0,u.R8)(e)),(e=>{let t=r.default.fromJS([{id:a.a.EDIT,text:"Edit template",icon:"edit",onSelectData:{type:a.a.EDIT}}]);if(SERVER.USER.role===o.K$.ADMIN){const n=e.map((e=>r.default.fromJS({id:`workspace-${e.get("id")}`,text:e.get("name"),onSelectData:{type:a.a.COPY_TO,workspaceId:e.get("id")}})));if(n.size>0){let e=r.default.fromJS({id:"copy-to",nestedDropdown:{toggleProps:{text:"Copy to",icon:"content_copy"},limitMenuHeight:!0,menuProps:{flip:!1}}});e=e.setIn(["nestedDropdown","itemPropsList"],n),t=t.push(e)}}return t=t.push(r.default.fromJS({id:a.a.DELETE,"data-testid":"delete-saved-template",text:"Delete",icon:"delete_outline",onSelectData:{type:a.a.DELETE}})),t}))},56228:function(e,t,n){"use strict";n.d(t,{s$:function(){return h},oC:function(){return P},Xf:function(){return c},uZ:function(){return R},Iu:function(){return g},vo:function(){return A},ZP:function(){return re},xw:function(){return H},oS:function(){return te},iA:function(){return ee},Cn:function(){return X},TR:function(){return J},vH:function(){return z},E:function(){return Q},mo:function(){return $},ag:function(){return K},_C:function(){return q},yl:function(){return F},HL:function(){return k},XF:function(){return Y},Lk:function(){return y},sc:function(){return l},Ll:function(){return E},Nu:function(){return p},ef:function(){return v},Pw:function(){return W},Sb:function(){return V},tm:function(){return G},f4:function(){return M},FD:function(){return B},EQ:function(){return Z},Lt:function(){return j},ME:function(){return u},M6:function(){return T},j_:function(){return L},A:function(){return N},Br:function(){return O},nj:function(){return C},yH:function(){return d},rB:function(){return _},jy:function(){return f},pF:function(){return S},n:function(){return m},EB:function(){return I},sk:function(){return D},PR:function(){return b}});var r=n(14890),i=n(35369);function o(e,t,n){return e.has(t)&&e.get(t)!==n?e.set(t,n):e}let a;!function(e){e.TRACK_CHANGED_SCENE_DESIGN="TRACK_CHANGED_SCENE_DESIGN",e.CLEAR_TRACKED_SLIDE="CLEAR_TRACKED_SLIDE",e.HIDE_SCENE_SECTIONS="HIDE_SCENE_SECTIONS",e.INVALIDATE_SCENE_SECTIONS_FOR_SLIDE="INVALIDATE_SCENE_SECTIONS_FOR_SLIDE",e.TRACK_NEW_SLIDE_ADDED="TRACK_NEW_SLIDE_ADDED",e.SET_SCENE_SELECTOR_SLIDE_ID="SET_SCENE_SELECTOR_SLIDE_ID",e.SET_INSERT_SELECTOR_SCENE_GROUP_ID="SET_INSERT_SELECTOR_SCENE_GROUP_ID",e.SET_SWAP_SCENE_DESIGN_SLIDE_ID="SET_SWAP_SCENE_DESIGN_SLIDE_ID",e.SHOW_FULLSCREEN_SELECTOR="SHOW_FULLSCREEN_SELECTOR",e.HIDE_FULLSCREEN_SELECTOR="HIDE_FULLSCREEN_SELECTOR",e.SHOW_FULLSCREEN_SWAP_SCENE_SELECTOR="SHOW_FULLSCREEN_SWAP_SCENE_SELECTOR",e.HIDE_FULLSCREEN_SWAP_SCENE_SELECTOR="HIDE_FULLSCREEN_SWAP_SCENE_SELECTOR",e.SHOW_INSERT_SELECTOR="SHOW_INSERT_SELECTOR",e.HIDE_INSERT_SELECTOR="HIDE_INSERT_SELECTOR",e.SET_ACTIVE_INSERT="SET_ACTIVE_INSERT",e.CLEAR_ACTIVE_INSERT="CLEAR_ACTIVE_INSERT",e.TRACK_SLIDE_TEXT_ASSET="TRACK_SLIDE_TEXT_ASSET",e.TRACK_SLIDE="TRACK_SLIDE",e.CLEAR_TRACKED_SLIDE_TEXT_ASSETS="CLEAR_TRACKED_SLIDE_TEXT_ASSETS",e.CLEAR_TEXT_ASSET_TRACKED_SLIDE="CLEAR_TEXT_ASSET_TRACKED_SLIDE",e.SET_CURRENTLY_EDITING_ASSET="SET_CURRENTLY_EDITING_ASSET",e.CLEAR_CURRENTLY_EDITING_ASSET="CLEAR_CURRENTLY_EDITING_ASSET",e.SELECT_SCENE="SELECT_SCENE",e.CLEAR_SCENE="CLEAR_SCENE",e.UPDATE_CACHED_SCENE_TEXT_FOR_MEDIA_QUERY="UPDATE_CACHED_SCENE_TEXT_FOR_MEDIA_QUERY"}(a||(a={}));var s=n(29829);const u=(0,s.PH)(a.SELECT_SCENE),c=(0,s.PH)(a.CLEAR_SCENE),d=(0,s.PH)(a.SHOW_FULLSCREEN_SELECTOR),l=(0,s.PH)(a.HIDE_FULLSCREEN_SELECTOR),_=(0,s.PH)(a.SHOW_FULLSCREEN_SWAP_SCENE_SELECTOR),E=(0,s.PH)(a.HIDE_FULLSCREEN_SWAP_SCENE_SELECTOR),f=(0,s.PH)(a.SHOW_INSERT_SELECTOR),p=(0,s.PH)(a.HIDE_INSERT_SELECTOR),T=(0,s.PH)(a.SET_ACTIVE_INSERT),h=(0,s.PH)(a.CLEAR_ACTIVE_INSERT),S=(0,s.PH)(a.TRACK_CHANGED_SCENE_DESIGN),g=(0,s.PH)(a.CLEAR_TRACKED_SLIDE),m=(0,s.PH)(a.TRACK_SLIDE_TEXT_ASSET),I=(0,s.PH)(a.TRACK_SLIDE),R=(0,s.PH)(a.CLEAR_TEXT_ASSET_TRACKED_SLIDE),A=(0,s.PH)(a.CLEAR_TRACKED_SLIDE_TEXT_ASSETS),y=(0,s.PH)(a.HIDE_SCENE_SECTIONS),v=(0,s.PH)(a.INVALIDATE_SCENE_SECTIONS_FOR_SLIDE),O=(0,s.PH)(a.SET_SCENE_SELECTOR_SLIDE_ID),D=(0,s.PH)(a.TRACK_NEW_SLIDE_ADDED),C=(0,s.PH)(a.SET_SWAP_SCENE_DESIGN_SLIDE_ID),N=(0,s.PH)(a.SET_INSERT_SELECTOR_SCENE_GROUP_ID),L=(0,s.PH)(a.SET_CURRENTLY_EDITING_ASSET),P=(0,s.PH)(a.CLEAR_CURRENTLY_EDITING_ASSET),b=(0,s.PH)(a.UPDATE_CACHED_SCENE_TEXT_FOR_MEDIA_QUERY);var U=n(59163);function w(e){return e.scenes}function M(e){return w(e).showInsertSelector}function V(e){return w(e).showFullscreenSceneSelector.get("visible")}function G(e){return w(e).showFullscreenSwapSceneSceneSelector}function k(e){return w(e).swapSceneDesignSlideId}function x(e){return w(e).sceneSelectorSlideId}function F(e){return w(e).setInsertBounds}function H(e){return w(e).activeInsert}function B(e){return null!==x(e)||null!==k(e)}function Z(e,t){return x(e)===t||k(e)===t}function j(e,t){return!!w(e).sceneSelectorValidMap.get(t)}function Y(e,t){const n=w(e);let r=null;return n&&n.sceneDesignTextAssetChangedSet.has(t)&&(r=n.sceneDesignTextAssetChangedSet.get(t)),r}function W(e,t,n,r){return null!==e.scenes.currentlyEditingAsset&&e.scenes.currentlyEditingAsset.get("sceneId")===t&&e.scenes.currentlyEditingAsset.get("subsceneIndex")===n&&e.scenes.currentlyEditingAsset.get("assetId")===r}function K(e,t,n){return e.scenes?null===e.scenes.currentlyEditingAsset||e.scenes.currentlyEditingAsset.get("sceneId")!==t||e.scenes.currentlyEditingAsset.get("subsceneIndex")!==n||e.scenes.currentlyEditingAsset.get("assetType")!==U.VideoData.MEDIA_ASSET_TYPE?null:e.scenes.currentlyEditingAsset.get("assetId"):null}function $(e,t,n){return e.scenes?null===e.scenes.currentlyEditingAsset||e.scenes.currentlyEditingAsset.get("sceneId")!==t||e.scenes.currentlyEditingAsset.get("subsceneIndex")!==n||e.scenes.currentlyEditingAsset.get("assetType")!==U.VideoData.ICON_ASSET_TYPE?null:e.scenes.currentlyEditingAsset.get("assetId"):null}function q(e,t,n){return e.scenes?null===e.scenes.currentlyEditingAsset||e.scenes.currentlyEditingAsset.get("sceneId")!==t||e.scenes.currentlyEditingAsset.get("subsceneIndex")!==n||"watermarkAsset"!==e.scenes.currentlyEditingAsset.get("assetType")?null:e.scenes.currentlyEditingAsset.get("assetId"):null}function X(e){return e.scenes?null===e.scenes.currentlyEditingAsset?null:e.scenes.currentlyEditingAsset.get("assetId"):null}function J(e){return e.scenes?null===e.scenes.currentlyEditingAsset?null:e.scenes.currentlyEditingAsset.get("sceneId"):null}function z(e){return e.scenes?null===e.scenes.currentlyEditingAsset?null:e.scenes.currentlyEditingAsset.get("subsceneIndex"):null}function Q(e){return e.scenes?null===e.scenes.currentlyEditingAsset?null:e.scenes.currentlyEditingAsset.get("assetType"):null}function ee(e,t){return w(e).currentSceneIdBySceneGroupId.get(t)}function te(e,t){return w(e).cachedSceneText.get(t)}const ne=(0,r.UY)({sceneDesignChangedSet:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Set(),t=arguments.length>1?arguments[1]:void 0;return S.match(t)?e.add(t.payload.sceneId):g.match(t)?e.delete(t.payload.sceneId):e},sceneSelectorValidMap:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments.length>1?arguments[1]:void 0;return D.match(t)?e.set(t.payload.sceneId,!0):v.match(t)?o(e,t.payload.sceneId,!1):e},sceneSelectorSlideId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return O.match(t)?t.payload.sceneId:C.match(t)?t.payload.sceneId?null:e:N.match(t)?t.payload.sceneGroupId?null:e:y.match(t)?null:e},swapSceneDesignSlideId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return C.match(t)?t.payload.sceneId:O.match(t)?t.payload.sceneId?null:e:N.match(t)?t.payload.sceneGroupId?null:e:E.match(t)||y.match(t)?null:e},showFullscreenSceneSelector:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map({visible:!1,targetSlideIndex:null,targetSlideId:null,targetSlideGroupId:null,sceneGroupCategory:null}),t=arguments.length>1?arguments[1]:void 0;return d.match(t)?e.merge({visible:!0,targetSlideIndex:t.payload.targetSlideIndex,targetSlideId:t.payload.targetSlideId,targetSlideGroupId:t.payload.targetSlideGroupId,sceneGroupCategory:t.payload.sceneGroupCategory}):l.match(t)||y.match(t)?e.merge({visible:!1,targetSlideIndex:null,targetSlideId:null,targetSlideGroupId:null,sceneGroupCategory:null}):e},showFullscreenSwapSceneSceneSelector:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return!!_.match(t)||!E.match(t)&&!y.match(t)&&e},sceneDesignTextAssetChangedSet:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments.length>1?arguments[1]:void 0;if(I.match(t))return e.set(t.payload.sceneId,i.default.List([]));if(m.match(t)){const n=e.get(t.payload.sceneId).push(t.payload.assetId);return e.set(t.payload.sceneId,n)}if(R.match(t))return e.delete(t.payload.sceneId);if(A.match(t)){if(e.get(t.payload.sceneId)){const n=e.get(t.payload.sceneId).clear();return e.set(t.payload.sceneId,n)}return e}return e},currentlyEditingAsset:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return L.match(t)?i.default.fromJS({sceneId:t.payload.sceneId,subsceneIndex:t.payload.subsceneIndex,assetId:t.payload.assetId,assetType:t.payload.assetType}):P.match(t)?null:e},showInsertSelector:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return!!f.match(t)||!p.match(t)&&!y.match(t)&&e},activeInsert:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map({sceneId:null,sceneGroupId:null}),t=arguments.length>1?arguments[1]:void 0;return T.match(t)?e.merge({sceneId:t.payload.sceneId,sceneGroupId:t.payload.sceneGroupId}):h.match(t)?e.merge({sceneId:null,sceneGroupId:null}):e},setInsertBounds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map({startTime:null,endTime:null}),t=arguments.length>1?arguments[1]:void 0;return f.match(t)?e.merge({startTime:t.payload.startTime,endTime:t.payload.endTime,sceneId:t.payload.sceneId}):p.match(t)||y.match(t)?e.merge({startTime:null,endTime:null,sceneId:null}):e},currentSceneIdBySceneGroupId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments.length>1?arguments[1]:void 0;return u.match(t)?e.set(t.payload.sceneGroupId,t.payload.sceneId):c.match(t)?i.default.Map():e},cachedSceneText:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments.length>1?arguments[1]:void 0;return b.match(t)?e.merge(t.payload):e}});var re=ne},34974:function(e,t,n){"use strict";n.d(t,{VF:function(){return R.V},V_:function(){return g},lh:function(){return p},zE:function(){return T},hZ:function(){return I.hZ},Jq:function(){return I.Jq},Gh:function(){return I.Gh},MH:function(){return I.MH},_b:function(){return S},Iw:function(){return o},sl:function(){return y},rd:function(){return A},C:function(){return a},mJ:function(){return h}});var r=n(14890),i=n(43187);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)();return{type:R.V.STORE_EDITOR_STATE,editorState:e,systemTriggered:t,parentActionGroup:n}}function a(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)();return{type:R.V.UPDATE_EDITOR,editorUpdated:e,systemTriggered:t,parentActionGroup:n}}var s=n(9041),u=n(50361),c=n.n(u),d=n(63105),l=n.n(d),_=n(55973),E=n(28074),f=n(84829);function p(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)();return m((0,_.V9)(e),t,n)}function T(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)();return m((0,_.fj)(e),t,n)}function h(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)(),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(i,o)=>{const s=(0,I.Gh)(o());let u=c()(s.blocks);u=l()(u,(function(t){return"atomic"!==t.type||Object.prototype.hasOwnProperty.call(e,t.text)})),i(m(Object.assign({},s,{blocks:u}),t,n)),i(a(!0,t,n)),t&&r&&i((0,f.__)())}}function S(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return n=>{const r=$(t._node),i=$(r.parents()[2]);e?($(".public-DraftEditor-content").addClass("no-user-select"),$(".public-DraftEditor-content").prop("contenteditable",!1),i.prop("contenteditable",!1)):($(".public-DraftEditor-content").removeClass("no-user-select"),$(".public-DraftEditor-content").prop("contenteditable",!0),i.prop("contenteditable",!0))}}function g(e,t){return n=>{$.ajax({method:"POST",url:SERVER.URLS.sentence_highlights,data:{video_id:e,sentence:t},beforeSend:function(e){e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)}})}}function m(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)();return r=>{const i=(0,s.convertFromRaw)(e),a=s.EditorState.createWithContent(i),{articleSentences:u}=(0,_.RV)(a);r(o(a,t,n)),r((0,E.vgK)(null,u,null,t,n))}}var I=n(97303),R=n(48970);const A=(0,r.UY)({editor_state:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===R.V.STORE_EDITOR_STATE?t.editorState:e}}),y=(0,r.UY)({editor_updated:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===R.V.UPDATE_EDITOR?t.editorUpdated:e}})},97303:function(e,t,n){"use strict";n.d(t,{Gh:function(){return a},Jq:function(){return s},MH:function(){return o},hZ:function(){return i}});var r=n(48970);const i=e=>(e=>e.undoable.present.story_editor)(e).editor_state,o=e=>{var t,n;return!(null!==(t=i(e))&&void 0!==t&&null!==(n=t.getCurrentContent())&&void 0!==n&&n.hasText())},a=e=>(0,r.U)(i(e)),s=e=>e.story_editor.editor_updated},48970:function(e,t,n){"use strict";n.d(t,{U:function(){return o},V:function(){return i}});var r=n(9041);const i={STORE_EDITOR_STATE:"STORE_EDITOR_STATE",UPDATE_EDITOR:"UPDATE_EDITOR"},o=e=>{const t=e.getCurrentContent();try{return(0,r.convertToRaw)(t)}catch{return null}}},46638:function(e,t,n){"use strict";n.d(t,{kz:function(){return h},yL:function(){return T},tr:function(){return p},ZP:function(){return g},sM:function(){return _},Nv:function(){return f},O2:function(){return E},mB:function(){return a.mB},Ht:function(){return a.Ht},Tg:function(){return a.Tg}});var r=n(14890),i=n(45970);function o(e){return i.ZP.newFromIdPrefix(e).data}var a=n(58509),s=n(28216),u=n(35369),c=n(84829),d=n(34974),l=n(43187);function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,l.Z)(),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(i,o)=>{const l=(0,c.gJ)(o());$.ajax({url:SERVER.URLS.article_media,method:"GET",data:{video_id:l},success:e=>{const o=e.reduce(((e,t)=>(e[t.image.source_id]=u.default.fromJS(t),e)),{});(0,s.dC)((()=>{i((0,a.UM)(o,t,n)),i((0,d.mJ)(o,t,n,r))}))},error:(r,o,a)=>{if(424===a.status&&a.responseJSON&&a.responseJSON.retryable){if(e>50)return;return setTimeout((()=>i(_(e+1,t,n))),1e3*(1+Math.max(0,Math.log10(Math.pow(e,3.5)))))}}})}}function E(e){return e.undoable.present.story}function f(e){return E(e).article_url}const p={STORE_ARTICLE_DATA:"STORE_ARTICLE_DATA",STORE_ARTICLE_ID:"STORE_ARTICLE_ID",STORE_ARTICLE_URL:"STORE_ARTICLE_URL",START_HOVER_ON_SENTENCE:"START_HOVER_ON_SENTENCE",END_HOVER_ON_SENTENCE:"END_HOVER_ON_SENTENCE",ASSOCIATE_SLIDE_FOR_SENTENCE:"ASSOCIATE_SLIDE_FOR_SENTENCE",DISASSOCIATE_SLIDE_FOR_SENTENCE:"DISASSOCIATE_SLIDE_FOR_SENTENCE",STORE_ARTICLE_MEDIA:"STORE_ARTICLE_MEDIA",UPDATE_SLIDES_FOR_SENTENCES:"UPDATE_SLIDES_FOR_SENTENCES"},T={sentences:"sentence",slides:"slide"},h={UNSELECTED:"unselected",SELECTED:"selected"},S=(0,r.UY)({article_id:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.STORE_ARTICLE_DATA:return t.article_id;case p.STORE_ARTICLE_ID:return t.articleId;default:return e}},article_url:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.STORE_ARTICLE_URL:case p.STORE_ARTICLE_DATA:return t.article_url;default:return e}},article_loading:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type!==p.STORE_ARTICLE_DATA&&e},sentences:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(T.sentences),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.STORE_ARTICLE_DATA:return t.sentences;case p.START_HOVER_ON_SENTENCE:{const n=new i.ZP(e);return n.updateById(t.sentence_id,{key:["hovering"],value:!0}),n.data}case p.END_HOVER_ON_SENTENCE:{const n=new i.ZP(e);return n.updateById(t.sentence_id,{key:["hovering"],value:!1}),n.data}case p.ASSOCIATE_SLIDE_FOR_SENTENCE:{const n=new i.ZP(e);return n.updateById(t.sentence_id,{key:["slides"],value:e=>e.push(t.slide_id)}),n.updateById(t.sentence_id,{key:["status"],value:h.SELECTED}),n.data}case p.DISASSOCIATE_SLIDE_FOR_SENTENCE:{const n=new i.ZP(e);n.updateById(t.sentence_id,{key:["slides"],value:t.slide_id,removeFromList:!0});const r=n.getById(t.sentence_id);return r&&r.get("slides").size<=0&&n.updateById(t.sentence_id,{key:["status"],value:h.UNSELECTED}),n.data}case p.UPDATE_SLIDES_FOR_SENTENCES:{const n=t.allSlideIds,r=new i.ZP(e);return r.forEach(((e,t)=>{if(e&&e.get("slides").size>0){const t=e.get("slides").filter((e=>-1!==n.indexOf(e)));0===t.size&&r.updateById(e.get("_id"),{key:["status"],value:h.UNSELECTED}),r.updateById(e.get("_id"),{key:["slides"],value:t})}})),r.data}default:return e}},article_media:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===p.STORE_ARTICLE_MEDIA?t.article_media:e}});var g=S},58509:function(e,t,n){"use strict";n.d(t,{Ht:function(){return d},LN:function(){return c},Tg:function(){return l},UM:function(){return u},mB:function(){return s}});var r=n(45970),i=n(46638),o=n(43187);function a(e){try{const t=new URL(e);return t.hostname.indexOf("googleapis")>-1||"localhost"===t.hostname||"lumen5.com"===t.hostname&&t.pathname.indexOf("/blank")>-1?"":e}catch(e){return""}}function s(e,t,n){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,o.Z)();const c=r.ZP.newFromIdPrefix(i.yL.sentences);for(let t=0;t<e.length;t++)for(let n=0;n<e[t].value.length;n++){const r=e[t].value[n];r.hovering=!1,r.status=i.kz.UNSELECTED,r.slides=[],c.pushJSItem(r)}const d=c.data;return{type:i.tr.STORE_ARTICLE_DATA,sentences:d,article_id:t,article_url:a(n),systemTriggered:s,parentActionGroup:u}}function u(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.Z)();return{type:i.tr.STORE_ARTICLE_MEDIA,article_media:e,systemTriggered:t,parentActionGroup:n}}function c(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.Z)();return{type:i.tr.UPDATE_SLIDES_FOR_SENTENCES,allSlideIds:e,systemTriggered:t,parentActionGroup:n}}function d(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.Z)();return{type:i.tr.STORE_ARTICLE_ID,articleId:e,systemTriggered:t,parentActionGroup:n}}function l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.Z)();return{type:i.tr.STORE_ARTICLE_URL,article_url:a(e),systemTriggered:t,parentActionGroup:n}}},3702:function(e,t,n){"use strict";n.d(t,{vN:function(){return ie.vN},qb:function(){return a},Ho:function(){return j},PB:function(){return ie.PB},LB:function(){return ie.LB},Id:function(){return ie.Id},KX:function(){return _e},ff:function(){return Ee},ZP:function(){return De},_O:function(){return ye},Xc:function(){return Ae},Tl:function(){return ie.Tl},Bq:function(){return Se},ef:function(){return ve},Tp:function(){return ie.Tp},XX:function(){return ie.XX},Fg:function(){return ie.Fg},ax:function(){return ie.ax},LD:function(){return ie.LD},hK:function(){return ie.hK},Bk:function(){return ie.Bk},yS:function(){return ie.yS},vL:function(){return ie.vL},dY:function(){return ie.dY},yr:function(){return ie.yr},kz:function(){return ie.kz},oL:function(){return ie.oL},y6:function(){return ie.y6},Se:function(){return ie.Se},jU:function(){return ie.jU},s5:function(){return ie.s5},xt:function(){return ie.xt},l3:function(){return ie.l3},$3:function(){return ie.$3},zZ:function(){return ie.zZ},aG:function(){return ie.aG},y9:function(){return ie.y9},OW:function(){return ie.OW},jt:function(){return ie.jt},ZA:function(){return ie.ZA},OY:function(){return ie.OY},Ye:function(){return ie.Ye},Ok:function(){return ie.Ok},Dw:function(){return ie.Dw},u2:function(){return ie.u2},CB:function(){return ie.CB},ro:function(){return ie.ro},oS:function(){return ie.oS},rx:function(){return ie.rx},kv:function(){return ie.kv},Ek:function(){return ie.Ek},Cf:function(){return ie.Cf},vK:function(){return ie.vK},hn:function(){return ie.hn},RK:function(){return ie.RK},I0:function(){return ie.I0},re:function(){return ie.re},b8:function(){return ie.b8},Dz:function(){return ie.Dz},JQ:function(){return ie.JQ},d4:function(){return ie.d4},ib:function(){return ie.ib},CQ:function(){return ie.CQ},e3:function(){return ie.e3},LK:function(){return ie.LK},NK:function(){return ie.NK},c7:function(){return ie.c7},yR:function(){return ie.yR},Sn:function(){return ie.Sn},E7:function(){return ue},it:function(){return de},hw:function(){return ce},ZW:function(){return pe},jI:function(){return ae},nM:function(){return se},YK:function(){return s},Iv:function(){return ge},Xu:function(){return Re},_T:function(){return J},jm:function(){return F},g:function(){return H},ZT:function(){return Z},v_:function(){return K},p9:function(){return q},Gk:function(){return Y},Td:function(){return w},a0:function(){return f},c$:function(){return z},GR:function(){return R},XA:function(){return y},i1:function(){return I},tu:function(){return S},pq:function(){return A},aU:function(){return h},Mx:function(){return g},nu:function(){return T},PD:function(){return m},nj:function(){return M},Jc:function(){return v},M4:function(){return p},HI:function(){return O},YE:function(){return C},QS:function(){return D},ZD:function(){return N},i_:function(){return E},Uy:function(){return b},h0:function(){return P},DD:function(){return L},LI:function(){return x},km:function(){return Q},MN:function(){return X},gR:function(){return fe},C2:function(){return me},IB:function(){return Ie},K$:function(){return le},yd:function(){return Te},RO:function(){return he}});var r=n(14890),i=n(35369),o=n(45970);let a,s,u;!function(e){e.Unknown="unknown",e.Draft="draft",e.Active="active",e.Archived="archived"}(a||(a={})),function(e){e.LOWER_THIRDS="lower_thirds",e.TEXT_CALLOUT="text_callout",e.CUTAWAY="cutaway",e.SPLITSCREEN_MEDIA="splitscreen_media",e.SPLITSCREEN_STATISTIC="splitscreen_statistic",e.SPLITSCREEN_LIST="splitscreen_list",e.SPLITSCREEN_ICON="splitscreen_icon",e.STATISTIC="statistic",e.TEXT="text",e.ICON="icon",e.ZOOM="zoom",e.LIST="list"}(s||(s={})),function(e){e.STORE_TEMPLATE_CATEGORIES="STORE_TEMPLATE_CATEGORIES",e.STORE_TEMPLATES="STORE_TEMPLATES",e.STORE_TEMPLATE="STORE_TEMPLATE",e.SET_TEMPLATE_DATA="SET_TEMPLATE_DATA",e.SET_TEMPLATE_STATUS="SET_TEMPLATE_STATUS",e.SET_TEMPLATE_COLOR_PALETTES="SET_TEMPLATE_COLOR_PALETTES",e.SET_TEMPLATE_DISPLAY_NAME="SET_TEMPLATE_DISPLAY_NAME",e.SET_TEMPLATE_DEFAULT_STORYBOARD_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_STORYBOARD_SCENE_DESIGN",e.SET_TEMPLATE_DEFAULT_OUTRO_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_OUTRO_SCENE_DESIGN",e.SET_TEMPLATE_DEFAULT_ICON_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_ICON_SCENE_DESIGN",e.SET_TEMPLATE_DEFAULT_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_SCENE_DESIGN",e.SET_TEMPLATE_IMAGE_URL="SET_TEMPLATE_IMAGE_URL",e.SET_TEMPLATE_MP4_URL="SET_TEMPLATE_MP4_URL",e.SET_TEMPLATE_LANDSCAPE_MP4_URL="SET_TEMPLATE_LANDSCAPE_MP4_URL",e.SET_TEMPLATE_SQUARE_MP4_URL="SET_TEMPLATE_SQUARE_MP4_URL",e.SET_TEMPLATE_VERTICAL_MP4_URL="SET_TEMPLATE_VERTICAL_MP4_URL",e.SET_TEMPLATE_TEXT_MIN_SIZE="SET_TEMPLATE_TEXT_MIN_SIZE",e.SET_TEMPLATE_TEXT_MAX_SIZE="SET_TEMPLATE_TEXT_MAX_SIZE",e.SET_TEMPLATE_ORDERS="SET_TEMPLATE_ORDERS",e.SET_TEMPLATE_CATEGORY_ID="SET_TEMPLATE_CATEGORY_ID",e.SET_TEMPLATE_DEFAULT_TEXT_SIZE_OPTIONS="SET_TEMPLATE_DEFAULT_TEXT_SIZE_OPTIONS",e.SET_TEMPLATE_DEFAULT_TALKING_HEAD_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_TALKING_HEAD_SCENE_DESIGN",e.SET_TEMPLATE_DEFAULT_CUTAWAY_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_CUTAWAY_SCENE_DESIGN",e.SET_TEMPLATE_DEFAULT_CALLOUT_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_CALLOUT_SCENE_DESIGN",e.SET_TEMPLATE_DEFAULT_LOWER_THIRD_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_LOWER_THIRD_SCENE_DESIGN",e.SET_TEMPLATE_DEFAULT_CAPTION_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_CAPTION_SCENE_DESIGN",e.SET_TEMPLATE_DEFAULT_VOICEOVER_SCENE_DESIGN="SET_TEMPLATE_DEFAULT_VOICEOVER_SCENE_DESIGN",e.STORE_SCENE_DESIGNS="STORE_SCENE_DESIGNS",e.STORE_SCENE_DESIGN="STORE_SCENE_DESIGN",e.STORE_ALL_SCENE_DESIGN_IDS_PER_TEMPLATE="STORE_ALL_SCENE_DESIGN_IDS_PER_TEMPLATE",e.STORE_RECENT_SELECTED_SCENE_DESIGN="STORE_RECENT_SELECTED_SCENE_DESIGN",e.SET_SCENE_DESIGN_ATTRIBUTES_RECOMMENDATION="SET_SCENE_DESIGN_ATTRIBUTES_RECOMMENDATION",e.SET_SCENE_DESIGN_CREATION_RECOMMENDATIONS="SET_SCENE_DESIGN_CREATION_RECOMMENDATIONS",e.SET_SCENE_DESIGN_DATA="SET_SCENE_DESIGN_DATA",e.SET_SCENE_DESIGN_STATUS="SET_SCENE_DESIGN_STATUS",e.SET_SCENE_DESIGN_ORDERS="SET_SCENE_DESIGN_ORDERS",e.STORE_DISPLAY_GROUPS="STORE_DISPLAY_GROUPS",e.SET_DISPLAY_GROUP_NAME="SET_DISPLAY_GROUP_NAME",e.SET_SCENE_DESIGN_DISPLAY_GROUP="SET_SCENE_DESIGN_DISPLAY_GROUP",e.SET_SCENE_DESIGN_RECOMMENDATION_TAG="SET_SCENE_DESIGN_RECOMMENDATION_TAG",e.SET_ACTIVE_TEMPLATE_CATEGORY="SET_ACTIVE_TEMPLATE_CATEGORY",e.SET_TEMPLATE_COLOR_SHUFFLE_ENABLED="SET_TEMPLATE_COLOR_SHUFFLE_ENABLED",e.STORE_LARGEST_MEDIA_SCENE_DESIGN_ID="STORE_LARGEST_MEDIA_SCENE_DESIGN_ID"}(u||(u={}));var c=n(29829);const d=(0,c.PH)(u.STORE_TEMPLATE_CATEGORIES),l=(0,c.PH)(u.STORE_TEMPLATES),_=(0,c.PH)(u.STORE_TEMPLATE),E=(0,c.PH)(u.SET_TEMPLATE_STATUS),f=(0,c.PH)(u.SET_TEMPLATE_COLOR_PALETTES),p=(0,c.PH)(u.SET_TEMPLATE_DISPLAY_NAME),T=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_STORYBOARD_SCENE_DESIGN),h=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_OUTRO_SCENE_DESIGN),S=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_ICON_SCENE_DESIGN),g=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_SCENE_DESIGN),m=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_TALKING_HEAD_SCENE_DESIGN),I=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_CUTAWAY_SCENE_DESIGN),R=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_CALLOUT_SCENE_DESIGN),A=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_LOWER_THIRD_SCENE_DESIGN),y=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_CAPTION_SCENE_DESIGN),v=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_VOICEOVER_SCENE_DESIGN),O=(0,c.PH)(u.SET_TEMPLATE_IMAGE_URL),D=(0,c.PH)(u.SET_TEMPLATE_MP4_URL),C=(0,c.PH)(u.SET_TEMPLATE_LANDSCAPE_MP4_URL),N=(0,c.PH)(u.SET_TEMPLATE_SQUARE_MP4_URL),L=(0,c.PH)(u.SET_TEMPLATE_VERTICAL_MP4_URL),P=(0,c.PH)(u.SET_TEMPLATE_TEXT_MIN_SIZE),b=(0,c.PH)(u.SET_TEMPLATE_TEXT_MAX_SIZE),U=(0,c.PH)(u.SET_TEMPLATE_ORDERS),w=(0,c.PH)(u.SET_TEMPLATE_CATEGORY_ID),M=(0,c.PH)(u.SET_TEMPLATE_DEFAULT_TEXT_SIZE_OPTIONS),V=(0,c.PH)(u.STORE_ALL_SCENE_DESIGN_IDS_PER_TEMPLATE),G=(0,c.PH)(u.STORE_SCENE_DESIGNS),k=(0,c.PH)(u.STORE_SCENE_DESIGN),x=(0,c.PH)(u.STORE_DISPLAY_GROUPS),F=(0,c.PH)(u.SET_DISPLAY_GROUP_NAME),H=(0,c.PH)(u.SET_SCENE_DESIGN_ATTRIBUTES_RECOMMENDATION),B=(0,c.PH)(u.SET_SCENE_DESIGN_CREATION_RECOMMENDATIONS),Z=(0,c.PH)(u.SET_SCENE_DESIGN_DATA),j=(0,c.PH)(u.SET_TEMPLATE_DATA),Y=(0,c.PH)(u.SET_SCENE_DESIGN_STATUS),W=(0,c.PH)(u.SET_SCENE_DESIGN_ORDERS),K=(0,c.PH)(u.SET_SCENE_DESIGN_DISPLAY_GROUP),q=(0,c.PH)(u.SET_SCENE_DESIGN_RECOMMENDATION_TAG),X=(0,c.PH)(u.STORE_RECENT_SELECTED_SCENE_DESIGN),J=(0,c.PH)(u.SET_ACTIVE_TEMPLATE_CATEGORY),z=(0,c.PH)(u.SET_TEMPLATE_COLOR_SHUFFLE_ENABLED),Q=(0,c.PH)(u.STORE_LARGEST_MEDIA_SCENE_DESIGN_ID);class ee extends Error{}class te{static getTemplates(){return new Promise(((e,t)=>{$.ajax({url:SERVER.URLS.templates,method:"GET",dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{e(t)},error:(e,n,r)=>{t(r)}})}))}static getTemplate(e){return new Promise(((t,n)=>{$.ajax({url:SERVER.URLS.template_detail(e),method:"GET",dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t(e)},error:(e,t,r)=>{n("Not Found"===r?new ee(r):r)}})}))}static getTemplateCategories(){return new Promise(((e,t)=>{$.ajax({url:SERVER.URLS.template_categories,method:"GET",dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{e(t)},error:(e,n,r)=>{t(r)}})}))}static getSceneDesigns(e){let{templateId:t,only_list_scene_designs:n}=e;return new Promise(((e,r)=>{$.ajax({url:SERVER.URLS.scene_designs,method:"GET",data:{template_id:t,only_list_scene_designs:n},dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{e(t)},error:(e,t,n)=>{r(n)}})}))}static deleteTemplate(e){return new Promise(((t,n)=>{$.ajax({url:SERVER.URLS.template_detail(e),method:"DELETE",dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t(e)},error:(e,t,r)=>{n(r)}})}))}static createSceneDesign(e){return new Promise(((t,n)=>{$.ajax({url:SERVER.URLS.scene_designs,method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t(e)},error:(e,t,r)=>{n(r)}})}))}static deleteSceneDesign(e){return new Promise(((t,n)=>{$.ajax({url:SERVER.URLS.scene_design_detail(e),method:"DELETE",dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t(e)},error:(e,t,r)=>{n(r)}})}))}static getDisplayGroups(e){return new Promise(((t,n)=>{$.ajax({url:SERVER.URLS.template_display_groups(e),method:"GET",dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t(e)},error:(e,t,r)=>{n(r)}})}))}}var ne=n(59163),re=n(28074),ie=n(74635),oe=n(62104);function ae(){return e=>{(async()=>{const t=await te.getTemplates();e(l({templates:t.results}))})()}}function se(){return e=>(async()=>{const t=await te.getTemplates();e(l({templates:t.results}));const n=await te.getTemplateCategories();e(d({categories:n.results}))})()}function ue(){return e=>new Promise((t=>{(async()=>{const n=await te.getSceneDesigns({only_list_scene_designs:!0});e(V({allSceneDesignIdsPerTemplate:n})),t()})()}))}function ce(e){return(t,n)=>new Promise((r=>{const i=(0,ie.b8)(n(),e);if(i.size>0&&i.every((e=>!!(0,ie.y6)(n(),e))))return r();(async()=>{const n=await te.getSceneDesigns({templateId:e});t(G({sceneDesigns:n.results})),r()})()}))}function de(e){return t=>new Promise((n=>{(async()=>{const r=await te.getDisplayGroups(e);t(x({displayGroups:r.results})),n()})()}))}function le(e,t,n){const r={display_name:t.get("display_name"),order:t.get("order")};return i=>new Promise(((i,o)=>{$.ajax({url:`/api/templates/${e}/display-groups/${t.get("id")}/`,method:"PATCH",dataType:"json",contentType:"application/json",data:JSON.stringify(r),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{n.showFeedback({message:"Display group name saved"}),i()},error:(e,t,r)=>{n.showFeedback({errorMessage:e.responseText}),o(e.responseText)}})}))}function _e(e,t){return(n,r)=>{const i=(0,ie.hK)(r(),e).delete("id").set("template",t);return new Promise(((e,n)=>{$.ajax({url:`/api/templates/${t}/display-groups/`,method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{e(t)},error:(e,t,r)=>{var i;n((null===(i=e.responseJSON)||void 0===i?void 0:i.error)||r)}})}))}}function Ee(e){return(t,n)=>{const r={display_name:`New display group #${(0,ie.Wr)(n())}`,template:e,order:null};return new Promise(((n,i)=>{$.ajax({url:`/api/templates/${e}/display-groups/`,method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(r),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:r=>{t(de(e)),n()},error:(e,t,n)=>{var r;i((null===(r=e.responseJSON)||void 0===r?void 0:r.error)||n)}})}))}}function fe(e,t){return(n,r)=>{const i=e.map(((e,t)=>({id:parseInt(e),order:t})));return new Promise(((e,r)=>{$.ajax({url:`/api/templates/${t}/display-groups/order/`,method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:r=>{n(de(t)),e(r)},error:(e,t,n)=>{var i;r((null===(i=e.responseJSON)||void 0===i?void 0:i.error)||n)}})}))}}function pe(e){return(t,n)=>new Promise(((r,o)=>{(async()=>{try{if(!(0,ie._V)(n(),e)){const n=await te.getTemplate(e);t(_({template:n}))}if(!(0,ie.Sr)(n(),e)){const n=await te.getSceneDesigns({templateId:e});t(G({sceneDesigns:n.results}))}if(!(0,ie.BD)(n())){const n=await te.getDisplayGroups(e);t(x({displayGroups:n.results}))}r()}catch(n){n instanceof ee&&t((0,oe.K4)({modal_id:oe.fX.GENERIC_ERROR,modal_context:i.default.fromJS({title:"Oops!",text:`Error loading template "${e}". This template may no longer exist, or you might not have access to it.`})})),o(n)}})()}))}function Te(e,t){return n=>{n(H({attributesRecommendation:e,sceneDesignId:t}))}}function he(e,t){return n=>{n(B({creationRecommendations:e,sceneDesignId:t}))}}function Se(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(r,i)=>{const o=ne.VideoData.getTemplateIdFromSceneDesignId(e),a=ne.VideoData.getTemplateIdFromSceneDesignId(t),s=(0,ie.kv)(i(),o).toJS(),u=(0,ie.lk)(i(),o).toJS(),c=(0,ie.kv)(i(),a).toJS(),d=(0,ie.lk)(i(),a).toJS(),l=[];u.forEach(((e,t)=>{if(t<d.length)return;const n=ne.VideoData.templateColorByIndex(t),r=ne.VideoData.templateColorByIndex(0);l.push([n,r])})),s.forEach(((e,t)=>{if(t<c.length)return;const n=ne.VideoData.templateFontsByIndex(t),r=ne.VideoData.templateFontsByIndex(0);l.push([n,r])}));const _=e=>{if(0===l.length)return e;let t=JSON.stringify(e);return l.forEach((e=>{let[n,r]=e;t=t.replaceAll(n,r)})),JSON.parse(t)},E=(0,ie.y6)(i(),e).toJS();return E.template=a,E.id=t,E.status=ne.VideoData.TEMPLATE_STATUS_DRAFT,E.landscape_data.sceneDesign=t,E.square_data.sceneDesign=t,E.vertical_data.sceneDesign=t,E.landscape_data=_(E.landscape_data),E.vertical_data=_(E.vertical_data),E.square_data=_(E.square_data),null!==n&&(E.display_group=n(E.display_group)),E.order=(0,ie.B4)(i(),a)+1,new Promise(((e,t)=>{$.ajax({url:"/api/scene-designs/",method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(E),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{r(k({sceneDesign:t})),e()},error:(e,n,r)=>{t(e.responseText)}})}))}}function ge(e){return(t,n)=>{const r=(0,ie.y6)(n(),e).toJS();return new Promise(((t,n)=>{$.ajax({url:`/api/scene-designs/${e}/`,method:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(r),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t(e)},error:(e,t,r)=>{var i;n((null===(i=e.responseJSON)||void 0===i?void 0:i.error)||r)}})}))}}function me(e,t){return(n,r)=>{const i=((e,t,n)=>{const r=new o.ZP(e.templates.sceneDesigns),i=(0,ie.b8)(e,t).toJS(),a=n.reduce(((e,t,n)=>(e[t]=n,e)),{});return i.filter((e=>{const t=r.getById(e);return a[e]!==t.get("order")}))})(r(),e,t);n(W({templateId:e,orderedSceneDesignIds:t}));const a=i.map((e=>(0,ie.y6)(r(),e))).map((e=>(e=>new Promise(((t,n)=>{$.ajax({url:`/api/scene-designs/${e.get("id")}/`,method:"PATCH",dataType:"json",contentType:"application/json",data:JSON.stringify({order:e.get("order")}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t(e)},error:(e,t,r)=>{var i;n((null===(i=e.responseJSON)||void 0===i?void 0:i.error)||r)}})})))(e)));return Promise.all(a)}}function Ie(e){return(t,n)=>{const r=((e,t)=>{const n=new o.ZP(e.templates.templatesList),r=(0,ie.Ek)(e).toJS(),i=t.reduce(((e,t,n)=>(e[t]=n,e)),{});return r.filter((e=>{const t=n.getById(e);return i[e]!==t.get("order")}))})(n(),e);t(U({orderedTemplateIds:e}));const i=r.map((e=>(0,ie.l3)(n(),e))).map((e=>(e=>new Promise(((t,n)=>{$.ajax({url:`/api/templates/${e.get("id")}/`,method:"PATCH",dataType:"json",contentType:"application/json",data:JSON.stringify({order:e.get("order")}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t(e)},error:(e,t,r)=>{var i;n((null===(i=e.responseJSON)||void 0===i?void 0:i.error)||r)}})})))(e)));return Promise.all(i)}}function Re(e){return(t,n)=>{const r=(0,ie.l3)(n(),e).toJS();return new Promise(((t,n)=>{$.ajax({url:`/api/templates/${e}/`,method:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(r),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t(e)},error:(e,t,r)=>{n(e.responseJSON??r)}})}))}}function Ae(e){return(t,n)=>new Promise(((t,n)=>{$.ajax({url:`/api/templates/${e}/`,method:"DELETE",dataType:"json",contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t()},error:(e,t,r)=>{n(r)}})}))}function ye(e){return(t,n)=>te.deleteSceneDesign(e)}function ve(e,t,n){return(r,i)=>{const o=(0,ie.l3)(i(),e).toJS(),a=(0,ie.xt)(i(),e).toJS();return(0,re.dl7)((e=>{e.template.watermark.availablePositions=ne.VideoData.WATERMARK_POSITIONS,o.template_data=e.template.save()}),a),o.id=t,o.display_name=n,o.default_callout_scene_design=null,o.default_caption_scene_design=null,o.default_cutaway_scene_design=null,o.default_icon_scene_design=null,o.default_lower_third_scene_design=null,o.default_outro_scene_design=null,o.default_scene_design=null,o.default_storyboard_scene_design=null,o.default_talking_head_scene_design=null,o.default_voiceover_scene_design=null,o.status=ne.VideoData.TEMPLATE_STATUS_DRAFT,o.teams=[],o.template_category=(0,ie.Fu)(i()),o.template_data=ne.VideoData.duplicateTemplateData(o.template_data,t),new Promise(((e,t)=>{$.ajax({url:"/api/templates/",method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(o),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{r(_({template:t})),e(t)},error:(e,n,r)=>{t(e.responseJSON??r)}})}))}}const Oe=(0,r.UY)({templateCategories:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix("templateCategory").data,t=arguments.length>1?arguments[1]:void 0;if(d.match(t)){const n=new o.ZP(e);return t.payload.categories.forEach((e=>{n.pushJSItem(e,"id")})),n.data}return e},templatesList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix("templatesList").data,t=arguments.length>1?arguments[1]:void 0;if(l.match(t)){const n=new o.ZP(e);return t.payload.templates.sort(((e,t)=>e.order-t.order)).forEach((e=>{n.pushJSItem(e,"id")})),n.data}if(_.match(t)){const n=new o.ZP(e),r=t.payload.template;return n.pushJSItem(r,"id"),n.data}if(j.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["template_data"],value:i.default.fromJS(t.payload.data)}),n.data}if(E.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["status"],value:t.payload.status}),n.data}if(f.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["palette_data"],value:i.default.fromJS(t.payload.palettes)}),n.data}if(p.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["display_name"],value:t.payload.displayName}),n.data}if(T.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_storyboard_scene_design"],value:t.payload.sceneDesignId}),n.data}if(h.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_outro_scene_design"],value:t.payload.sceneDesignId}),n.data}if(S.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_icon_scene_design"],value:t.payload.sceneDesignId}),n.data}if(g.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_scene_design"],value:t.payload.sceneDesignId}),n.data}if(m.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_talking_head_scene_design"],value:t.payload.sceneDesignId}),n.data}if(I.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_cutaway_scene_design"],value:t.payload.sceneDesignId}),n.data}if(R.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_callout_scene_design"],value:t.payload.sceneDesignId}),n.data}if(A.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_lower_third_scene_design"],value:t.payload.sceneDesignId}),n.data}if(y.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_caption_scene_design"],value:t.payload.sceneDesignId}),n.data}if(v.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_voiceover_scene_design"],value:t.payload.sceneDesignId}),n.data}if(O.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["image_url"],value:t.payload.imageUrl}),n.data}if(D.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["mp4_url"],value:t.payload.mp4Url}),n.data}if(C.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["landscape_mp4_url"],value:t.payload.landscapeMp4Url}),n.data}if(N.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["square_mp4_url"],value:t.payload.squareMp4Url}),n.data}if(L.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["vertical_mp4_url"],value:t.payload.verticalMp4Url}),n.data}if(P.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["text_min_size"],value:t.payload.textMinSize}),n.data}if(b.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["text_max_size"],value:t.payload.textMaxSize}),n.data}if(U.match(t)){const n=new o.ZP(e);t.payload.orderedTemplateIds.forEach(((e,t)=>{n.updateById(e,{key:["order"],value:t})}));const r=o.ZP.newFromIdPrefix("templatesList");return t.payload.orderedTemplateIds.forEach((e=>{r.pushItem(n.getById(e),"id")})),r.data}if(w.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["template_category"],value:t.payload.categoryId}),n.data}if(M.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["default_text_size_options"],value:t.payload.options}),n.data}if(z.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{key:["color_shuffle_enabled"],value:t.payload.color_shuffle_enabled}),n.data}return e},sceneDesignIdsByTemplate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix("sceneDesignIdsByTemplate").data,t=arguments.length>1?arguments[1]:void 0;if(l.match(t)){const n=new o.ZP(e);return t.payload.templates.forEach((e=>{n.pushJSItem({template:e.id,sceneDesignIds:[]},"template")})),n.data}if(_.match(t)){const n=new o.ZP(e),r=t.payload.template;return n.pushJSItem({template:r.id,sceneDesignIds:[]},"template"),n.data}if(G.match(t)){const n=new o.ZP(e);return t.payload.sceneDesigns.sort(((e,t)=>e.order-t.order)).forEach((e=>{const t=e.template;if(!n.contains(t))throw new Error(`Template ${t} not loaded. Wait for "loadTemplate()/loadTemplates()" to finish before calling "loadSceneDesignsForTemplate()". Alternatively, just use "loadTemplateAndSceneDesigns()" to prevent this error.`);n.updateById(t,{value:t=>t.includes(e.id)?t:t.push(e.id),key:"sceneDesignIds"})})),n.data}if(k.match(t)){const n=new o.ZP(e),r=t.payload.sceneDesign,i=r.template;if(!n.contains(i))throw new Error(`Template ${i} not loaded. Wait for "loadTemplate()/loadTemplates()" to finish before calling "loadSceneDesignsForTemplate()". Alternatively, just use "loadTemplateAndSceneDesigns()" to prevent this error.`);return n.updateById(i,{value:e=>e.includes(r.id)?e:e.push(r.id),key:"sceneDesignIds"}),n.data}if(W.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.templateId,{value:e=>i.default.fromJS(t.payload.orderedSceneDesignIds),key:"sceneDesignIds"}),n.data}if(V.match(t)){const n=new o.ZP(e);return Object.entries(t.payload.allSceneDesignIdsPerTemplate).forEach((e=>{let[t,r]=e;n.updateById(t,{value:i.default.fromJS(r),key:"sceneDesignIds"})})),n.data}return e},sceneDesigns:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix("sceneDesigns").data,t=arguments.length>1?arguments[1]:void 0;if(G.match(t)){const n=new o.ZP(e);return t.payload.sceneDesigns.forEach((e=>{n.pushJSItem(e,"id")})),n.data}if(k.match(t)){const n=new o.ZP(e);return n.pushJSItem(t.payload.sceneDesign,"id"),n.data}if(H.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.sceneDesignId,{key:["scene_attributes_recommendation"],value:i.default.fromJS(t.payload.attributesRecommendation)}),n.data}if(B.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.sceneDesignId,{key:["scene_creation_recommendations"],value:i.default.fromJS(t.payload.creationRecommendations)}),n.data}if(Z.match(t)){const n=t.payload.sceneDesignId,r=new o.ZP(e);let i=r.getById(n);return i=i.merge(t.payload.data),r.updateById(n,{key:[],value:i}),r.data}if(Y.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.sceneDesignId,{key:["status"],value:i.default.fromJS(t.payload.status)}),n.data}if(W.match(t)){const n=new o.ZP(e);return t.payload.orderedSceneDesignIds.forEach(((e,t)=>{n.updateById(e,{key:["order"],value:t})})),n.data}if(K.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.sceneDesignId,{key:["display_group"],value:i.default.fromJS(t.payload.displayGroupId)}),n.data}if(q.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.sceneDesignId,{key:["recommendation_tag"],value:i.default.fromJS(t.payload.recommendationTag)}),n.data}return e},displayGroups:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix("displayGroups").data,t=arguments.length>1?arguments[1]:void 0;if(x.match(t)){const n=new o.ZP(e);return n.delete(n.getAllIds()),t.payload.displayGroups.forEach((e=>{n.pushJSItem(e,"id")})),n.data}if(F.match(t)){const n=new o.ZP(e);return n.updateById(t.payload.displayGroupId,{key:["display_name"],value:i.default.fromJS(t.payload.displayGroupName)}),n.data}return e},recentSelectedSceneDesigns:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments.length>1?arguments[1]:void 0;return X.match(t)?(e.includes(t.payload.sceneDesignId)&&(e=e.remove(e.indexOf(t.payload.sceneDesignId))),e=e.unshift(t.payload.sceneDesignId),e):e},activeTemplateCategoryId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return J.match(t)?t.payload.categoryId:e},largestMediaSceneDesignId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Q.match(t)?t.payload.sceneDesignId:e}});var De=Oe},74635:function(e,t,n){"use strict";n.d(t,{$3:function(){return d},B4:function(){return se},BD:function(){return _e},Bk:function(){return pe},CB:function(){return w},CQ:function(){return B},Cf:function(){return l},Dw:function(){return K},Dz:function(){return x},Ek:function(){return S},Fg:function(){return Te},Fu:function(){return E},I0:function(){return re},Id:function(){return ue},JQ:function(){return U},LB:function(){return T},LD:function(){return c},LK:function(){return v},NK:function(){return F},OW:function(){return Q},OY:function(){return z},Ok:function(){return Y},PB:function(){return me},RK:function(){return G},Se:function(){return Ee},Sn:function(){return h},Sr:function(){return p},Tl:function(){return Re},Tp:function(){return he},Wr:function(){return le},XX:function(){return ne},Ye:function(){return $},ZA:function(){return q},_V:function(){return f},aG:function(){return Ae},ax:function(){return _},b8:function(){return te},c7:function(){return Se},d4:function(){return R},dY:function(){return y},e3:function(){return H},hK:function(){return de},hn:function(){return k},ib:function(){return Z},jU:function(){return fe},jt:function(){return X},kv:function(){return P},kz:function(){return C},l3:function(){return g},lk:function(){return b},oL:function(){return D},oS:function(){return ce},re:function(){return ae},ro:function(){return ee},rx:function(){return M},s5:function(){return N},u2:function(){return W},vK:function(){return V},vL:function(){return ye},vN:function(){return ie},xt:function(){return I},y6:function(){return O},y9:function(){return J},yR:function(){return Ie},yS:function(){return oe},yr:function(){return ge},zZ:function(){return j}});var r=n(35369),i=n(20573),o=n(45970),a=n(59163),s=n(35849),u=n(36062);function c(e){return new o.ZP(e.templates.templateCategories).getAllIds()}const d=(0,i.P1)((e=>e.templates.templateCategories),(e=>e.templates.templatesList),s.ts,((e,t,n)=>{const i=new o.ZP(e),a=i.getAllIds(),s=new o.ZP(t),c=s.getAllIds();let d=r.default.List();if(a.size>=0)return SERVER.USER.capabilities.can_see_all_templates||SERVER.USER.roles===u.K$.ADMIN||!n?d=a:a.forEach((e=>{const t=i.getById(e);t&&c.size>=0&&t.get("templates").forEach((t=>{s.getById(t).get("teams").indexOf(SERVER.USER.team_id)>=0&&!d.includes(e)&&(d=d.push(e))}))})),d})),l=(0,i.P1)(((e,t)=>_(e,t)),(e=>e.templates.templatesList),s.ts,((e,t,n)=>{let i=r.default.List();const a=new o.ZP(t);if(e){const t=e.get("templates");SERVER.USER.capabilities.can_see_all_templates?i=t:t.forEach((e=>{const t=a.getById(e).get("teams");0!==t.size||SERVER.USER.roles!==u.K$.ADMIN&&n?t.indexOf(SERVER.USER.team_id)>=0&&(i=i.push(e)):i=i.push(e)}))}return i}));function _(e,t){return new o.ZP(e.templates.templateCategories).getById(t)}function E(e){const t=new o.ZP(e.templates.templateCategories),n=t.query({key:["display_name"],value:"[DRAFT]",valuesList:["id"]});return n.size>0?n.get(0):t.getAllIds().get(0)}function f(e,t){return!!new o.ZP(e.templates.templatesList).getById(t)}function p(e,t){const n=new o.ZP(e.templates.sceneDesignIdsByTemplate).getById(t);return!!n&&n.get("sceneDesignIds").size>0}function T(e){return 0===new o.ZP(e.templates.templatesList).length}function h(e,t){const n=I(e,t);return!n.has("sceneDesigns")||0===n.get("sceneDesigns").size||!n.has("templateData")}function S(e){return new o.ZP(e.templates.templatesList).getAllIds()}function g(e,t){return new o.ZP(e.templates.templatesList).getById(t)}let m=r.default.Map();function I(e,t){const n=new o.ZP(e.templates.templatesList),i=new o.ZP(e.templates.sceneDesigns),a=n.getById(t),s=te(e,t);let u=m.get(t);return u||(m=m.set(t,r.default.Map()),u=m.get(t)),a&&i.length>0&&(u=u.setIn(["templateData"],a.get("template_data")),s.forEach((e=>{const t=i.getById(e);t&&(u=u.setIn(["sceneDesigns",e,"landscape"],t.get("landscape_data")),u=u.setIn(["sceneDesigns",e,"vertical"],t.get("vertical_data")),u=u.setIn(["sceneDesigns",e,"square"],t.get("square_data")))})),m=m.set(t,u)),u}function R(e,t){const n=g(e,t);return n?n.get("teams"):r.default.List()}let A=r.default.Map();function y(e,t){const n=A.get(t);if(n)return n;const r=te(e,t);let i=I(e,t);const a=new o.ZP(e.templates.templatesList).getById(t);return a?(r.forEach((t=>{const n=D(e,t);n&&(i=i.setIn(["sceneDesigns",t,"scene_creation_recommendations"],n));const r=C(e,t);n&&r&&(i=i.setIn(["sceneDesigns",t,"scene_attributes_recommendation"],r))})),i=i.set("paletteDatas",a.get("palette_data")),i=i.set("textMinSize",a.get("text_min_size")),i=i.set("textMaxSize",a.get("text_max_size")),A=A.set(t,i),i):void 0}function v(e,t){const n=new o.ZP(e.templates.templatesList),i=new o.ZP(e.templates.sceneDesigns),a=new o.ZP(e.templates.displayGroups),s=n.getById(t),u=te(e,t);let c=s;return s&&i.length>0?(c=c.set("scene_designs",r.default.List()),u.forEach(((t,n)=>{const r=i.getById(t);c=c.setIn(["scene_designs",n,"id"],r.get("id")),c=c.setIn(["scene_designs",n,"status"],r.get("status")),c=c.setIn(["scene_designs",n,"landscape_data"],r.get("landscape_data")),c=c.setIn(["scene_designs",n,"vertical_data"],r.get("vertical_data")),c=c.setIn(["scene_designs",n,"square_data"],r.get("square_data")),c=c.setIn(["scene_designs",n,"scene_attributes_recommendation"],C(e,t).toJS()),c=c.setIn(["scene_designs",n,"scene_creation_recommendations"],D(e,t).toJS()),c=c.setIn(["scene_designs",n,"display_group"],r.get("display_group"));const o=a.getById(r.get("display_group")).toJS();c=c.setIn(["scene_designs",n,"objects","display_group"],o);const s=pe(e).map((e=>a.getById(e))).toJS();c=c.setIn(["scene_designs",n,"objects","display_groups"],s)})),c):null}function O(e,t){return new o.ZP(e.templates.sceneDesigns).getById(t)}function D(e,t){const n=O(e,t);return n&&n.get("scene_creation_recommendations")}function C(e,t){const n=O(e,t);return n&&n.get("scene_attributes_recommendation")}function N(e,t){const n=O(e,t);return n&&n.get("status")}function L(e,t){const n=g(e,t);return n&&n.get("template_data")}function P(e,t){const n=L(e,t);return n?n.get("fonts"):r.default.List()}function b(e,t){const n=L(e,t);return n?n.get("colors"):r.default.List()}function U(e,t){const n=g(e,t);return n&&n.get("status")}function w(e,t){const n=g(e,t);return n&&n.get("default_text_size_options")}function M(e,t){const n=g(e,t);return n&&n.get("display_name")}function V(e,t){const n=g(e,t);return n&&n.get("image_url")}function G(e,t){const n=g(e,t);return n&&n.get("mp4_url")}function k(e,t){const n=g(e,t);return n&&n.get("landscape_mp4_url")}function x(e,t){const n=g(e,t);return n&&n.get("square_mp4_url")}function F(e,t){const n=g(e,t);return n&&n.get("vertical_mp4_url")}function H(e,t){const n=g(e,t);return n&&n.get("text_min_size")}function B(e,t){const n=g(e,t);return n&&n.get("text_max_size")}function Z(e,t){const n=g(e,t);return n?n.get("default_text_size_options"):r.default.List()}function j(e,t){const n=g(e,t);return n?n.get("palette_data",r.default.List()):r.default.List()}function Y(e,t){const n=g(e,t);return n&&n.get("default_scene_design")}function W(e,t){const n=g(e,t);return n&&n.get("default_talking_head_scene_design")}function K(e,t){const n=g(e,t);return n&&n.get("default_storyboard_scene_design")}function $(e,t){const n=g(e,t);return n&&n.get("default_outro_scene_design")}function q(e,t){const n=g(e,t);return n&&n.get("default_icon_scene_design")}function X(e,t){const n=g(e,t);return n&&n.get("default_cutaway_scene_design")}function J(e,t){const n=g(e,t);return n&&n.get("default_callout_scene_design")}function z(e,t){const n=g(e,t);return n&&n.get("default_lower_third_scene_design")}function Q(e,t){const n=g(e,t);return n&&n.get("default_caption_scene_design")}function ee(e,t){const n=g(e,t);return n&&n.get("default_voiceover_scene_design")}function te(e,t){const n=new o.ZP(e.templates.sceneDesignIdsByTemplate).getById(t);return n?n.get("sceneDesignIds"):r.default.List()}function ne(e){return e.templates.sceneDesignIdsByTemplate.get(o.oX)}const re=(0,i.P1)((e=>e.templates.sceneDesigns),((e,t)=>te(e,t)),((e,t)=>t),((e,t)=>W(e,t)),((e,t,n,i)=>{const s=new o.ZP(e),u=r.default.List();return t.reduce(((e,t)=>{const n=s.getById(t);return function(e,t,n){return(e.getIn(["landscape_data","sceneCategory"])!==a.VideoData.CATEGORY_TALKING_HEAD||e.get("id")===n)&&(SERVER.USER.capabilities.can_see_all_templates||e.get("status")===a.VideoData.TEMPLATE_STATUS_ACTIVE)}(n,0,i)?e.push(n):e}),u)})),ie=(0,i.P1)((e=>e.templates.sceneDesigns),((e,t)=>te(e,t)),((e,t)=>{const n=new o.ZP(e),i=r.default.List();return t.reduce(((e,t)=>{const r=n.getById(t);return e.push(r)}),i)})),oe=(0,i.P1)(((e,t)=>re(e,t)),((e,t)=>W(e,t)),((e,t)=>ee(e,t)),((e,t,n)=>e.filter((e=>e.getIn(["landscape_data","sceneCategory"])!==a.VideoData.CATEGORY_TALKING_HEAD_INSERT)).filter((e=>{const r=e.getIn(["landscape_data","sceneCategory"])===a.VideoData.CATEGORY_TALKING_HEAD,i=e.getIn(["landscape_data","sceneCategory"])===a.VideoData.CATEGORY_VOICEOVER;return!(r&&e.get("id")!==t||i&&e.get("id")!==n)}))));function ae(e,t,n){return re(e,t).filter((e=>e.get("landscape_data").get("sceneCategory")===n))}function se(e,t){const n=te(e,t);if(0===n.size)return-1;const r=O(e,n.get(n.size-1));return r?r.get("order"):-1}function ue(e,t){return!!SERVER.USER.capabilities.can_see_all_templates||N(e,t)===a.VideoData.TEMPLATE_STATUS_ACTIVE}const ce=(0,i.P1)((e=>e.templates.displayGroups),(e=>{const t=new o.ZP(e).map((e=>e));return t?t.sort(((e,t)=>e.get("order")-t.get("order"))):r.default.List()}));function de(e,t){return new o.ZP(e.templates.displayGroups).getById(t)}function le(e){return ce(e).size}function _e(e){return new o.ZP(e.templates.displayGroups).length>0}function Ee(e,t){return O(e,t).get("display_group")}function fe(e,t){return O(e,t).get("recommendation_tag")}function pe(e){return new o.ZP(e.templates.displayGroups).getAllIds()}const Te=(0,i.P1)((e=>function(e){return e.templates.recentSelectedSceneDesigns}(e)),(e=>e.toArray().slice(0,3)));function he(e){var t;return null===(t=e.templates)||void 0===t?void 0:t.activeTemplateCategoryId}function Se(e){return!new o.ZP(e.savedTemplates.list).isEmpty()}function ge(e,t){return new o.ZP(e.savedTemplates.list).getById(t)}function me(e){return e.savedTemplates.loading}function Ie(e,t){const n=g(e,t);return n&&n.get("teams").size>0}function Re(e,t){const n=q(e,t);return n&&n.length>0}function Ae(e,t){const n=g(e,t);return n&&n.get("color_shuffle_enabled")}function ye(e){return e.templates.largestMediaSceneDesignId}},82023:function(e,t,n){"use strict";n.d(t,{NL:function(){return N},Qt:function(){return A.Qt},t_:function(){return A.t_},BX:function(){return A.BX},tV:function(){return A.tV},dW:function(){return w.dW},yn:function(){return A.yn},Sf:function(){return w.Sf},_c:function(){return V},NQ:function(){return A.NQ},UB:function(){return T},YJ:function(){return E},Jw:function(){return d},ci:function(){return b},cu:function(){return A.cu},Xi:function(){return A.Xi},W:function(){return m.W},sO:function(){return m.sO},Ts:function(){return m.Ts},Ks:function(){return m.Ks},PQ:function(){return A.PQ},vw:function(){return m.vw},AM:function(){return m.AM},DI:function(){return m.DI},ui:function(){return m.ui},nK:function(){return m.nK},$B:function(){return A.$B},OR:function(){return A.OR},ow:function(){return u},Q0:function(){return D},nh:function(){return m.nh},TP:function(){return m.TP},Xz:function(){return m.Xz},B:function(){return P},qV:function(){return A.qV},HS:function(){return g},lq:function(){return C},UF:function(){return m.UF},Ho:function(){return L},IC:function(){return A.IC},Nv:function(){return p},tH:function(){return f},GP:function(){return h},s1:function(){return m.s1},Nq:function(){return s},Qy:function(){return _},R$:function(){return S},kF:function(){return U},Z0:function(){return l},lO:function(){return B},RZ:function(){return c},tx:function(){return A.tx},M_:function(){return H},w8:function(){return k},wH:function(){return x},eg:function(){return F}});var r=n(14890),i=n(45970),o=n(35369),a=n(43187);function s(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,a.Z)();return{type:w.Sf.TRANSCRIPT_TAB_VISIBLE,visible:!0,sceneGroupId:e,sceneId:t,systemTriggered:n,parentActionGroup:r}}function u(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.Z)();return{type:w.Sf.TRANSCRIPT_TAB_VISIBLE,visible:!1,sceneGroupId:null,sceneId:null,systemTriggered:e,parentActionGroup:t}}function c(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,a.Z)();return{type:w.Sf.TRANSCRIPT_TAB_READY,ready:t,sceneGroupId:e,systemTriggered:n,parentActionGroup:r}}function d(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.Z)();return{type:w.Sf.DISABLE_OVERLAYS,sceneGroupId:e,disableOverlays:!0,systemTriggered:t,parentActionGroup:n}}function l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.Z)();return{type:w.Sf.TOGGLE_ORIGINAL,sceneGroupId:e,systemTriggered:t,parentActionGroup:n}}function _(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,a.Z)();return{type:w.Sf.STORE_TRANSCRIPT,sceneGroupId:e,editorState:t,isOriginal:n,systemTriggered:r,parentActionGroup:i}}function E(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.Z)();return{type:w.Sf.DELETE_TRANSCRIPT,sceneGroupId:e,systemTriggered:t,parentActionGroup:n}}function f(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.Z)();return{type:w.Sf.SET_LAST_LOADED_TRANSCRIPT,sceneGroupId:e,systemTriggered:t,parentActionGroup:n}}function p(e,t){return{type:w.Sf.SET_ACTIVE_TRANSCRIPT_INFO,sceneId:e,sceneGroupId:t}}function T(){return{type:w.Sf.CLEAR_ACTIVE_TRANSCRIPT_INFO}}function h(e){return{type:w.Sf.SCENE_CONVERSION_MODAL_VISIBLE,isVisible:e}}function S(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,a.Z)();return{type:w.Sf.STORE_TRANSCRIPT_TRANSLATIONS,sceneGroupId:e,translations:t,systemTriggered:n,parentActionGroup:r}}function g(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,a.Z)();return{type:w.Sf.REMOVE_TRANSCRIPT_TRANSLATION,sceneGroupId:e,languageCode:t,systemTriggered:n,parentActionGroup:r}}var m=n(29720),I=n(32998),R=n(82154),A=n(84142),y=n(4825),v=n(96815),O=n(36062);function D(e){return t=>{for(const n in e){let r=e[n].editorState;if(r){const i=!0===e[n].disableOverlays,a=o.default.fromJS(e[n].translations);t(_(n,r,!1)),i&&t(d(n)),a&&t(S(n,a,!0))}else r=e[n],t(_(n,r,!1))}}}function C(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,a.Z)();return o=>{t.isEmpty()||o(_(e,t.toJSON(),n,r,i))}}function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.fN.Default;const r=null==e?void 0:e.getNodes();if(!r||(0,A.UX)(e))return!1;const i=(0,A.Qt)(r),o=(0,y.PV)(t,i,n),a=r[0].getParent(),s=r[0].getIndexWithinParent();return a.splice(s,r.length,[o]),o}function L(e,t,n){return new Promise((r=>{if(!e)return;if(t>n)return;let i,o,a;e.update((()=>{let e=null;const s=(0,I.$getRoot)();if(!s.getFirstChild())return;const u=(0,I.$nodesOfType)(y.w2).filter((e=>-1!==e.getIndexWithinParent()));if(i=s.getFirstChild().getChildren().filter((e=>!u.find((t=>t===e)))),(0,A.f1)(i)){const e=i.filter((e=>(0,v.Yg)(e)));o=e.find((e=>t>=e.startTime&&t<=e.endTime)),a=e.find((e=>n>=e.startTime&&n<=e.endTime))}o&&a&&(e={startNode:o,endNode:a},r(e)),r()}))}))}function P(e,t,n,r,i,o){let u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],_=arguments.length>9&&void 0!==arguments[9]&&arguments[9],E=arguments.length>10&&void 0!==arguments[10]?arguments[10]:(0,a.Z)();return a=>{const p=document.createElement("div"),T=(0,I.createEditor)(A.yn);return p.style.display="none",T.setRootElement(p),new Promise((S=>{(0,A.C)(T,(()=>{const t=(0,I.$getRoot)();t.clear();const n=(0,I.$createParagraphNode)();let o=0,a="",s=0;e.forEach((e=>{if(e.startTime>=r&&e.endTime<=i){o&&(e.startTime-o>=O.D1.PAUSE_THRESHOLD_SECONDS||s>=O.D1.MAX_PARAGRAPH_SENTENCE_COUNT)&&[".","?"].includes(a)&&(n.append((0,I.$createLineBreakNode)()),s=0);const t=(0,v._1)(e.word,1e3*e.startTime,1e3*e.endTime),r=(0,v._1)(" ",1e3*e.endTime,1e3*e.endTime);n.append(t),n.append(r),o=e.endTime,a=e.word.slice(-1),[".","?"].includes(a)&&(s+=1)}})),t.append(n)})).then((()=>{a(C(t,T.getEditorState(),!0,_,E)),a(f(t,_,E)),l&&(a(d(t)),a(h(!0))),o&&a(s(t,n)),p&&p.remove(),hj("trigger","load_new_transcript"),analytics.track("Transcript initialized",{sceneGroupId:t,sceneId:n,numWords:e.length,transcriptDuration:e.length>1?e[e.length-1].endTime-e[0].startTime:0,isOnboarding:u,creationTime:c?performance.now()-c:null}),S(T)}))}))}}function b(e,t,n,r,i){return o=>{const a=(0,R.createHeadlessEditor)(A.yn),s=a.parseEditorState(JSON.stringify(t));a.setEditorState(s),a.update((()=>{const t=(0,I.$nodesOfType)(y.w2);if(t.length>0)for(const e of t)e.setSceneId(n[e.sceneId]),e.setState(y.fN.Default);else o(C(e,a.getEditorState(),!1,r,i))}),{onUpdate:()=>{o(C(e,a.getEditorState(),!1,r,i))}})}}function U(e,t,n,r,i){return a=>{const s=e.getEditorState();if(s.isEmpty())return;const u={[t]:{editorState:s.toJSON()}};a(S(n,o.default.fromJS(u),r,i))}}var w=n(47785),M=n(67294);const V=M.createContext({});var G=n(28216);function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=(0,G.v9)((e=>(0,m.sO)(e)));e||(e=t);const n=(0,M.useContext)(V);return n[e]?n[e]:null}function x(e,t){const n=k(t),r=(0,G.I0)();return async function(i){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.Z)(),u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];await n.dispatchCommand(e,i),r(C(t,n.getEditorState(),u,o,s))}}function F(e,t,n,r){const i=(0,G.I0)();return async function(o){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.Z)();await e.dispatchCommand(n,o),i(U(e,t,r,s,u))}}const H=(0,r.UY)({transcripts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.ZP.newFromIdPrefix("transcripts").data,t=arguments.length>1?arguments[1]:void 0;const n=new i.ZP(e);switch(t.type){case w.Sf.STORE_TRANSCRIPT:if(n.getById(t.sceneGroupId))n.updateById(t.sceneGroupId,{key:["editorState"],value:t.editorState}),n.updateById(t.sceneGroupId,{key:["isOriginal"],value:t.isOriginal});else{const e={sceneGroupId:t.sceneGroupId,editorState:t.editorState,translations:t.translations,ready:!1,isOriginal:t.isOriginal,disableOverlays:!1};n.pushJSItem(e,"sceneGroupId")}return n.data;case w.Sf.TOGGLE_ORIGINAL:{const e=n.getById(t.sceneGroupId);return n.updateById(t.sceneGroupId,{key:["isOriginal"],value:!e.get("isOriginal")}),n.data}case w.Sf.DISABLE_OVERLAYS:return n.updateById(t.sceneGroupId,{key:["disableOverlays"],value:t.disableOverlays}),n.data;case w.Sf.DELETE_TRANSCRIPT:return n.delete([t.sceneGroupId]),n.data;case w.Sf.TRANSCRIPT_TAB_READY:return n.updateById(t.sceneGroupId,{key:["ready"],value:t.ready}),n.data;case w.Sf.STORE_TRANSCRIPT_TRANSLATIONS:return n.updateById(t.sceneGroupId,{key:["translations"],value:t.translations}),n.data;case w.Sf.REMOVE_TRANSCRIPT_TRANSLATION:return n.updateById(t.sceneGroupId,{key:["translations"],value:o.default.Map()}),n.data;default:return e}},is_loading:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===w.Sf.SET_TRANSCRIPT_IS_LOADING?t.isLoading:e},last_loaded_transcript:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===w.Sf.SET_LAST_LOADED_TRANSCRIPT?t.sceneGroupId:e}}),B=(0,r.UY)({transcript_tab:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.default.Map({visible:!1,sceneGroupId:null}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.Sf.TRANSCRIPT_TAB_VISIBLE:{const{visible:n,sceneGroupId:r=null,type:i,...o}=t;return e.merge({visible:n,sceneGroupId:r,...o})}case w.Sf.SET_ACTIVE_TRANSCRIPT_INFO:case w.Sf.CLEAR_ACTIVE_TRANSCRIPT_INFO:{const{sceneGroupId:n=null,type:r,...i}=t;return e.merge({sceneGroupId:n,...i})}default:return e}},scene_conversion_modal_visible:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===w.Sf.SCENE_CONVERSION_MODAL_VISIBLE?t.isVisible:e}})},92996:function(e,t,n){"use strict";n.d(t,{k4:function(){return o},s4:function(){return i},z6:function(){return a}});var r=n(32998);class i extends r.ElementNode{static getType(){return"base-insert-node"}static clone(e){return new i(e.__key)}duplicate(e){return new i}createDOM(){const e=document.createElement("span");e.className="base-insert-node";const t=document.createElement("i");return t.className="material-icons edit-icon",t.innerHTML="layers",e.appendChild(t),e}updateDOM(){return!1}static importJSON(){return a()}exportJSON(){return{...super.exportJSON(),type:"base-insert-node",version:1}}}function o(e){return e instanceof i}function a(){return new i}},81879:function(e,t,n){"use strict";n.d(t,{KK:function(){return s},W5:function(){return a},b$:function(){return i},uG:function(){return o}});var r=n(32998);let i;!function(e){e.Right="RIGHT",e.Left="LEFT"}(i||(i={}));class o extends r.ElementNode{constructor(e,t){super(t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"__handleType",void 0),this.__handleType=e}static getType(){return"drag-handle-node"}static clone(e){return new o(e.__handleType,e.__key)}duplicate(e){return new o(e.__handleType)}createDOM(){const e=document.createElement("button");e.className="drag-handle m-0 p-0",this.__handleType===i.Left?e.className=e.className.concat(" left"):this.__handleType===i.Right&&(e.className=e.className.concat(" right")),e.setAttribute("draggable","true");const t=document.createElement("span");return t.className="visual-bar",e.appendChild(t),e}updateDOM(){return!1}static importJSON(e){return s(e.handleType)}exportJSON(){return{...super.exportJSON(),handleType:this.handleType,type:"drag-handle-node",version:1}}get handleType(){return this.__handleType}}function a(e){return e instanceof o}function s(e){return new o(e)}},4825:function(e,t,n){"use strict";n.d(t,{PV:function(){return l},Lt:function(){return _},w2:function(){return d},fN:function(){return c}});var r=n(32998);class i extends Error{}var o=n(81879),a=n(92996),s=n(96815);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c;!function(e){e.Default="DEFAULT",e.Edit="EDIT"}(c||(c={}));class d extends r.ElementNode{constructor(e,t,n){super(n),u(this,"__state",void 0),u(this,"__sceneId",void 0),this.__sceneId=e,this.__state=t||c.Default}static getType(){return"insert-node"}static clone(e){return new d(e.__sceneId,e.__state,e.__key)}duplicate(e){return new d(e.__sceneId,e.__state)}createDOM(){const e=document.createElement("span");return this.__update(e),e}updateDOM(e,t){return e.__state!==this.__state&&this.__update(t),!0}static importJSON(e){return new d(e.sceneId,e.state)}exportJSON(){return{...super.exportJSON(),sceneId:this.sceneId,state:this.getState(),type:"insert-node",version:1}}__update(e){const t=["insert-container"];switch(this.__state){case c.Default:t.push("default");break;case c.Edit:t.push("edit")}e.className=t.join(" ")}get sceneId(){return this.__sceneId}get startTime(){const e=this.getBaseInsert().getChildren();for(let t=0;t<e.length;t++)if((0,s.Yg)(e[t]))return e[t].startTime;throw new i("Insert has no children with words")}get endTime(){const e=this.getBaseInsert().getChildren();for(let t=e.length-1;t>=0;t--)if((0,s.Yg)(e[t]))return e[t].endTime;throw new i("Insert has no children with words")}getState(){return this.getLatest().__state}setState(e){const t=super.getWritable();return t.__state=e,t}setSceneId(e){const t=super.getWritable();return t.__sceneId=e,t}getLeftHandle(){const e=this.getChildren()[0];if(!e||!(0,o.W5)(e))throw new i("Left handle does not exist");return e}getRightHandle(){const e=this.getChildren()[2];if(!e||!(0,o.W5)(e))throw new i("Right handle does not exist");return e}getBaseInsert(){const e=this.getChildren()[1];if(!e||!(0,a.k4)(e))throw new i("Base insert does not exist");return e}}function l(e,t,n){if(!t)throw new i("Cannot have an empty insert");const r=new d(e,n),s=(0,a.z6)();return t.forEach((e=>{s.append(e)})),r.append((0,o.KK)(o.b$.Left),s,(0,o.KK)(o.b$.Right)),r}function _(e){return e instanceof d}},41831:function(e,t,n){"use strict";n.d(t,{Q0:function(){return g},Y2:function(){return m},NE:function(){return S}});var r=n(32998),i=n(93379),o=n.n(i),a=n(7795),s=n.n(a),u=n(90569),c=n.n(u),d=n(3565),l=n.n(d),_=n(19216),E=n.n(_),f=n(44589),p=n.n(f),T=n(47740),h={};h.styleTagTransform=p(),h.setAttributes=l(),h.insert=c().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=E(),o()(T.Z,h),T.Z&&T.Z.locals&&T.Z.locals;class S extends r.ElementNode{constructor(e,t){super(t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"__originalWords",void 0),this.__originalWords=e}static getType(){return"text-correct-node"}static clone(e){return new S(e.__originalWords,e.__key)}duplicate(e){return new S(e.__originalWords)}createDOM(){const e=document.createElement("span");return e.setAttribute("contenteditable","true"),e.setAttribute("data-testid","text-correct-input"),e.className="text-correct-input",e}updateDOM(){return!1}static importJSON(e){return new S(e.originalWords)}exportJSON(){return{...super.exportJSON(),originalWords:this.originalWords,type:"text-correct-node",version:1}}get originalWords(){return this.getLatest().__originalWords}get originalText(){const e=[];return this.originalWords.forEach((t=>{e.push(t.text)})),e.join("")}}function g(e,t){const n=new S(t);return e.forEach((e=>{n.append(e)})),n}function m(e){return e instanceof S}},96815:function(e,t,n){"use strict";n.d(t,{_1:function(){return I},Yg:function(){return m},Fc:function(){return g}});var r=n(32998),i=n(93379),o=n.n(i),a=n(7795),s=n.n(a),u=n(90569),c=n.n(u),d=n(3565),l=n.n(d),_=n(19216),E=n.n(_),f=n(44589),p=n.n(f),T=n(22687),h={};function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}h.styleTagTransform=p(),h.setAttributes=l(),h.insert=c().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=E(),o()(T.Z,h),T.Z&&T.Z.locals&&T.Z.locals;class g extends r.TextNode{constructor(e,t,n,r){super(e,r),S(this,"__startTime",void 0),S(this,"__endTime",void 0),this.__startTime=t,this.__endTime=n}static getType(){return"word-node"}static clone(e){return new g(e.__text,e.__startTime,e.__endTime,e.__key)}duplicate(e){return new g(e.__text,e.__startTime,e.__endTime)}isEmptyText(){return!this.__text.trim()}createDOM(e){const t=super.createDOM(e),n=["word-node"];return this.isEmptyText()&&n.push("empty"),t.className=n.join(" "),t.setAttribute("startTime",this.__startTime.toFixed()),t.setAttribute("endTime",this.__endTime.toFixed()),t}updateDOM(){return!1}static importJSON(e){return I(e.text,e.startTime,e.endTime)}exportJSON(){return{...super.exportJSON(),startTime:this.startTime,endTime:this.endTime,type:"word-node",version:1}}get startTime(){return this.__startTime}get endTime(){return this.__endTime}}function m(e){return e instanceof g}function I(e,t,n){return new g(e,t,n)}},80962:function(e,t,n){"use strict";n.d(t,{Qu:function(){return m},my:function(){return g},yf:function(){return S}});var r=n(32998),i=n(93379),o=n.n(i),a=n(7795),s=n.n(a),u=n(90569),c=n.n(u),d=n(3565),l=n.n(d),_=n(19216),E=n.n(_),f=n(44589),p=n.n(f),T=n(62443),h={};h.styleTagTransform=p(),h.setAttributes=l(),h.insert=c().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=E(),o()(T.Z,h),T.Z&&T.Z.locals&&T.Z.locals;class S extends r.ElementNode{static getType(){return"trim-node"}static clone(e){return new S(e.__key)}duplicate(e){return new S}createDOM(){const e=document.createElement("span");return e.className="trim-node",e}updateDOM(){return!1}static importJSON(){return m()}exportJSON(){return{...super.exportJSON(),type:"trim-node",version:1}}}function g(e){return e instanceof S}function m(){return new S}},29720:function(e,t,n){"use strict";n.d(t,{AM:function(){return h},DI:function(){return u},Ks:function(){return T},TP:function(){return a},Ts:function(){return S},UF:function(){return f},W:function(){return m},Xz:function(){return i},a_:function(){return g},nK:function(){return _},nh:function(){return o},s1:function(){return p},sO:function(){return s},ui:function(){return E},vw:function(){return d}});var r=n(45970);function i(e){return e.transcript.transcript_tab.get("visible")}function o(e){return e.transcript.scene_conversion_modal_visible}function a(e,t){var n;return!(null===(n=new r.ZP(c(e)).getById(t))||void 0===n||!n.get("ready"))}function s(e){return e.transcript.transcript_tab.get("sceneGroupId")}function u(e){var t,n;return(null==e||null===(t=e.undoable)||void 0===t||null===(n=t.present)||void 0===n?void 0:n.transcript)??e.transcript}function c(e){return u(e).transcripts}function d(e,t){return new r.ZP(c(e)).getById(t)}function l(e,t){const n=new r.ZP(c(e)).getById(t);return null==n?void 0:n.get("translations")}function _(e,t){const n=l(e,t);return null==n?void 0:n.keySeq().get(0)}function E(e,t){const n=l(e,t),r=_(e,t);if(r)return n.get(r).get("editorState")}function f(e,t){return!!_(e,t)}function p(e,t){const n=d(e,t);return!!n&&n.get("disableOverlays")}function T(e,t){const n=d(e,t);return!!n&&n.get("isOriginal")}function h(e){return new r.ZP(c(e)).getAllIds()}function S(e){const t=new r.ZP(c(e)),n={};return t.getAllIds().forEach((e=>{const r=t.getById(e).get("editorState");n[e]=r})),n}function g(e){const t=new r.ZP(c(e)),n={};return t.getAllIds().forEach((e=>{const r=t.getById(e),i=r.get("editorState"),o=!!r.get("disableOverlays"),a=r.get("translations");n[e]={disableOverlays:o,editorState:i,translations:a}})),n}function m(e,t){const n=e.getSceneGroupById(t);if(n&&n.captions)for(const e of n.captions.blocks)if(e.text)return e.id;return null}},47785:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Sf:function(){return i},Xx:function(){return a},dW:function(){return u},kB:function(){return s},wp:function(){return o}});const i={STORE_TRANSCRIPT:"STORE_TRANSCRIPT",DELETE_TRANSCRIPT:"DELETE_TRANSCRIPT",TRANSCRIPT_TAB_VISIBLE:"TRANSCRIPT_TAB_VISIBLE",TRANSCRIPT_TAB_READY:"TRANSCRIPT_TAB_READY",SET_ACTIVE_TRANSCRIPT_SLIDE:"SET_ACTIVE_TRANSCRIPT_SLIDE",SET_TRANSCRIPT_IS_LOADING:"SET_TRANSCRIPT_IS_LOADING",SET_LAST_LOADED_TRANSCRIPT:"SET_LAST_LOADED_TRANSCRIPT",SET_ACTIVE_TRANSCRIPT_INFO:"SET_ACTIVE_TRANSCRIPT_INFO",CLEAR_ACTIVE_TRANSCRIPT_INFO:"CLEAR_ACTIVE_TRANSCRIPT_INFO",DISABLE_OVERLAYS:"DISABLE_OVERLAYS",SCENE_CONVERSION_MODAL_VISIBLE:"SCENE_CONVERSION_MODAL_VISIBLE",STORE_TRANSCRIPT_TRANSLATIONS:"STORE_TRANSCRIPT_TRANSLATIONS",REMOVE_TRANSCRIPT_TRANSLATION:"REMOVE_TRANSCRIPT_TRANSLATION",TOGGLE_ORIGINAL:"TOGGLE_ORIGINAL"};class o{constructor(e,t,n){r(this,"startTime",void 0),r(this,"endTime",void 0),r(this,"sentence",void 0),this.startTime=""+t,this.endTime=""+n,this.sentence=e}}const a=/(\.|\?|!)$/gi,s=/\s/g;let u;!function(e){e.TALKING_HEAD="video",e.VOICEOVER="audio"}(u||(u={}))},84142:function(e,t,n){"use strict";n.d(t,{$B:function(){return w},BX:function(){return R},C:function(){return T},IC:function(){return U},M7:function(){return S},NQ:function(){return b},OR:function(){return D},PQ:function(){return C},Qt:function(){return O},UX:function(){return I},WV:function(){return v},Xi:function(){return L},Y5:function(){return m},cu:function(){return N},f1:function(){return A},qV:function(){return p},tV:function(){return y},t_:function(){return g},tx:function(){return P},yn:function(){return f}});var r=n(64061),i=n.n(r),o=n(32998),a=n(76969),s=n(92996),u=n(4825),c=n(96815),d=n(81879),l=n(41831),_=n(80962),E=n(47785);const f={onError:e=>{i().notify(`Error in transcript editor: ${e}`)},namespace:"TranscriptEditor",editable:!1,nodes:[c.Fc,u.w2,d.uG,s.s4,l.NE,_.yf]};function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return()=>{t.forEach((e=>e()))}}async function T(e,t){return new Promise((n=>{e.update(t,{onUpdate:n})}))}const h=e=>{const t=(0,c.Yg)(e)&&e.isEmptyText();return!!((0,o.$isLineBreakNode)(e)||t||(0,_.my)(e))},S=e=>{let t=e.getPreviousSibling();for(;null!==t&&h(t);)t=t.getPreviousSibling();if((0,u.Lt)(t))for(t=t.getBaseInsert().getChildren().slice(-1).pop();null!==t&&h(t);)t=t.getPreviousSibling();return t},g=e=>{let t=e.getNextSibling();for(;null!==t&&h(t);)t=t.getNextSibling();if((0,u.Lt)(t))for(t=t.getBaseInsert().getChildren()[0];null!==t&&h(t);)t=t.getNextSibling();return t},m=(e,t,n,r)=>{const i=S(e),o=g(t);let a,s;return a=null===i?n:(0,u.Lt)(e)?Math.round((i.endTime+e.getBaseInsert().getChildren()[0].startTime)/2):Math.round((i.endTime+e.startTime)/2),s=null===o?r:(0,u.Lt)(t)?Math.round((o.startTime+t.getBaseInsert().getChildren().slice(-1)[0].endTime)/2):Math.round((o.startTime+t.endTime)/2),{startTime:a,endTime:s}},I=e=>{if(!e)return!1;const t=e.getNodes();return R(t)},R=e=>{let t=!1;for(let n=0;n<e.length;n++)if((0,u.Lt)(e[n])||(0,u.Lt)(e[n].getParent())||(0,s.k4)(e[n].getParent())||(0,_.my)(e[n])||(0,_.my)(e[n].getParent())){t=!0;break}return t},A=e=>{if(!e)return!1;let t=!0;for(let n=0;n<e.length;n++)if(!(0,c.Yg)(e[n])&&!(0,o.$isLineBreakNode)(e[n])){t=!1;break}return t},y=e=>{if(!e)return!1;const t=e.getNodes();return A(t)},v=e=>{if(!e)return 0;let t=0;return e.getNodes().forEach((e=>{(0,c.Yg)(e)&&!e.isEmptyText()&&t++})),t},O=e=>e.map((e=>void 0!==e.duplicate?e.duplicate(e):(0,o.$isLineBreakNode)(e)?(0,o.$createLineBreakNode)():void console.error(`$duplicateNodes does not know how to handle Lexical Noe of type ${e.getType()}`))).filter((e=>e)),D=async(e,t)=>e.getEditorState().read((()=>{const e=(0,a.$dfs)().map((e=>{let{node:t}=e;return t}));for(const n of e)if((0,c.Yg)(n)){if(n.startTime>t||n.endTime<t)continue;return n}return null})),C=async e=>e.getEditorState().read((()=>{const e=(0,o.$nodesOfType)(o.RootNode)[0].getAllTextNodes(),t=[];let n="",r=null;return e.forEach(((i,o)=>{const a=i.getTextContent();if(n+=a,null===r&&(r=i.startTime),E.Xx.test(a)||o===e.length-1){const e=new E.wp(n,r,i.endTime);""!==e.sentence.trim()&&(t.push(e),n="",r=null)}})),t})),N=e=>e.map((e=>{const t=document.createElement("span");return t.textContent=e.sentence,t.setAttribute("data-start-time",e.startTime),t.setAttribute("data-end-time",e.endTime),t.outerHTML})),L=e=>e.map((e=>{const t=document.createRange().createContextualFragment(e).querySelector("span");return{sentence:t.textContent,startTime:t.getAttribute("data-start-time"),endTime:t.getAttribute("data-end-time")}})),P=e=>{const t=[];return e.forEach((e=>{const n=e.sentence.split(E.kB),r=n.length,i=Math.floor((parseInt(e.endTime)-parseInt(e.startTime))/r);n.map(((t,n)=>{let r;return r=0===n?parseInt(e.startTime):parseInt(e.startTime)+n*i,{word:t,startTime:r,endTime:Math.min(parseInt(e.startTime)+(n+1)*i,parseInt(e.endTime))}})).forEach((e=>{t.push(e)}))})),t},b=async e=>{const t=(0,o.createEditor)(f),n=document.createElement("div");return n.style.display="none",t.setRootElement(n),await T(t,(()=>{const t=(0,o.$getRoot)();t.clear();const n=(0,o.$createParagraphNode)();e.forEach((e=>{const t=(0,c._1)(e.word,e.startTime,e.endTime),r=(0,c._1)(" ",e.endTime,e.endTime);n.append(t),n.append(r)})),t.append(n)})),t.getEditorState()},U=e=>(0,o.createEditor)(f).parseEditorState(JSON.stringify(e));function w(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[];return e.getEditorState().read((()=>{const e=(0,a.$dfs)().map((e=>{let{node:t}=e;return t}));for(const i of e)if((0,c.Yg)(i)){if(!t&&i.isEmptyText())continue;if(!n&&(0,_.my)(i.getParent()))continue;r.push({word:i.getTextContent(),startTime:i.startTime/1e3,endTime:i.endTime/1e3})}})),r}},61948:function(e,t,n){"use strict";n.d(t,{nu:function(){return c.nu},Tg:function(){return c.Tg},Ih:function(){return c.Ih},OV:function(){return c.OV},_o:function(){return c._o},u_:function(){return c.u_},Ww:function(){return oe},Lo:function(){return I},or:function(){return h},KC:function(){return m},lE:function(){return g},ZP:function(){return de},B_:function(){return p},vd:function(){return l},yL:function(){return w.yL},lN:function(){return w.lN},Th:function(){return w.Th},_9:function(){return w._9},d3:function(){return w.d3},A$:function(){return w.A$},mO:function(){return w.mO},ZI:function(){return N},PR:function(){return L},KS:function(){return P},wf:function(){return C},w7:function(){return d},JN:function(){return w.JN},E2:function(){return w.E2},XO:function(){return w.XO},_P:function(){return w._P},Hi:function(){return w.Hi},O5:function(){return w.O5},o1:function(){return A},yD:function(){return y},Lz:function(){return T},Px:function(){return f},hc:function(){return b},qd:function(){return O},Xy:function(){return v},Wn:function(){return R},X3:function(){return U},XW:function(){return E},Lb:function(){return D},XJ:function(){return _},yy:function(){return S}});var r=n(14890),i=n(35369),o=n(45970),a=n(59163),s=n(16313);function u(e,t){const n=t.query({key:["file_obj"],value:e});return 1===n.size?n.getIn([0,o.$7]):null}var c=n(93175);function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:c.u_.REMOVE_UPLOAD,asset:e,search_context:t,activeFolderId:n}}function l(e,t){return{type:c.u_.FINALIZE_ATTRIBUTION_DATA,attribution:e,license:t}}function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:c.u_.UPDATE_UPLOAD_MEDIA_TAGS,mediaTags:e}}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:c.u_.UPDATE_ATTRIBUTION_DATA,attribution:e}}function f(){return{type:c.u_.START_UPLOAD_EXPERIENCE}}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:c.u_.END_UPLOAD_EXPERIENCE,folderId:e}}function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:c.u_.SET_UPLOAD_FOLDER,folderId:e}}function h(){return{type:c.u_.CANCEL_ALL}}function S(e){return{type:c.u_.USER_CANCEL_FILE,file_obj:e}}function g(){return{type:c.u_.CLEAR_NON_FAILED}}function m(){return{type:c.u_.CLEAR_FAILED}}function I(e){return{type:c.u_.ADD_FILES,opts:e}}function R(e,t){return{type:c.u_.STORE_UPLOAD_PROGRESS,progress:e,session_id:t}}function A(e,t){return{type:c.u_.SET_AUDIO_ENHANCEMENT_CATEGORY,file_obj:e,audio_enhancement_category:t}}const y=(0,n(29829).PH)(c.u_.SET_AUDIO_ENHANCEMENT_TOGGLE_STATE);function v(e,t,n){return{type:c.u_.STORE_SUCCESSFUL_UPLOAD,file_obj:e,new_asset:t,new_asset_type:n}}function O(e,t){return{type:c.u_.STORE_FAILED_UPLOAD,file_obj:e,message:t}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:c.u_.UPDATE_UPLOADED_ASSET_MEDIA_TAG,file_obj:e,tags:t}}function C(e){return{type:c.u_.MARK_FILE_AS_FINALIZING,file_id:e}}function N(e){return{type:c.u_.MARK_FILE_AS_DELETED,file_id:e}}function L(e){return{type:c.u_.MARK_FILE_AS_DELETING,file_id:e}}function P(e){return{type:c.u_.MARK_FILE_AS_DELETION_FAILED,file_id:e}}function b(e,t,n){return{type:c.u_.STORE_COMPLETED_FILE,file_id:e,new_asset:t,new_asset_type:n}}function U(e){return{type:c.u_.STORE_UPLOADED_ASSET_ID,assetId:e}}var w=n(59047),M=n(62929),V=n(43187),G=n(78133),k=n(47176),x=n(99382),F=n(44908),H=n.n(F),B=n(62104),Z=n(9514),j=n(36062),Y=n(47205),W=n.n(Y);function K(e,t,n){q(e,t),t.set(e,n)}function q(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function X(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,n)}var J=new WeakMap,z=new WeakMap,Q=new WeakSet;class ee{constructor(){var e;q(this,e=Q),e.add(this),K(this,J,{writable:!0,value:2}),K(this,z,{writable:!0,value:48e3})}async extract(e,t,n){if("function"!=typeof OfflineAudioContext)return null;const r=new OfflineAudioContext({numberOfChannels:X(this,J),length:X(this,z)*n,sampleRate:X(this,z)}),i=await function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,Q,te).call(this,e),o=await r.decodeAudioData(i),a=r.createBufferSource();a.buffer=o,a.connect(r.destination);const s=t,u=n;return a.start(0,s,u),await r.startRendering()}convertAudioBufferToWavBlob(e){const t=W()(e);return new Blob([new DataView(t)],{type:"audio/wav"})}get sampleRate(){return X(this,z)}}function te(e){return new Promise(((t,n)=>{const r=new FileReader;r.onload=async()=>{t(r.result)},r.readAsArrayBuffer(e)}))}var ne=n(97748),re=n.n(ne);function ie(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}class oe{static uploadVideoRecording(e,t){return async(n,r)=>{const i=await n((0,Z.f_)()),o=e.type.split("/"),a=o[o.length-1],s={file_list:[{file:new File([e],`${c.OV}-${(0,V.Z)()}.${a}`,{type:e.type})}],asset_type:G.Z.background_asset_type,add_to_user_library:!1,max_height:G.Z.asset_max_height,max_width:G.Z.asset_max_width,enhance_audio:t},u=n(oe.startUpload(s));return n(T(i.get("id"))),u.then((()=>{n(T(null))})),u}}static canUploadDifferentAssetType(e){return e===G.Z.background_asset_type||e===G.Z.audio_asset_type||e===G.Z.icon_asset_type}static startUpload(e){return async(t,n)=>(t(I(e)),"enhance_audio"in e||(e=await t(oe.markFilesForAudioEnhancement(e))),t(ie(oe,oe,se).call(oe,e)))}static markFilesForAudioEnhancement(e){return async(t,n)=>{const r=e.file_list.map((async e=>{let{file:n,metadata:r}=e;if(r&&"audio_enhancement_category"in r&&r.audio_enhancement_category!==c.nu.NO_AUDIO)return;const i=await ie(oe,oe,ue).call(oe,n);t(A(n,i))}));await Promise.all(r);let i=(0,w.lN)(n());i===c.Tg.DISABLED&&(i=ie(oe,oe,ae).call(oe,n()),t(y({[c._o.AUDIO_ENHANCEMENT_TOGGLE_STATE]:i})));const o=i===c.Tg.ON;return e.enhance_audio=o,e}}static addMetadataToPendingUpload(e,t){return n=>{var r,i;const o=e.get("file_obj"),a=null===(r=e.get("file_metadata"))||void 0===r?void 0:r.toJS(),s=null===(i=e.get("upload_opts"))||void 0===i?void 0:i.toJS(),u=null==s?void 0:s.metadata,c=new File([o],o.name,{type:o.type}),d=Object.assign({},a,t),l=Object.assign({},u,t),_=Object.assign({},s,{file_list:[{file:c,metadata:d}],metadata:l});n(S(o)),n(oe.startUpload(_)).catch((()=>{}))}}static finalizeUploads(e){return(t,n)=>{const r=n();if(r.uploads.files_can_be_edited)return;const i=r.uploads.files,a=new o.ZP(i),s=[];return a.forEach((n=>{if(!0===n.get("user_canceled")&&[c.Ih.VALIDATED,c.Ih.FAILED].indexOf(n.get("status"))>=0)s.push(t(oe.removeFileFromGCS(n)));else if(!1===n.get("user_canceled")&&[c.Ih.VALIDATED].indexOf(n.get("status"))>=0){var i;const o=n.get("tags").toJS(),a=H()([...r.uploads.media_tags,...o]);s.push(t(oe.saveValidatedAsset(n,r.uploads.attribution,r.uploads.license,e,a,o,r.uploads.media_tags,null===(i=r.uploads)||void 0===i?void 0:i.folderId)))}})),$.when(...s).then((e=>new Promise(((r,i)=>{const a=new o.ZP(n().uploads.files);let s=!0;a.forEach((e=>{[c.Ih.LOADING,c.Ih.FINALIZING,c.Ih.DELETING,c.Ih.VALIDATED].indexOf(e.get("status"))>=0&&(s=!1)})),s?(t(g()),t(_([])),t(l("","")),r(e)):i(new Error("Upload is not complete."))}))))}}static removeFileFromGCS(e){return t=>{const n=$.Deferred();if(!e.get("uploaded_asset"))return t(N(e.get(o.$7))),n.resolve(),n.promise();const r=(e=>{const t=e.get("type");let n=[];switch(t){case G.Z.background_asset_type:{const r=e.getIn([t,"type"]);"image"===r?(n.push(e.getIn([t,r,"render_url"])),n.push(e.getIn([t,r,"preview_url"])),n.push(e.getIn([t,r,"thumbnail_url"]))):"video"===r&&(n.push(e.getIn([t,r,"render_url"])),n.push(e.getIn([t,r,"preview_url"])),n.push(e.getIn([t,r,"thumbnail_url"])),n.push(e.getIn([t,r,"poster_url"])));break}case G.Z.audio_asset_type:n.push(e.getIn([t,"mp3_url"]))}return n=n.filter((e=>e)),n})(e.get("uploaded_asset"));return t(L(e.get(o.$7))),$.ajax({url:SERVER.URLS.asset_deletion_gcs+"?"+$.param({urls:JSON.stringify(r)}),method:"DELETE",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:()=>{t(N(e.get(o.$7))),n.resolve()},error:()=>{t(P(e.get(o.$7))),n.resolve()}}),n.promise()}}static saveValidatedAsset(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return c=>{const d=$.Deferred(),l=((t,n,r,i,o)=>{const a=t.get("type");switch(a){case G.Z.background_asset_type:{const s=t.getIn([a,"type"]);t=(t=t.setIn([a,s,"license"],r)).setIn([a,s,"attribution"],n),i&&(t=t.setIn([a,s,"tags"],i)),o&&(t=t.set("folder_id",o)),e.get("file_obj").webkitRelativePath&&SERVER.USER.can_upload_media_folders&&(t=t.set("folder_id",e.getIn(["file_metadata","folderId"])));break}case G.Z.icon_asset_type:t=(t=t.setIn([a,"license"],r)).setIn([a,"attribution"],n),i&&(t=t.setIn([a,"tags"],i)),o&&(t=t.set("folder_id",o));break;case G.Z.audio_asset_type:t=(t=t.setIn([a,"license"],r)).setIn([a,"attribution"],n)}return t})(e.get("uploaded_asset"),t,n,i,u);return c(C(e.get(o.$7))),$.ajax({url:SERVER.URLS.asset_save,method:"POST",data:JSON.stringify(l),contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:t=>{let n;t.type===r||oe.canUploadDifferentAssetType(t.type)?(c(b(e.get(o.$7),t[t.type],t.type)),r===G.Z.background_asset_type&&(n=t.background[t.background.type].uuid,c(U(n)),analytics.track("Media Upload Confirmed",{media_file_contains_tags:a.length?"Yes":"No",media_file_tags:a,media_user_provided_tags:s})),r===G.Z.icon_asset_type&&(n=t.icon.uuid,c(U(n)),analytics.track("Icon Upload Confirmed",{media_file_contains_tags:a.length?"Yes":"No",media_file_tags:a,media_user_provided_tags:s})),t.folder_id&&t.type===G.Z.background_asset_type&&c((0,Z.Lu)(t.folder_id,t.background)),t.folder_id&&t.type===G.Z.icon_asset_type&&c((0,Z.Lu)(t.folder_id,t)),t.folder_id||t.type!==G.Z.background_asset_type||c((0,Z.vm)(t.background,Z.Pf.UPLOADED_VISUALS)),t.folder_id||t.type!==G.Z.icon_asset_type||c((0,Z.vm)({type:G.Z.icon_asset_type,icon:t.icon,history_index_user_ids:t.history_index_user_ids},Z.Pf.UPLOADED_ICONS))):c(O(e.get("file_obj"),"Invalid file type for the uploader.")),d.resolve(n)},error:(t,n,r)=>{var i,o;let a="An unknown error occurred saving your upload, please try again.";"error"===(null==t||null===(i=t.responseJSON)||void 0===i?void 0:i.status)&&null!=t&&null!==(o=t.responseJSON)&&void 0!==o&&o.message&&(a=t.responseJSON.message),c(O(e.get("file_obj"),a)),d.resolve()}}),d.promise()}}static endUploadExperience(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n=>{n(p(t)),n((0,B.VG)()),n(oe.finalizeUploads(e))}}static archiveUpload(e,t){return(n,r)=>{const i=r(),o=(0,Z.$x)(i,t);t!==Z.Pf.UPLOADED_VISUALS&&t!==Z.Pf.UPLOADED_ICONS||($.ajax({url:SERVER.URLS.assets+"?"+$.param({type:e.get("type"),id:e.getIn([e.get("type"),"id"])}),method:"DELETE",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},error:(e,t,n)=>{k.Z.error("The media item could not be removed.")}}),n(d(e,t,o)))}}}function ae(e){const t=(0,w.XO)(e);return t.filter((e=>e.getIn(["file_metadata","audio_enhancement_category"])===c.nu.AUDIO_WITH_SPEECH)).size>0?c.Tg.ON:t.filter((e=>e.getIn(["file_metadata","audio_enhancement_category"])===c.nu.AUDIO_WITHOUT_SPEECH)).size>0?c.Tg.OFF:c.Tg.DISABLED}function se(e){return t=>new Promise(((n,r)=>{e.progress_callback=(e,n)=>{t(R(e,n))},e.upload_succeeded_callback=async(r,i,o)=>{const a=r.file;if(o===e.asset_type||oe.canUploadDifferentAssetType(o)){let e=[];if(null!=a&&a.webkitRelativePath&&SERVER.USER.can_upload_media_folders){const t=a.webkitRelativePath.split("/");t.length&&(t.pop(),e=[...t])}if("image"===i.getIn([o,"type"]))try{var s;const t=await x.ZP.parse(a,{xmp:!0,mergeOutput:!1});if(null!=t&&null!==(s=t.dc)&&void 0!==s&&s.subject){const n=t.dc.subject;e=[...e,...n]}}catch(e){}e.length&&t(D(a,e)),t(v(a,i,o))}else t(O(a,"This file type is not supported"));const u=t(oe.finalizeUploads(e.asset_type));null!=u&&u.then((e=>{n(e)}))},e.upload_failed_callback=(n,i)=>{const o=n.file;t(O(o,i)),t(oe.finalizeUploads(e.asset_type)),r(new Error(i))},new M.Z(e).upload()}))}async function ue(e){if(!(0,j.z3)().includes(e.type))return c.nu.NO_AUDIO;const t=new ee;let n;try{n=await t.extract(e,1,10)}catch(e){return re().notify(e),c.nu.NO_AUDIO}const r=t.convertAudioBufferToWavBlob(n),i=new FormData;i.append("audio",r),i.append("sampleRateHertz",t.sampleRate.toString()),i.append("languageCode","en-US");try{const e=await fetch(SERVER.URLS.audio_enhancement_category_detection,{body:i,method:"POST",headers:{"X-CSRFToken":SERVER.CSRF.TOKEN}});if(200!==e.status)throw Error("request failed");return(await e.json()).result}catch(e){return c.nu.AUDIO_WITHOUT_SPEECH}}const ce=(0,r.UY)({attribution:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.u_.FINALIZE_ATTRIBUTION_DATA:case c.u_.UPDATE_ATTRIBUTION_DATA:return t.attribution;default:return e}},files:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix("file").data,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.u_.CANCEL_ALL:{const t=new o.ZP(e);return t.updateAll({key:["user_canceled"],value:!0}),t.data}case c.u_.ADD_FILES:{const n=new o.ZP(e),r=Object.assign({},t.opts);return delete r.file_list,t.opts.file_list.forEach((e=>{n.pushJSItem({file_obj:e.file,file_metadata:Object.assign({audio_enhancement_category:c.nu.NO_AUDIO},e.metadata),upload_opts:r,status:c.Ih.LOADING,user_canceled:!1,uploaded_asset:null,fail_message:"",tags:[]})})),n.data}case c.u_.SET_AUDIO_ENHANCEMENT_CATEGORY:{const n=new o.ZP(e),r=u(t.file_obj,n);return n.updateById(r,{key:["file_metadata","audio_enhancement_category"],value:t.audio_enhancement_category}),n.data}case c.u_.STORE_SUCCESSFUL_UPLOAD:{const n=new o.ZP(e),r=u(t.file_obj,n);return n.updateById(r,{key:["status"],value:c.Ih.VALIDATED}),n.updateById(r,{key:["uploaded_asset"],value:t.new_asset}),n.data}case c.u_.UPDATE_UPLOADED_ASSET_MEDIA_TAG:{const n=new o.ZP(e),r=u(t.file_obj,n),a=n.getById(r).get("tags"),s=i.default.List(t.tags),c=i.default.Set(a.concat(s));return n.updateById(r,{key:["tags"],value:c}),n.data}case c.u_.USER_CANCEL_FILE:{const n=new o.ZP(e),r=u(t.file_obj,n);return n.updateById(r,{key:["user_canceled"],value:!0}),n.data}case c.u_.MARK_FILE_AS_FINALIZING:{const n=new o.ZP(e);return n.updateById(t.file_id,{key:["status"],value:c.Ih.MARK_FILE_AS_FINALIZING}),n.data}case c.u_.MARK_FILE_AS_DELETING:{const n=new o.ZP(e);return n.updateById(t.file_id,{key:["status"],value:c.Ih.DELETING}),n.data}case c.u_.STORE_COMPLETED_FILE:{const n=new o.ZP(e);return n.updateById(t.file_id,{key:["status"],value:c.Ih.COMPLETED}),n.updateById(t.file_id,{key:["uploaded_asset"],value:i.default.fromJS(t.new_asset)}),n.data}case c.u_.MARK_FILE_AS_DELETED:{const n=new o.ZP(e);return n.updateById(t.file_id,{key:["status"],value:c.Ih.DELETED}),n.data}case c.u_.MARK_FILE_AS_DELETION_FAILED:{const n=new o.ZP(e);return n.updateById(t.file_id,{key:["status"],value:c.Ih.DELETE_FAILED}),n.data}case c.u_.CLEAR_NON_FAILED:{const t=new o.ZP(e),n=t.query({key:["status"],value:c.Ih.FAILED,evaluator:"!==",valuesList:[o.$7]});return t.delete(n),t.data}case c.u_.CLEAR_FAILED:{const t=new o.ZP(e),n=t.query({key:["status"],value:c.Ih.FAILED,valuesList:[o.$7]});return t.delete(n),t.data}case c.u_.STORE_FAILED_UPLOAD:{const n=new o.ZP(e),r=u(t.file_obj,n);return n.updateById(r,{key:["status"],value:c.Ih.FAILED}),n.updateById(r,{key:["fail_message"],value:t.message}),n.data}default:return e}},files_can_be_edited:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.u_.START_UPLOAD_EXPERIENCE:return!0;case c.u_.END_UPLOAD_EXPERIENCE:return!1;default:return e}},license:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user_private",t=arguments.length>1?arguments[1]:void 0;return t.type===c.u_.FINALIZE_ATTRIBUTION_DATA?t.license:e},progress:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments.length>1?arguments[1]:void 0;return t.type===c.u_.STORE_UPLOAD_PROGRESS?t.progress<0?e.delete(t.session_id):e.set(t.session_id,t.progress):e},uploaded_assets:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ZP.newFromIdPrefix("upload").data,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.u_.STORE_COMPLETED_FILE:{const n=new o.ZP(e);return t.new_asset.source!==a.VideoData.SOURCE_USER_VOICEOVER||s.Z.canMakeVoiceoverVideos()?(n.pushJSItem({type:t.new_asset_type,asset:t.new_asset}),n.data):n.data}case c.u_.REMOVE_UPLOAD:{const n=new o.ZP(e),r=t.asset.get("type"),i=t.asset.getIn([r,"uuid"]),a=n.query({key:["asset",r,"uuid"],value:i,valuesList:[o.$7]});return 1===a.size&&n.delete(a),n.data}default:return e}},showing_upload_modal:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.u_.SHOW_UPLOAD_MODAL:return!0;case c.u_.HIDE_UPLOAD_MODAL:return!1;default:return e}},current_session_uploads:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List([]),t=arguments.length>1?arguments[1]:void 0;if(t.type===c.u_.STORE_UPLOADED_ASSET_ID){let n;return n=Array.isArray(t.assetId)||i.default.List.isList(t.assetId)?e.push(...t.assetId):e.push(t.assetId),n}return e},media_tags:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===c.u_.UPDATE_UPLOAD_MEDIA_TAGS?t.mediaTags:e},folderId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.u_.START_UPLOAD_EXPERIENCE:return null;case c.u_.END_UPLOAD_EXPERIENCE:case c.u_.SET_UPLOAD_FOLDER:return t.folderId;default:return e}},[c._o.AUDIO_ENHANCEMENT]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map({[c._o.AUDIO_ENHANCEMENT_TOGGLE_STATE]:c.Tg.DISABLED}),t=arguments.length>1?arguments[1]:void 0;return t.type===c.u_.SET_AUDIO_ENHANCEMENT_TOGGLE_STATE?e.set(c._o.AUDIO_ENHANCEMENT_TOGGLE_STATE,t.payload[c._o.AUDIO_ENHANCEMENT_TOGGLE_STATE]):e}});var de=ce},59047:function(e,t,n){"use strict";n.d(t,{A$:function(){return d},E2:function(){return f},Hi:function(){return h},JN:function(){return T},O5:function(){return S},Th:function(){return c},XO:function(){return E},_9:function(){return s},_P:function(){return p},d3:function(){return l},lN:function(){return m},mO:function(){return u},yL:function(){return g}});var r=n(45970),i=n(20573),o=n(93175);function a(e){return new r.ZP(e.uploads.uploaded_assets)}function s(e,t){const n=a(e);let r=null;return n.forEach((e=>{const n=e.get("asset"),i=n.get("type");n.getIn([i,"uuid"])===t&&(r=n)})),r}function u(e,t,n){let i=a(e).query({key:["type"],value:t});return i=i.filter((e=>e.getIn(["asset","source"])===n)),i.map((e=>e.get(r.$7)))}function c(e,t){const n=a(e);return n.getById(t)?n.getById(t).get("asset"):null}function d(e,t){const n=a(e);let r=null;return n.getById(t)&&(r=n.getById(t).get("asset")),r?r.getIn([r.get("type"),"preview_url"]):null}function l(e,t){const n=a(e);let r=null;return n.getById(t)&&(r=n.getById(t).get("asset")),r?r.get("mp3_url"):null}const _=e=>e.uploads.files,E=(0,i.P1)([_],(e=>new r.ZP(e).query({key:["user_canceled"],value:!1}).sort(((e,t)=>e.get("file_obj").name>t.get("file_obj").name)))),f=(0,i.P1)([E],(e=>e.filter((e=>e.getIn(["file_metadata","audio_enhancement_category"])!==o.nu.NO_AUDIO))));function p(e){return e.uploads.current_session_uploads}function T(e,t){if(!t)return;const n=new r.ZP(_(e)).filter((e=>e.get("file_obj")===t));return n.size?n.get(0):void 0}function h(e){return e.uploads.attribution}function S(e){return e.uploads.media_tags}function g(e){const t=e.uploads.progress;if(t.size<=0)return-1;let n=0;return t.map((e=>{n+=e})),n/t.size}function m(e){const t=function(e){return e.uploads[o._o.AUDIO_ENHANCEMENT]}(e);return t.get(o._o.AUDIO_ENHANCEMENT_TOGGLE_STATE)}},93175:function(e,t,n){"use strict";n.d(t,{Ih:function(){return o},OV:function(){return u},Tg:function(){return a},_o:function(){return r},nu:function(){return s},u_:function(){return i}});const r={AUDIO_ENHANCEMENT:"audio_enhancement",AUDIO_ENHANCEMENT_TOGGLE_STATE:"toggle_state"},i={ADD_FILES:"ADD_FILES",SET_AUDIO_ENHANCEMENT_CATEGORY:"SET_AUDIO_ENHANCEMENT_CATEGORY",SET_AUDIO_ENHANCEMENT_TOGGLE_STATE:"SET_AUDIO_ENHANCEMENT_TOGGLE_STATE",STORE_UPLOAD_PROGRESS:"STORE_UPLOAD_PROGRESS",STORE_SUCCESSFUL_UPLOAD:"STORE_SUCCESSFUL_UPLOAD",STORE_UPLOADED_ASSET_ID:"STORE_UPLOADED_ASSET_ID",UPDATE_UPLOADED_ASSET_MEDIA_TAG:"UPDATE_UPLOADED_ASSET_MEDIA_TAG",STORE_FAILED_UPLOAD:"STORE_FAILED_UPLOAD",CLEAR_NON_FAILED:"CLEAR_NON_FAILED",CLEAR_FAILED:"CLEAR_FAILED",USER_CANCEL_FILE:"USER_CANCEL_FILE",CANCEL_ALL:"CANCEL_ALL",START_UPLOAD_EXPERIENCE:"START_UPLOAD_EXPERIENCE",END_UPLOAD_EXPERIENCE:"END_UPLOAD_EXPERIENCE",SET_UPLOAD_FOLDER:"SET_UPLOAD_FOLDER",FINALIZE_ATTRIBUTION_DATA:"FINALIZE_ATTRIBUTION_DATA",UPDATE_ATTRIBUTION_DATA:"UPDATE_ATTRIBUTION_DATA",UPDATE_UPLOAD_MEDIA_TAGS:"UPDATE_UPLOAD_MEDIA_TAGS",MARK_FILE_AS_DELETING:"MARK_FILE_AS_DELETING",MARK_FILE_AS_FINALIZING:"MARK_FILE_AS_FINALIZING",MARK_FILE_AS_DELETED:"MARK_FILE_AS_DELETED",STORE_COMPLETED_FILE:"STORE_COMPLETED_FILE",MARK_FILE_AS_DELETION_FAILED:"MARK_FILE_AS_DELETION_FAILED",REMOVE_UPLOAD:"REMOVE_UPLOAD",SHOW_UPLOAD_MODAL:"SHOW_UPLOAD_MODAL",HIDE_UPLOAD_MODAL:"HIDE_UPLOAD_MODAL"};let o,a,s;!function(e){e.LOADING="loading",e.FINALIZING="finalizing",e.DELETING="deleting",e.FAILED="failed",e.VALIDATED="validated",e.COMPLETED="completed",e.DELETED="deleted",e.DELETE_FAILED="delete_failed"}(o||(o={})),function(e){e.DISABLED="DISABLED",e.ON="ON",e.OFF="OFF"}(a||(a={})),function(e){e.NO_AUDIO="NO_AUDIO",e.AUDIO_WITHOUT_SPEECH="AUDIO_WITHOUT_SPEECH",e.AUDIO_WITH_SPEECH="AUDIO_WITH_SPEECH"}(s||(s={}));const u="recording"},17624:function(e,t,n){"use strict";n.d(t,{bv:function(){return s},l:function(){return r},ZP:function(){return u},oP:function(){return i.oP},CP:function(){return o.CP},XP:function(){return o.XP},hh:function(){return o.hh},Ro:function(){return o.Ro},fy:function(){return o.fy},Nj:function(){return i.Nj},hr:function(){return i.hr},N$:function(){return i.N$},oN:function(){return i.oN},G3:function(){return i.G3}});const r={HYDRATE_OVERRIDES:"HYDRATE_OVERRIDES",SET_SLIDE_TEXT_POS_AUTOMATIC:"SET_SLIDE_TEXT_POS_AUTOMATIC",SET_SLIDE_DURATION_AUTOMATIC:"SET_SLIDE_DURATION_AUTOMATIC",SET_SLIDE_BACKGROUND_TRANSFORM_AUTOMATIC:"SET_SLIDE_BACKGROUND_TRANSFORM_AUTOMATIC",SET_SLIDE_BACKGROUND_ANIMATION_AUTOMATIC:"SET_SLIDE_BACKGROUND_ANIMATION_AUTOMATIC",SET_SLIDE_BRIGHTNESS_AUTOMATIC:"SET_SLIDE_BRIGHTNESS_AUTOMATIC",SET_SLIDE_OVERRIDES:"SET_SLIDE_OVERRIDES"};var i=n(22718),o=n(15442);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{duration:s.DURATION,text_position:s.TEXT_POSITION,background_transform:s.BACKGROUND_TRANSFORM,background_animation:s.BACKGROUND_ANIMATION,brightness:s.BRIGHTNESS},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_SLIDE_TEXT_POS_AUTOMATIC:return Object.assign({},e,{text_position:!t.automatic});case r.SET_SLIDE_DURATION_AUTOMATIC:return Object.assign({},e,{duration:!t.automatic});case r.SET_SLIDE_BACKGROUND_TRANSFORM_AUTOMATIC:return Object.assign({},e,{background_transform:!t.automatic});case r.SET_SLIDE_BACKGROUND_ANIMATION_AUTOMATIC:return Object.assign({},e,{background_animation:!t.automatic});case r.SET_SLIDE_BRIGHTNESS_AUTOMATIC:return Object.assign({},e,{brightness:!t.automatic});default:return e}}const s={DURATION:!1,TEXT_POSITION:!1,BACKGROUND_TRANSFORM:!1,BACKGROUND_ANIMATION:!1,BRIGHTNESS:!1};var u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.HYDRATE_OVERRIDES:return Object.assign({},e,t.overrides);case r.SET_SLIDE_DURATION_AUTOMATIC:case r.SET_SLIDE_TEXT_POS_AUTOMATIC:case r.SET_SLIDE_BACKGROUND_TRANSFORM_AUTOMATIC:case r.SET_SLIDE_BACKGROUND_ANIMATION_AUTOMATIC:case r.SET_SLIDE_BRIGHTNESS_AUTOMATIC:return"string"!=typeof t.slide_id?e:Object.assign({},e,{[t.slide_id]:a(e[t.slide_id],t)});case r.SET_SLIDE_OVERRIDES:return Object.assign({},e,{[t.slide_id]:t.overrides});default:return e}}},22718:function(e,t,n){"use strict";n.d(t,{G3:function(){return a},N$:function(){return c},Nj:function(){return d},ZH:function(){return l},hr:function(){return u},oN:function(){return s},oP:function(){return o}});var r=n(17624),i=n(43187);function o(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)();return{type:r.l.HYDRATE_OVERRIDES,overrides:e,systemTriggered:t,parentActionGroup:n}}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,i.Z)();return{type:r.l.SET_SLIDE_TEXT_POS_AUTOMATIC,slide_id:e,automatic:t,systemTriggered:n,parentActionGroup:o}}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,i.Z)();return{type:r.l.SET_SLIDE_DURATION_AUTOMATIC,slide_id:e,automatic:t,systemTriggered:n,parentActionGroup:o}}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,i.Z)();return{type:r.l.SET_SLIDE_BACKGROUND_TRANSFORM_AUTOMATIC,slide_id:e,automatic:t,systemTriggered:n,parentActionGroup:o}}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,i.Z)();return{type:r.l.SET_SLIDE_BACKGROUND_ANIMATION_AUTOMATIC,slide_id:e,automatic:t,systemTriggered:n,parentActionGroup:o}}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,i.Z)();return{type:r.l.SET_SLIDE_BRIGHTNESS_AUTOMATIC,slide_id:e,automatic:t,systemTriggered:n,parentActionGroup:o}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,i.Z)();return{type:r.l.SET_SLIDE_OVERRIDES,slide_id:e,overrides:t,systemTriggered:n,parentActionGroup:o}}},15442:function(e,t,n){"use strict";n.d(t,{CP:function(){return d},Ro:function(){return s},XP:function(){return u},du:function(){return i},fy:function(){return a},hh:function(){return c},vq:function(){return o}});var r=n(17624);function i(e){var t;return(null===(t=e.undoable)||void 0===t?void 0:t.present.user_overrides)||{}}function o(e,t){return i(e)[t]}function a(e,t){try{return i(e)[t].text_position}catch(e){return r.bv.TEXT_POSITION}}function s(e,t){try{return i(e)[t].duration}catch(e){return r.bv.DURATION}}function u(e,t){try{return i(e)[t].background_transform}catch(e){return r.bv.BACKGROUND_TRANSFORM}}function c(e,t){try{return i(e)[t].background_animation}catch(e){return r.bv.BACKGROUND_ANIMATION}}function d(e,t){try{return i(e)[t].brightness}catch(e){return r.bv.BRIGHTNESS}}},64942:function(e,t,n){"use strict";n.d(t,{rz:function(){return u},tH:function(){return a},ZP:function(){return c},fn:function(){return s.fn},iN:function(){return o},yF:function(){return s.yF},IZ:function(){return s.IZ}});var r=n(35369),i=n(43187);function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)();return{type:u.SET_VIDEO_DATA,video_data:e,systemTriggered:t,parentActionGroup:n}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Z)();return{type:u.SET_VIDEO_DATA,video_data:e,systemTriggered:t,parentActionGroup:n}}var s=n(31309);const u={SET_VIDEO_DATA:"SET_VIDEO_DATA"};var c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.Map(),t=arguments.length>1?arguments[1]:void 0;return t.type===u.SET_VIDEO_DATA?t.video_data:e}},31309:function(e,t,n){"use strict";function r(e){return e.video_data||((e.undoable||{}).present||{}).video_data}function i(e){return e.undoable.past.length>0}function o(e){return e.undoable.future.length>0}n.d(t,{IZ:function(){return i},fn:function(){return r},yF:function(){return o}})},78089:function(e,t,n){"use strict";function r(e){return e.undoable.present.video}function i(e){return r(e).saved_template_id}function o(e){return r(e).brand_kit_id}n.d(t,{d:function(){return o},l:function(){return i}})},40346:function(e,t,n){"use strict";n.d(t,{$E:function(){return l},Bb:function(){return T},C2:function(){return f},Eh:function(){return S},H4:function(){return s},Ke:function(){return a},R6:function(){return c},UF:function(){return p},az:function(){return E},eR:function(){return u},jQ:function(){return o},lk:function(){return g},uW:function(){return h},vr:function(){return _},wk:function(){return d}});var r=n(16313),i=n(59163);const o="/editor/scene-design",a="/editor/template",s="scene",u=i.VideoData.LANDSCAPE_ASPECT_RATIO,c=i.VideoData.SQUARE_ASPECT_RATIO,d=i.VideoData.VERTICAL_ASPECT_RATIO,l=u,_=i.VideoData.LANDSCAPE_ASPECT_RATIO;let E;!function(e){e.Template="template",e.SceneDesign="sceneDesign",e.AspectRatio="aspectRatio",e.Tab="tab"}(E||(E={}));const f=i.VideoData.ALL_CATEGORIES.filter((e=>e!==i.VideoData.CATEGORY_BRAND&&!(e===i.VideoData.CATEGORY_VOICEOVER&&!r.Z.canMakeVoiceoverVideos()))),p="You have unsaved changes. Really quit?",T={thumbnail_url:"https://storage.googleapis.com/lumen5-prod-images/tmpTCYllZ.jpg",preview_url:"https://storage.googleapis.com/lumen5-prod-images/tmp9XP7wr.jpg",render_url:"https://storage.googleapis.com/lumen5-prod-images/photo-1542143307097-c42d1d164b81kxMdaFj9dISh.jpg",source:6,source_id:"OA3XvcIryXk",license:"CC0",attribution:"",is_editorial:!1,width:5472,height:3648,type:"image",uuid:"05edac6a-3f63-493e-8c5f-ecfc738a4b1f"};let h,S;!function(e){e.Grid="scene_design_editor:grid_status",e.Guide="scene_design_editor:guide_status",e.Transition="scene_design_editor:transition_status",e.Watermark="scene_design_editor:watermark_status"}(h||(h={})),function(e){e.True="true",e.False="false"}(S||(S={}));const g=1},68754:function(e,t,n){"use strict";n.d(t,{$s:function(){return x},Dd:function(){return W},Hp:function(){return y},LU:function(){return k},M5:function(){return D},Ms:function(){return _},QT:function(){return E},R:function(){return Y},Uq:function(){return q},VQ:function(){return J},Wm:function(){return ee},Y8:function(){return X},_s:function(){return R},bj:function(){return j},d7:function(){return s},d9:function(){return v},dD:function(){return O},dU:function(){return h},gS:function(){return S},gd:function(){return B},jH:function(){return b},js:function(){return V},kc:function(){return te},ks:function(){return Q},lY:function(){return p},mR:function(){return u},n5:function(){return K},n8:function(){return M},nF:function(){return U},nt:function(){return w},nx:function(){return z},pM:function(){return f},pY:function(){return C},rF:function(){return d},sT:function(){return L},tr:function(){return m},uZ:function(){return c},uj:function(){return g},ut:function(){return l},yZ:function(){return I},z2:function(){return P},zf:function(){return N}});var r=n(59163),i=n(50361),o=n.n(i),a=n(40346);function s(e,t){const n=t.split(".");return x(e,n)}function u(e,t,n){const r=t.split(".");if(F(e,r))return H(e,r,n)}function c(e,t){return Math.max(e[0],Math.min(e[1],t))}function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("_").join(" ");return n=n.replace(/[A-Z][a-z]+/g," $&").toLowerCase(),t&&(n=n.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")),n}function l(e){return d(e.split(".").slice(-1)[0])}function _(e){return[(16711680&e)>>>16,(65280&e)>>>8,255&e]}function E(e){return 65536*(e=e.map((e=>parseInt(e))))[0]+256*e[1]+e[2]}function f(e){try{return JSON.parse(e),!0}catch(e){return!1}}const p=async function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="text/plain";let i={[e]:t};n&&(i={...await T(),[e]:t});const o=JSON.stringify(i),a=new Blob([o],{type:r}),s="clipboard-write",u=await navigator.permissions.query({name:s});if("granted"===u.state||"prompt"===u.state){const e=new ClipboardItem({[r]:a});await navigator.clipboard.write([e])}},T=async()=>{const e=await navigator.permissions.query({name:"clipboard-read"});if("granted"===e.state||"prompt"===e.state){const e=await navigator.clipboard.readText();try{return JSON.parse(e)}catch{return{}}}return{}},h=async e=>{const t=await T();return e in t?t[e]:(console.warn(`Clipboard does not contain any data for ${e}`),null)},S=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?1===(e.match(/:/g)||[]).length&&1!==e.length&&!!e.match(/^[a-z0-9-_:]+$/i):!!e.match(/^[a-z0-9-_]+$/i)},g=e=>!!e.match(/^[a-z0-9-_]+$/i);function m(e,t,n){const r=t.split(".")[0],i=t.substring(r.length+1),a=o()(e[r]);u(a,i,n),e[r]=a}function I(e,t){t=t.filter((t=>t.startsWith(e)));let n=1;for(;;){const r=`${e}_${n}`;if(!t.includes(r))return r;n+=1}}function R(e){switch(e){case r.VideoData.MEDIA_ASSET_TYPE:return"media";case r.VideoData.TEXT_ASSET_TYPE:return"text";case r.VideoData.COLOR_ASSET_TYPE:return"color";case r.VideoData.LOTTIE_ASSET_TYPE:return"lottie";case r.VideoData.GROUP_ASSET_TYPE:return"group";case r.VideoData.RECTANGLE_ASSET_TYPE:return"rectangle";case r.VideoData.CIRCLE_ASSET_TYPE:return"circle";case r.VideoData.GRADIENT_ASSET_TYPE:return"gradient";case r.VideoData.ICON_ASSET_TYPE:return"icon"}}function A(e,t,n,i){var o,a,s,u;const c=Math.min(n,i);e.maxWidth&&(e.maxWidth*=n),e.maxHeight&&(e.maxHeight*=i),e.textScaleFactor&&(e.textScaleFactor=t===r.VideoData.LANDSCAPE_ASPECT_RATIO?1:.875),null!==(o=e.transformation)&&void 0!==o&&null!==(a=o.position)&&void 0!==a&&a.x&&(e.transformation.position.x*=n),null!==(s=e.transformation)&&void 0!==s&&null!==(u=s.position)&&void 0!==u&&u.y&&(e.transformation.position.y*=i),e.lineThickness&&(e.lineThickness*=c),e.radius&&(e.radius*=c),e.startRadius&&(e.startRadius*=c),e.endRadius&&(e.endRadius*=c),e.radiusOffset&&(e.radiusOffset*=c),e.rectWidth&&(e.rectWidth*=n),e.rectHeight&&(e.rectHeight*=i),e.childMaxHeightProportions&&(e.childMaxHeightProportions.array?e.childMaxHeightProportions.array.forEach(((t,n)=>{e.childMaxHeightProportions.setValueAtIndex(t*i,n)})):e.childMaxHeightProportions.forEach(((t,n)=>{e.childMaxHeightProportions[n]*=i}))),e.mask&&A(e.mask,t,n,i)}async function y(e,t){if(e.aspectRatio===t)return;const n=e.referenceResolution.width,i=e.referenceResolution.height,o=r.VideoData.BASE_SLIDE_DIMENSIONS[t],a=o.width/n,s=o.height/i;ee(e).getChildren({deep:!0}).forEach((e=>{A(e,t,a,s)})),Object.keys(ee(e).textPositionPresets).forEach((n=>{ee(e).textPositionPresets[n].forEach((e=>{A(e,t,a,s)}))}))}function v(e){const t=Q()?1:0;return e.scenes[t].save()}function O(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["template","aspectRatio","sceneDesign"];const t=new URLSearchParams(window.location.search);return Object.fromEntries(e.map((e=>[e,t.get(e)])))}function D(e,t,n){return`?template=${e}&sceneDesign=${t}&aspectRatio=${n}`}function C(e){let{templateId:t,sceneDesignId:n,aspectRatio:r}=e;return`/editor/scene-design/${D(t,n,r)}`}function N(e){let{templateId:t,sceneDesignId:n,aspectRatio:r}=e;return`/editor/template${D(t,n,r)}`}function L(e,t,n){window.history.pushState({},"",D(e,t,n))}function P(e){return{[r.VideoData.TEMPLATE_STATUS_DRAFT]:"grey",[r.VideoData.TEMPLATE_STATUS_ACTIVE]:"green",[r.VideoData.TEMPLATE_STATUS_ARCHIVED]:"red"}[e]||"black"}function b(e,t){switch(e){case r.VideoData.TEMPLATE_STATUS_ACTIVE:case r.VideoData.TEMPLATE_STATUS_ARCHIVED:return t?"Publishing...":"Publish";case r.VideoData.TEMPLATE_STATUS_DRAFT:default:return t?"Saving...":"Save"}}function U(e){return e.animationManager.introEnd}function w(e){return!!e.hasDynamicStyle&&(function(e){if(!e.hasObjectAnimation)return!1;return G([...e.objectAnimation],U(e))}(e)||M(e)||V(e))}function M(e){return!!e.hasColorGraphic&&G(e.colorGraphics.reduce(((e,t)=>e.concat(...t.animation||[])),[]),U(e))}function V(e){return!!e.hasAlphaGraphic&&G(e.alphaGraphics.reduce(((e,t)=>e.concat(...t.animation||[])),[]),U(e))}function G(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.some((e=>k(e,t)))}function k(e,t){return e.duration+e.delay>t}const x=(e,t)=>{let n=e;for(let e=0;e<t.length;e++){if(!n)return;const r=t[e].match(/\[([0-9]+)\]/);if(r)n=n[t[e].slice(0,r.index)][r[1]];else{if(null==n)return;if(!(t[e]in n))return;n=n[t[e]]}}return n},F=(e,t)=>void 0!==x(e,t),H=(e,t,n)=>{const r=t.slice(),i=r.pop(),o=x(e,r),a=i.match(/\[([0-9]+)\]/);if(a){r.push(i.slice(0,a.index));const t=x(e,r);t[a[1]]!==n&&(t[a[1]]=n)}else o[i]!==n&&(o[i]=n)};function B(e){return Promise.all(e.map(Z))}function Z(e){return new Promise(((t,n)=>$.ajax({url:e,type:"HEAD",success:()=>{t(e)},error:t=>{let r=`There is something wrong with URL ${e}. Typo? Are you online?`;404===t.status&&(r=`File not found: ${e}`),n(new Error(r))}})))}function j(e){const t=new URLSearchParams(window.location.search);if(Object.entries(e).forEach((e=>{let[n,r]=e;r?t.set(n,r):t.delete(n)})),t.has(a.az.AspectRatio)||t.set(a.az.AspectRatio,a.vr),!t.has(a.az.Tab)){const e=t.has(a.az.AspectRatio)?t.get(a.az.AspectRatio):a.$E;t.set(a.az.Tab,e)}return"?"+t.toString()}function Y(e,t){window._luminary_data||(window._luminary_data={}),window._luminary_data[e]=t}function W(e){const t=[];return e.readonlyProperties&&t.push(...e.readonlyProperties),e.propertiesToSerialize&&t.push(...e.propertiesToSerialize),e.editableProperties&&t.push(...e.editableProperties),t}function K(e,t){e===r.VideoData.LOTTIE_RENDERER_SVG&&(t<=1e3*r.VideoData.LOTTIE_RENDERER_SVG_MAX_FILESIZE||window.alert(`Lottie asset (${Math.round(t/1e3)} kB) is too large`))}function q(e){return localStorage.getItem(e)}function X(e,t){localStorage.setItem(e,t)}function J(e){return e===a.Eh.True}function z(e){return e?a.Eh.True:a.Eh.False}function Q(){return window.location.pathname===`${a.jQ}/`}function ee(e){const t=Q()?1:0;return e.sceneGroups[t].scenes[0]}function te(e){if(!Q())throw new Error("Dummy scene (used for transition preview) is only available on scene editor.");return e.sceneGroups[0].scenes[0]}},79783:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(59163),i=n(28074),o=n(68754),a=n(96510);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return e.filter((e=>e.isEditable)).filter((e=>e.classType!==r.VideoData.MEDIA_ASSET_TYPE||!(0,i.DR$)(e))).filter((e=>e.classType!==r.VideoData.TEXT_ASSET_TYPE||!(0===e.text.replace(/\s+/g," ").trim().length)))}function c(e){return e.map((e=>(delete e.textSize,delete e.normalStyle,delete e.highlightStyle,delete e.colorGraphics,delete e.alphaGraphics,e)))}class d{constructor(e){s(this,"sceneAssets",[]),s(this,"subsceneAssets",[]),s(this,"attribution",void 0),s(this,"musicVolumeOverride",void 0),s(this,"autoCalcSubsceneDuration",void 0),s(this,"duration",void 0),s(this,"subsceneDurations",[]),this.sceneAssets=this._getUserEditedSlideLevelElements(e),this.subsceneAssets=this._getUserEditedSubslideLevelElements(e),this.attribution=e.attribution,this.musicVolumeOverride=e.sceneGroup.musicVolumeOverride,this.autoCalcSubsceneDuration=e.autoCalcSubsceneDuration,this.duration=e.duration,this.subsceneDurations=e.subscenes.map((t=>t.duration??e.duration))}copyContentToScene(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.attribution=this.attribution,e.sceneGroup.musicVolumeOverride=this.musicVolumeOverride,this._copySubscenesToScene(e,t,n,i),this.sceneAssets.forEach((t=>{const{xTranslation:n,yTranslation:i,scaleX:a,scaleY:s,...u}=t,c=e.getChildByName(t.name);c&&c.isEditable&&(c.classType!==r.VideoData.ICON_ASSET_TYPE?(c.loadEditable(u),c.classType===r.VideoData.MEDIA_ASSET_TYPE&&o&&(c.xTranslation=n,c.yTranslation=i,c.scaleX=a,c.scaleY=s)):c.replace(t.sourceData))})),e.getChildrenByType(r.VideoData.TEXT_ASSET_TYPE,{deep:!0}).filter((e=>e.isEditable)).forEach((e=>{e.setFontSizeToFitAllText()}))}copyTalkingHeadContentToScene(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;this.copyContentToScene(e,t,n,!1,!1);const r=this.sceneAssets.find((e=>e.linkToSceneGroup)),o=(0,a.T7)(e);r&&o&&(0,i.QOr)(o,r)}_copySubscenesToScene(e,t,n,i){let a=!1;if(t===r.VideoData.CATEGORY_TALKING_HEAD&&e.sceneCategory===r.VideoData.CATEGORY_ORDINARY?(a=!0,e.autoCalcSubsceneDuration=!0):e.autoCalcSubsceneDuration=this.autoCalcSubsceneDuration,!a)for(;e.subscenes.length<Math.min(this.subsceneDurations.length,n);)e.addSubscene();if(this.autoCalcSubsceneDuration)n<this.subsceneDurations.length?e.duration=this.subsceneDurations.slice(0,n).reduce(((e,t)=>e+t),0):e.duration=this.duration;else for(let t=0;t<e.subscenes.length;t++)e.subscenes[t].duration=this.subsceneDurations[t];a||this.subsceneAssets.slice(0,n).forEach(((t,n)=>{e.subscenes.length<=n&&e.addSubscene(n),t.forEach((t=>{if(!e.subscenes[n].hasChildByName(t.name,{deep:!0}))return;const a=e.subscenes[n].getChildByName(t.name,{deep:!0});if(!a.isEditable)return;if(a.classType===r.VideoData.ICON_ASSET_TYPE)return void a.replace(t.sourceData);const{style:s=null,...u}=t;if(a.loadEditable(u),a.classType===r.VideoData.TEXT_ASSET_TYPE&&s&&i)for(const[e,t]of Object.entries(s))(0,o.mR)(a,e,t)}))}))}_getUserEditedSlideLevelElements(e){return c(u((0,i.NPm)(e)).map((e=>{const t=e.saveEditable();return e.classType===r.VideoData.MEDIA_ASSET_TYPE&&(t.linkToSceneGroup=e.linkToSceneGroup,t.mediaTargetResolution=e.mediaTargetResolution,t.xTranslation=e.xTranslation,t.yTranslation=e.yTranslation,t.scaleX=e.scaleX,t.scaleY=e.scaleY),t})))}_getUserEditedSubslideLevelElements(e){return 0===e.subscenes.length?[]:e.subscenes.map((e=>c(u((0,i.F6_)(e)).map((e=>{const t=e.saveEditable();if(e.classType===r.VideoData.TEXT_ASSET_TYPE){t.style={},t.style.visibleWithUpdate=e.visibleWithUpdate,t.style.textSize=e.textSize,t.style["normalStyle.fontUrl"]=e.normalStyle.fontUrl,t.style["normalStyle.textColor"]=e.normalStyle.textColor,t.style["highlightStyle.fontUrl"]=e.highlightStyle.fontUrl,t.style["highlightStyle.textColor"]=e.highlightStyle.textColor;for(const[n,r]of Object.entries(e.buildColorGraphicsMap()))t.style[n]=r}return t})))))}}},55973:function(e,t,n){"use strict";n.d(t,{RV:function(){return s},V9:function(){return o},fj:function(){return a}});var r=n(36062),i=n(43187);function o(e){const t=[];return e.filter((e=>Object.prototype.hasOwnProperty.call(u,e.type))).forEach((e=>{e.value.forEach((n=>{const r="image"===e.type?n.url:n.text,o=u[e.type];"atomic"!==o&&void 0===r||t.push({key:(0,i.Z)(),text:r,type:o})}))})),{blocks:t,entityMap:{}}}function a(e){const t=e.blocks.filter((e=>"atomic"===e.type||void 0!==e.text));return Object.assign({},e,{blocks:t})}function s(e){const t=[],n=[];let i,o=0,a=[];return e.getCurrentContent().getBlocksAsArray().filter((e=>e.getText().trim().length>0)).forEach((e=>{const s=e.getType(),u=s===r.BW.ul||s===r.BW.ol;!u&&i&&i!==s&&(t.push({type:c[i],value:a}),i=null,a=[]),s===r.BW.atomic?t.push({type:"image",value:[{url:e.getText()}]}):u?(i=s,a.push({text:e.getText(),index:o}),n.push(e.getText()),o++):(t.push({type:c[s],value:[{text:e.getText(),index:o}]}),n.push(e.getText()),o++)})),{articleNodes:t,articleSentences:n}}const u={text:r.BW.paragraph,title:r.BW.h1,header_1:r.BW.h1,header_2:r.BW.h2,header_3:r.BW.h3,header_4:r.BW.h4,header_5:r.BW.h5,header_6:r.BW.h6,unordered_list:r.BW.ul,ordered_list:r.BW.ol,blockquote:r.BW.quote,image:r.BW.atomic,code:r.BW.code},c=(()=>{const e={};for(const t in u)e[u[t]]=t;return e[r.BW.unstyled]="text",e[r.BW.section]="text",e})()},58802:function(e,t,n){"use strict";function r(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n]*e[n];return Math.sqrt(t)}function i(e,t){return function(e,t){let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}(e,t)/(r(e)*r(t))}n.d(t,{C0:function(){return d},nM:function(){return f},ds:function(){return S},u7:function(){return T},WR:function(){return g},I4:function(){return h}});var o=n(18446),a=n.n(o),s=n(28074),u=n(59163);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=6;class l{static rgbToDecimal(e,t,n){return(e<<16)+(t<<8)+n}static rgb(e){return[e>>16&255,e>>8&255,255&e]}static luminance(e){const t=e.map((e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)));return.2126*t[0]+.7152*t[1]+.0722*t[2]}static rgbContrast(e,t){const n=l.luminance(e),r=l.luminance(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}}class _{constructor(e){c(this,"colors",void 0),c(this,"colorNames",void 0),c(this,"luminanceOrder",void 0),this.colors=e,this.colorNames=[...Array(this.colors.length).keys()].map((e=>"colors_"+e));const t=this.colors.map(((e,t)=>({colorName:"colors_"+t,luminance_val:l.luminance(l.rgb(e.color))})));t.sort(((e,t)=>e.luminance_val===t.luminance_val?0:e.luminance_val<t.luminance_val?-1:1)),this.luminanceOrder={},t.forEach(((e,t)=>{this.luminanceOrder[e.colorName]=t}))}findDuplicateColors(){const e={},t=new Set;return this.colors.forEach(((n,r)=>{e[n.color]=e[n.color]||[],e[n.color].length>0&&e[n.color].forEach((e=>{t.add(`${e} ${r}`),t.add(`${r} ${e}`)})),e[n.color].push(r)})),t}}class E{constructor(){c(this,"props",void 0),c(this,"darkestPropName",void 0),c(this,"darkestLuminance",void 0),c(this,"darkestColorReference",void 0),this.props=[],this.darkestPropName=null,this.darkestLuminance=null,this.darkestColorReference=null}addColorProp(e,t,n){this.props.push({propName:e,propValue:t});const r=l.luminance(l.rgb(n));(null===this.darkestLuminance||r<this.darkestLuminance)&&(this.darkestPropName=e,this.darkestColorReference=t,this.darkestLuminance=r)}validateColorPermutation(e,t,n){const r=t[n.indexOf(this.darkestColorReference)],i=n[r],o=e[i];return this.props.filter((e=>e.propName!==this.darkestPropName)).map((r=>{const i=t[n.indexOf(r.propValue)],a=n[i];return!(e[a]<=o)})).every((e=>!0===e))}}function f(e,t,n){const r=[],i=[],o=[];return e.forEach(((e,t)=>{const n=e.color,i=l.rgb(n);r.push({index:t,luminance:l.luminance(i),alphaEditable:e.alphaEditable,color:n})})),t.forEach(((e,t)=>{const n=[e.r,e.g,e.b];i.push({index:t,luminance:l.luminance(n),color:l.rgbToDecimal(n[0],n[1],n[2]),alpha:e.a/100,isSelected:!1})})),r.forEach((e=>{const t=i.filter((e=>!1===e.isSelected)).reduce((function(t,n){return Math.abs(n.luminance-e.luminance)<Math.abs(t.luminance-e.luminance)?n:t}));o.push({color:t.color,alpha:t.alpha,alphaEditable:e.alphaEditable}),n||(t.isSelected=!0)})),o}function p(e,t,n,r){const i=e.buildTemplateReferenceMap(),o={},a=new Set,c={},d=new _(r.colors),l=new Set([s.W3g]),f=d.findDuplicateColors(),p=d.colorNames,T=d.luminanceOrder,h=e.getChildren({deep:!0}).filter((e=>e.name in i)),S=function(e,t,n){const r=e.buildTemplateReferenceMap(),i=e.getChildren({deep:!0}).filter((e=>e.name in r));let o=null,a=!1,c=!1,d=0;for(let e=0;e<i.length;e++){const l=i[e];if(l.mediaTargetResolution){const e=l.mediaTargetResolution.width*l.mediaTargetResolution.height;if(e>=d)if(l.classType===s.dpc){const i=e===t,a=l.thumbnailUrl!==u.VideoData.INVISIBLE_IMAGE;if(l.isEditable&&i&&a)o=null,d=0,c=!0;else if(c)for(const t in r[l.name]){const i=r[l.name][t];n.includes(i)&&!t.includes("Shadow")&&(o=n.indexOf(i),d=e)}}else if(l.classType===s.v9E&&!a)for(const t in r[l.name]){const i=r[l.name][t];!n.includes(i)||t.includes("Shadow")||t.includes("Channel")||(o=n.indexOf(i),d=e,l.classType===s.v9E&&(a=!0))}}}return o}(e,t,p);null!==S&&a.add(S);const g=new Set;return h.forEach((e=>{const t=i[e.name];o[e.name]=o[e.name]||new Set;let s=null;for(const i in t){const u=t[i],d=!(n.includes(e.name)||i.includes("Shadow")||i.includes("Alpha")),_=p.includes(u);if(_&&o[e.name].add(i),d&&_)if(l.has(i))c[u]=c[u]||0,e.textHighlights&&e.textHighlights.length>0&&(a.add(p.indexOf(u)),c[u]+=1);else if(i.includes("filters")){if(i.includes("firstColor")||i.includes("secondColor")){const e=r.colors[p.indexOf(u)];s=s||new E,s.addColorProp(i,u,e.color),a.add(p.indexOf(u))}}else a.add(p.indexOf(u))}null!==s&&g.add(s)})),{childColorProps:o,relevantColors:a,duplicateColors:f,backgroundColor:S,duotoneFilters:g,luminanceOrder:T,colorNames:p}}function T(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6;const s=p(e,t,n,r),u=s.colorNames,c=e=>e.map(((t,n)=>{let i=[];for(let e=0;e<n;e++)i=i.concat(l.rgbContrast(l.rgb(r.colors[n].color),l.rgb(r.colors[e].color)));for(let t=n+1;t<e.length;t++)i=i.concat(l.rgbContrast(l.rgb(r.colors[n].color),l.rgb(r.colors[t].color)));return[n,i]})),d=e=>{const t=[],n=new Set,r=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===e.length){const e=[];i.forEach(((t,n)=>{s.relevantColors.has(n)?e.push(`${t}`):e.push("_")}));let r=!0;s.duotoneFilters.forEach((e=>{e.validateColorPermutation(s.luminanceOrder,i,u)||(r=!1)}));const o=e.toString();r&&!n.has(o)&&(t.push(i),n.add(o))}else for(let t=0;t<e.length;t++){const n=e.slice(),o=n.splice(t,1),a=i.length;s.duplicateColors.has(`${a} ${o[0]}`)||s.duplicateColors.has(`${o[0]} ${a}`)||r(n.slice(),i.concat(o))}};return r(e),t},_=e=>[].concat(...e.map((e=>e[1]))),E=(e,t,n)=>{const r=_(e),o=[];return t.forEach(((e,t)=>{o.push([t,i(r,_(e))])})),o.sort((function(e,t){return t[1]-e[1]})),o.slice(0,n)},f=[...Array(r.colors.length).keys()],T=d(f).filter((e=>!a()(e,f)));let h=[f];if(T.length>0){const e=T.map((e=>c(e))),t=null===s.backgroundColor?o-1:10*o,n=E(e[0],e,t).map((e=>T[e[0]]));if(t<o)h=h.concat(n);else{const e=[...Array(r.colors.length).keys()].map((e=>n.filter((t=>t[s.backgroundColor]===e))));let i=(s.backgroundColor+2)%r.colors.length;for(let n=0;n<t;n++){if(e[i]){const t=e[i].shift();t&&h.push(t)}if(h.length===o)break;i=(i+1)%r.colors.length}}}const S=e.buildTemplateReferenceMap();return{colorShuffles:h,childColorProps:s.childColorProps,templateReferenceMap:S}}function h(e){return`${e.toString(16).padStart(6,"0")}`}function S(e){return parseInt(e.split("_")[1])}function g(e){return parseInt(e.replace("#",""),16)}},60668:function(e,t,n){"use strict";function r(e){return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"}function i(e){const t=[];return t.push(e>>16&255),t.push(e>>8&255),t.push(255&e),t}n.d(t,{Ms:function(){return i},QE:function(){return s},_Z:function(){return r}});const o=window.matchMedia("(prefers-reduced-motion: reduce)");let a=!1;o&&!o.matches||(a=!0);const s=a},16313:function(e,t){"use strict";const n={_isInExperiment:e=>{var t;return!(void 0===window.SERVER||null===(t=window.SERVER.USER)||void 0===t||!t.experiments)&&window.SERVER.USER.experiments.includes(e)},canTranslateVideos:()=>!!SERVER.USER&&SERVER.USER.capabilities.can_translate_videos,canUseGPTSummarization:()=>n._isInExperiment("gpt_summarization")||n._isInExperiment("gpt_summarization_opt_in"),canMakeVoiceoverVideos:()=>{var e;return n._isInExperiment("voiceover_videos")||(null===(e=window.SERVER)||void 0===e?void 0:e.END_TO_END_TESTING_MODE)},canUseGPTMediaQuery:()=>n._isInExperiment("gpt_media_query_suggestions"),canUseDocToScript:()=>n._isInExperiment("doc_to_script")};t.Z=n},77551:function(e,t){"use strict";window._FOCUS_AND_SCROLL_ACTIVE_ANIMATION_COUNT=0;class n{static scrollToSlide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=n._jqueryGetSlide(e);0!==r.length&&n._verticalScrollTo(e,r,t)}static checkIfActiveSceneIsVisibleInViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=n._jqueryGetSlide(e);if(0===r.length)return;const i=n._jqueryGetSubslide(r,t),o=n._get_scroll_parent();return n._checkIfElementIsVisibleInVerticalViewport(o,i)}static calculateCentermostSlideInfo(){return n._calculateLongFormCenteredSlideInfo()}static _getVisibleHeight(e){let t=0;const{top:n,bottom:r}=e.getBoundingClientRect();return t=r-Math.abs(n),t<0?0:t}static _calculateLongFormCenteredSlideInfo(){const e=$(".slide-container"),t=$(".creator-scroll-padding")[0].clientHeight,r=n._get_scroll_parent()[0].clientHeight/2;let i=null,o=null,a=0,s=t,u=!1,c=null;for(let t=0;t<e.length&&!u;t++){const n=$(e[t]).find(".slide-row")[0],d=$(e[t]).find(".slide-row.subslide-element");if(i=e[t].dataset.slideid?e[t].dataset.slideid:null,o=e[t].dataset.groupid?e[t].dataset.groupid:null,c=t,s+=this._getVisibleHeight(n),s>=r)break;if(d.length>0)for(let e=0;e<d.length;e++)if(s+=this._getVisibleHeight(d[e]),s>=r){a=e+1,u=!0;break}}return{center_slide_id:i,center_slide_index:c,center_sub_scene_index:a,abort:u,center_slide_group_id:o}}static _verticalScrollTo(e,t,r){let i=!1;const{center_slide_id:o,center_sub_scene_index:a}=n.calculateCentermostSlideInfo();if(o===e?(a&&r!==a||0===r||r>0)&&(i=!0):i=!0,i){const e=n._jqueryGetSubslide(t,r),i=t.position().top,o=n._get_scroll_parent(),a=n._calculateVerticalScroll(o,e,i);null!==a&&n._get_scroll_parent().animate({scrollTop:a},{duration:450,start:()=>{window._FOCUS_AND_SCROLL_ACTIVE_ANIMATION_COUNT++},complete:()=>{window._FOCUS_AND_SCROLL_ACTIVE_ANIMATION_COUNT--}})}}static _calculateVerticalScroll(e,t,n){const r=e.scrollTop(),i=(r+e.height()-r)/2-t.height()/2,o=t.position().top+n;return o<i?o-i-t.height():o-i+100}static _checkIfElementIsVisibleInVerticalViewport(e,t){const n=e[0].getBoundingClientRect(),r=t[0].getBoundingClientRect(),i=.4*r.height;return r.top+i>n.top&&r.bottom-i<n.bottom}static _jqueryGetSlide(e){return $(`[data-slideid="${e}"]`)}static _jqueryGetSubslide(e,t){const r=e.find(".slide-row");if(r.length<=t)throw new Error(n.COULD_NOT_FIND_SUBSLIDE);return $(r[t])}static _get_scroll_parent(){return $("#long-form-creator-container")}}var r,i,o;o="could not find subslide",(i="COULD_NOT_FIND_SUBSLIDE")in(r=n)?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,t.Z=n},18563:function(e,t,n){"use strict";n.d(t,{Bg:function(){return h},KN:function(){return S},IJ:function(){return g},X1:function(){return T}});var r=n(64061),i=n.n(r),o=n(43187);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s="audio/webm",u="audio/ogg",c="video/webm",d="video/webm",l="video/mp4",_="audio",E="video";function f(){var e,t,n,r;return null!==(e=window)&&void 0!==e&&null!==(t=e.MediaRecorder)&&void 0!==t&&t.isTypeSupported("audio/ogg;codecs=opus")?u:null!==(n=window)&&void 0!==n&&null!==(r=n.MediaRecorder)&&void 0!==r&&r.isTypeSupported("audio/webm;codecs=opus")?s:null}function p(){var e,t,n,r,i,o;return null!==(e=window)&&void 0!==e&&null!==(t=e.MediaRecorder)&&void 0!==t&&t.isTypeSupported(c)?c:null!==(n=window)&&void 0!==n&&null!==(r=n.MediaRecorder)&&void 0!==r&&r.isTypeSupported(d)?d:null!==(i=window)&&void 0!==i&&null!==(o=i.MediaRecorder)&&void 0!==o&&o.isTypeSupported(l)?l:null}function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;const t=e===_?null!==f():null!==p;return navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof MediaRecorder&&t}const h={INACTIVE:"inactive",RECORDING:"recording",PAUSED:"paused"};class S{constructor(e){this._recordingType=(null==e?void 0:e.recordingType)||_,this._useCanvas=(null==e?void 0:e.useCanvas)??!1,this._mirrorVideo=((null==e?void 0:e.mirrorVideo)&&this._useCanvas)??!1,T(this._recordingType)?(this._recorder=null,this._recordedBlob=[],this._deviceStream=null,this._stream=null,this._stream_history=[],this._initialRenderFrameId,this._updateRenderFrameId,this._audioType=f(),this._audioBlob=null,this._mediaBlob=null,this._mediaType=p(),this._preCanvasVideoElm=null,this._internalClock=new class{constructor(){a(this,"_lapTimes",void 0),a(this,"_currentLapId",void 0),this._lapTimes={},this._currentLapId=null}start(){this._currentLapId||(this._currentLapId=(0,o.Z)()),this._lapTimes[this._currentLapId]={startTime:(new Date).getTime(),endTime:null}}pause(){this._currentLapId&&this._lapTimes[this._currentLapId]&&(this._lapTimes[this._currentLapId].endTime=(new Date).getTime(),this._currentLapId=null)}get totalDuration(){const e=Object.keys(this._lapTimes);return e.length<=0?0:1===e.length&&this._currentLapId?(new Date).getTime()-this._lapTimes[this._currentLapId].startTime:e.reduce(((e,t)=>{const n=this._lapTimes[t].startTime,r=this._lapTimes[t].endTime;return n?r?e+(r-n):e+((new Date).getTime()-n):e}),0)}reset(){this._lapTimes={},this._currentLapId=null}stop(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pause();const t=this.totalDuration;return e&&this.reset(),t}}):console.error("The current device does not support the MediaRecorder API.")}get fileExtension(){if(this._recordingType===_){if(this._audioType===s)return"webm";if(this._audioType===u)return"ogg";throw new Error("No applicable audio type was found. No file extension could be provided.")}if(this._recordingType===E)return"mp4";throw new Error("Recording type was undefined.")}get audioBlob(){return this._audioBlob}get audioType(){return this._audioType}get mediaBlob(){return this._mediaBlob}get state(){return this._recorder?this._recorder.state:h.INACTIVE}get recordedTime(){return this._internalClock.totalDuration}async getAudioInputs(e){return new Promise(((t,n)=>{navigator.mediaDevices.enumerateDevices().then((r=>{1!==r.length||r[0].id||n(Error("Recorder permissions are required to get audio inputs."));const{includeDefault:i=!1}=e||{};let o=r.filter((e=>"audioinput"===e.kind)).map((e=>({label:e.label,id:e.deviceId})));i||(o=o.filter((e=>"default"!==e.id))),t(o)})).catch((e=>{i().notify(e),n(e)}))}))}async getVideoInputs(){return new Promise(((e,t)=>{navigator.mediaDevices.enumerateDevices().then((n=>{1!==n.length||n[0].id||t(Error("Recorder permissions are required to get video inputs."));const r=n.filter((e=>"videoinput"===e.kind)).map((e=>({label:e.label,id:e.deviceId})));e(r)})).catch((e=>{i().notify(e),t(e)}))}))}async setup(e){var t,n;this.reset();const r=null==e||null===(t=e.audio)||void 0===t?void 0:t.deviceId,o=null==e||null===(n=e.video)||void 0===n?void 0:n.deviceId,a=r?{audio:{deviceId:r}}:{audio:!0},s=o?{video:{deviceId:o}}:{video:{width:{ideal:1920},height:{ideal:1080}}},u=this._recordingType===_?a:{...a,...s};return new Promise(((e,t)=>{navigator.mediaDevices.getUserMedia(u).then((async t=>{this._deviceStream=t;let n=t;if(this._useCanvas){const e=(await this._createCanvasStream(t)).getTracks()[0],r=t.getAudioTracks()[0],i=new MediaStream([e,r]);this._stream_history.push(t),n=i}n&&(this._stream_history.push(n),this._recorder=new MediaRecorder(n),this._recorder.ondataavailable=e=>{e.data.size>0&&this._recordedBlob.push(e.data)},this._recorder.onerror=e=>{throw e},e(n))})).catch((e=>{i().notify(e),t(e)}))}))}async startRecording(){if(!this._recorder)throw new Error("The recording device needs to be set up first.");return new Promise(((e,t)=>{this._recordedBlob=[],this._recorder.onstart=t=>{e(t)},this._recorder.start(),this._internalClock.start()}))}pauseRecording(){if(!this._recorder)throw new Error("The recording device needs to be set up first.");this._recorder.state!==h.INACTIVE&&(this._recorder.pause(),this._internalClock.pause())}resumeRecording(){if(!this._recorder)throw new Error("The recording device needs to be set up first.");this._recorder.state!==h.INACTIVE&&(this._recorder.resume(),this._internalClock.start())}async stopRecording(){if(!this._recorder)throw new Error("The recording device needs to be set up first.");return new Promise(((e,t)=>{this._recorder.onstop=n=>{this._recordedBlob.length||t(new Error("No data was captured during recording.")),this._stopStreams(),this._recordingType===_&&(this._audioBlob=new Blob(this._recordedBlob,{type:this._audioType})),this._recordingType===E&&(this._mediaBlob=new Blob(this._recordedBlob,{type:this._mediaType})),e()},this._recorder.stop(),this._internalClock.stop()}))}reset(){this._audioBlob=null,this._mediaBlob=null,this._recorder=null,this._recorderdBlob=[],this._stopStreams(),this._internalClock&&this._internalClock.reset()}_stopStreams(){this._stream&&this._stream.getTracks().length&&this._stream.getTracks().forEach((e=>{e.stop()})),this._stream=null,this._deviceStream=null,this._stream_history&&this._stream_history.length&&this._stream_history.forEach((e=>{e&&e.getTracks().length&&e.getTracks().forEach((e=>e.stop()))})),this._cancelAnimationFrame(),this._cleanupCanvasStream()}_cleanupCanvasStream(){this._preCanvasVideoElm&&(this._preCanvasVideoElm.remove(),this._preCanvasVideoElm=null)}_createCanvasStream(e){return this._useCanvas?new Promise(((t,n)=>{this._cleanupCanvasStream(),this._preCanvasVideoElm=document.createElement("video"),this._preCanvasVideoElm.playsInline=!0,this._preCanvasVideoElm.autoplay=!0,this._preCanvasVideoElm.muted=!0;const r=document.createElement("canvas");this._preCanvasVideoElm.srcObject=e,this._preCanvasVideoElm.addEventListener("playing",(()=>{r.width=this._preCanvasVideoElm.videoWidth,r.height=this._preCanvasVideoElm.videoHeight;const e=r.getContext("2d");this._mirrorVideo&&(e.translate(r.width,0),e.scale(-1,1)),this._nextAnimationFrameId=window.requestAnimationFrame(function t(){e.drawImage(this._preCanvasVideoElm,0,0,r.width,r.height),this._requestAnimationFrame(t)}.bind(this));const n=r.captureStream(30);t(n)})),this._preCanvasVideoElm.play(),this._preCanvasVideoElm.style.width="1px",this._preCanvasVideoElm.style.height="1px",this._preCanvasVideoElm.style.position="absolute",this._preCanvasVideoElm.style.zIndex="9999999999999",document.body.appendChild(this._preCanvasVideoElm)})):e}_requestAnimationFrame(e){"function"==typeof e&&this._nextAnimationFrameId&&(this._nextAnimationFrameId=window.requestAnimationFrame(e.bind(this)))}_cancelAnimationFrame(){window.cancelAnimationFrame(this._nextAnimationFrameId),this._nextAnimationFrameId=null}}async function g(e){const t=document.createElement("video"),n=new Promise((e=>t.addEventListener("loadedmetadata",(()=>{t.duration===1/0?(t.currentTime=Number.MAX_SAFE_INTEGER,t.ontimeupdate=()=>{t.ontimeupdate=null,e(t.duration),t.currentTime=0,window.URL.revokeObjectURL(t.src)}):(e(t.duration),window.URL.revokeObjectURL(t.src))}))));return t.src="string"==typeof e||e instanceof String?e:window.URL.createObjectURL(e),n}},57834:function(e,t){"use strict";t.Z=class{static poll_for_result(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r>300?t.reject("Request maximum reached"):$.ajax({url:SERVER.URLS.task_result(e),method:"GET",success:i=>{"PENDING"===i.status?window.setTimeout((()=>{this.poll_for_result(e,t,n,r+1)}),2e3):"SUCCESS"===i.status&&t.resolve(i.result)},error:(i,o,a)=>{var s;"FAILURE"===(null==i||null===(s=i.responseJSON)||void 0===s?void 0:s.status)?t.reject(i,o,a):(n++,n>=3?t.reject(i,o,a):window.setTimeout((()=>{this.poll_for_result(e,t,n,r+1)}),2e3))}})}}},86130:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var r=n(47176),i=n(59163),o=n(13795);let a;!function(e){e.UPGRADE_FOR_UNLIMITED="upgrade-unlimited",e.UPGRADE_FOR_ICONS="upgrade-icons",e.UPGRADE_FOR_MARKETPLACE="upgrade-marketplace",e.MARKETPLACE="marketplace",e.INCLUDED_WITH_SUBSCRIPTION="included",e.FREE="free",e.NONE="none"}(a||(a={})),t.Z=class{static show_media_errors(e){if(null==e||0===e.length)return;const t=e.map((e=>e.sceneNumber)),n=t.length>1;r.Z.error(`The media on scene${n?"s ":""} ${t.join(", ")} ${n?"are":"is"} no longer available from our content providers. Please select new media.`)}static badge_required_for_source(e){if(e===i.VideoData.SOURCE_ARTICLE||e===i.VideoData.SOURCE_USER||e===i.VideoData.SOURCE_USER_WATERMARK||e===i.VideoData.SOURCE_USER_OUTRO)return a.NONE;if(!o.zk.has(e))return a.FREE;const{getty_media:t,getty_unlimited_media:n,shutterstock_media:r,shutterstock_unlimited_media:s,premium_icons:u}=SERVER.USER.capabilities;return e===i.VideoData.SOURCE_GETTY&&t?a.MARKETPLACE:e===i.VideoData.SOURCE_SHUTTERSTOCK_ESSENTIALS&&s||e===i.VideoData.SOURCE_SHUTTERSTOCK_CHOICES&&s?a.INCLUDED_WITH_SUBSCRIPTION:e===i.VideoData.SOURCE_SHUTTERSTOCK_PREMIUM&&r||e===i.VideoData.SOURCE_SHUTTERSTOCK_EDITORIAL&&r?a.MARKETPLACE:e===i.VideoData.SOURCE_GETTY_UNLIMITED&&n||e===i.VideoData.SOURCE_SHUTTERSTOCK_UNLIMITED&&s?a.INCLUDED_WITH_SUBSCRIPTION:e===i.VideoData.SOURCE_LUMEN5_ICONS_PREMIUM&&u?a.NONE:e===i.VideoData.SOURCE_GETTY||e===i.VideoData.SOURCE_SHUTTERSTOCK_PREMIUM||e===i.VideoData.SOURCE_SHUTTERSTOCK_EDITORIAL?a.UPGRADE_FOR_MARKETPLACE:e===i.VideoData.SOURCE_LUMEN5_ICONS_PREMIUM?a.UPGRADE_FOR_ICONS:a.UPGRADE_FOR_UNLIMITED}}},94743:function(e,t,n){"use strict";var r=n(36062),i=n(59163);t.Z=class{static toRenderTarget(e){switch(e){case r.iK.FACEBOOK_STORY_EACH_SLIDE:return r.Ou.DOWNLOAD;case r.iK.SHARE_PAGE_EXP:return r.Ou.SHARE_LINK;default:return r.Ou.DOWNLOAD}}static getPublishOption(e){return e===i.VideoData.FORMAT_FACEBOOK_STORY_VERTICAL||e===i.VideoData.FORMAT_INSTAGRAM_STORY_CREATOR?r.iK.FACEBOOK_STORY_EACH_SLIDE:r.iK.SHARE_PAGE_EXP}}},29766:function(e,t){"use strict";const n=function(){const e={},t=window.location.search.substring(1).split("&");for(let n=0;n<t.length;n++){const r=t[n].split("="),i=r[0],o=decodeURIComponent(r.slice(1).join("="));void 0===e[i]?e[i]=o:"string"==typeof e[i]?e[r[0]]=[e[i],o]:e[r[0]].push(o)}return e}();t.Z=n},9566:function(e,t,n){"use strict";n.d(t,{U:function(){return o},a:function(){return a}});var r=n(35369),i=n(88845);const o=r.default.fromJS({iconLeft:"more_horiz",size:"sm",width:i.ZU.NO_MIN_WIDTH,color:i.Sb.SIMPLE,"data-testid":"saved-template-dropdown"}),a={EDIT:"edit",COPY_TO:"copy_to",DELETE:"delete"}},96510:function(e,t,n){"use strict";n.d(t,{Hd:function(){return s},Q8:function(){return o},T7:function(){return a},hM:function(){return i}});var r=n(59163);function i(e,t){const n={},i={},o={},a=e.reduce(((e,a)=>{let{slide:s,sceneDesign:u}=a;const c=u.get("display_group"),d=u.get("id"),l=s.sceneCategory===r.VideoData.CATEGORY_OUTRO,_=s.sceneCategory===r.VideoData.CATEGORY_CAPTION;return l&&!(null!=t&&t.includeOutroDesigns)||_&&!(null!=t&&t.includeCaptionDesigns)||(i[c]||(i[c]=[]),i[c].push(d),o[d]=u.get("status")),e[d]=s.id,n[s.id]=u.get("id"),e}),{});return{slideToSceneMap:n,scenesToShow:i,sceneToSlideMap:a,sceneDesignStatusMap:o}}function o(e,t){return e.filter((e=>Object.keys(t).includes(e.get("id").toString())))}function a(e){return e.getChildrenByType(r.VideoData.MEDIA_ASSET_TYPE).find((e=>e.linkToSceneGroup))}function s(e,t){if(!e)return;e.captions.sceneDesignId=t;const n=e.captions;n.removeAllBlocks(),n.addBlock({startTime:0,endTime:e.duration,text:"Drag an uploaded clip with a speaker to add captions here."})}},78133:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(35369),i=JSON.parse('{"asset_min_dimensions_by_source":{"0":{"min_width":0,"min_height":0},"1":{"min_width":80,"min_height":80},"2":{"min_width":80,"min_height":80},"3":{"min_width":360,"min_height":360},"4":{"min_width":480,"min_height":480},"5":{"min_width":480,"min_height":480},"6":{"min_width":480,"min_height":480},"7":{"min_width":480,"min_height":480},"8":{"min_width":480,"min_height":480},"9":{"min_width":720,"min_height":720},"10":{"min_width":480,"min_height":480},"11":{"min_width":480,"min_height":480},"12":{"min_width":480,"min_height":480},"13":{"min_width":360,"min_height":360},"14":{"min_width":360,"min_height":360},"15":{"min_width":100,"min_height":100},"16":{"min_width":480,"min_height":480},"21":{"min_width":360,"min_height":360},"23":{"min_width":480,"min_height":480},"24":{"min_width":480,"min_height":480},"25":{"min_width":480,"min_height":480},"26":{"min_width":480,"min_height":480},"27":{"min_width":480,"min_height":480},"28":{"min_width":0,"min_height":0},"29":{"min_width":0,"min_height":0},"30":{"min_width":10,"min_height":10},"31":{"min_width":480,"min_height":480}},"asset_max_dimensions":{"max_width":9000,"max_height":9000},"asset_types":{"audio_asset":"audio","background_asset":"background","font_asset":"font","icon_asset":"icon"},"file_size":{"min_bytes":1,"min_size_pretty":"1 Byte","max_bytes":2097152000,"max_size_pretty":"2 GB"},"bg_video_duration":{"min_seconds":0.5,"max_seconds":600},"audio_duration":{"min_seconds":0.5,"max_seconds":600},"max_video_duration":{"warning":480,"limit":600},"scene_warning":60,"scene_limit":80,"subscene_per_scene_limit":60,"audio_volume":{"min":0,"max":100,"duck":15},"scene_duration":{"default":4500,"min":3400,"max":7000,"outro":5000},"render_frame_rate":30,"supported_video_heights":{"landscape":{"480p":480,"720p":720,"1080p":1080},"square":{"480p":480,"720p":720,"1080p":1080},"vertical":{"480p":854,"720p":1280,"1080p":1920}},"video_title_max_length":100,"video_default_title":"Untitled video","attribute_recommendation_options":{"auto_text_position":"auto","text_position":["bottom_center","bottom_left","bottom_right","center","center_left","center_right","top_center","top_left","top_right","auto"],"auto_background_animation":"auto_pan_to_fit_max_content","background_animation":["none","auto_pan_to_fit_max_content","pan_up","pan_down","pan_left","pan_right","zoom_in","zoom_out"],"no_crop":"none","subject_center_crop":"subject_center","subject_rule_of_thirds_crop":"subject_rule_of_thirds","crop":["none","subject_center","subject_rule_of_thirds"],"normal_brightness":"normal","dim_to_read_text_brightness":"dim_to_read_text","brightness":["normal","dim_to_read_text"]}}');const o=r.default.fromJS(i);var a=class{static get asset_max_width(){return o.getIn(["asset_max_dimensions","max_width"])}static get asset_max_height(){return o.getIn(["asset_max_dimensions","max_height"])}static get min_file_size_bytes(){return o.getIn(["file_size","min_bytes"])}static get min_file_size_pretty(){return o.getIn(["file_size","min_size_pretty"])}static get max_file_size_bytes(){return o.getIn(["file_size","max_bytes"])}static get max_file_size_pretty(){return o.getIn(["file_size","max_size_pretty"])}static get video_duration_limit(){return o.getIn(["max_video_duration","limit"])}static get video_duration_warning(){return o.getIn(["max_video_duration","warning"])}static get min_bg_video_duration_seconds(){return o.getIn(["bg_video_duration","min_seconds"])}static get max_bg_video_duration_seconds(){return o.getIn(["bg_video_duration","max_seconds"])}static get scene_limit(){return o.get("scene_limit")}static get subscene_per_scene_limit(){return o.get("subscene_per_scene_limit")}static get scene_warning(){return o.get("scene_warning")}static get min_audio_duration_seconds(){return o.getIn(["audio_duration","min_seconds"])}static get max_audio_duration_seconds(){return o.getIn(["audio_duration","max_seconds"])}static get max_audio_volume(){return o.getIn(["audio_volume","max"])}static get min_audio_volume(){return o.getIn(["audio_volume","min"])}static get duck_audio_volume(){return o.getIn(["audio_volume","duck"])}static get audio_asset_type(){return o.getIn(["asset_types","audio_asset"])}static get background_asset_type(){return o.getIn(["asset_types","background_asset"])}static get icon_asset_type(){return o.getIn(["asset_types","icon_asset"])}static get font_asset_type(){return o.getIn(["asset_types","font_asset"])}static get watermark_asset_type(){return o.getIn(["asset_types","watermark_asset"])}static get render_frame_rate(){return o.get("render_frame_rate")}static get_asset_min_dimensions_by_source(e){return o.getIn(["asset_min_dimensions_by_source",e.toString()])}static get capabilities(){return void 0===SERVER.USER||null===SERVER.USER?{}:{render720p:SERVER.USER.capabilities.render_720p,render1080p:SERVER.USER.capabilities.render_1080p,noBranding:SERVER.USER.capabilities.no_branding,customWatermark:SERVER.USER.capabilities.custom_watermark}}static get video_title_max_length(){return o.get("video_title_max_length")}static get video_default_title(){return o.get("video_default_title")}static get text_position_recommendation_options(){return o.getIn(["attribute_recommendation_options","text_position"])}static get crop_recommendation_options(){return o.getIn(["attribute_recommendation_options","crop"])}static get background_animation_recommendation_options(){return o.getIn(["attribute_recommendation_options","background_animation"])}static get brightness_recommendation_options(){return o.getIn(["attribute_recommendation_options","brightness"])}}},18504:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var r=n(26729),i=n.n(r);let o;!function(e){e.START_PREVIEW_PLAYBACK="START_PREVIEW_PLAYBACK",e.PREVIEW_PLAYBACK_TICK="PREVIEW_PLAYBACK_TICK",e.STOP_PREVIEW_PLAYBACK="STOP_PREVIEW_PLAYBACK",e.START_GROUP_PREVIEW_PLAYBACK="START_GROUP_PREVIEW_PLAYBACK",e.GLOBAL_STOP_PREVIEW_PLAYBACK="GLOBAL_STOP_PREVIEW_PLAYBACK",e.START_EDITING_TEXT="START_EDITING_TEXT",e.STOP_EDITING_TEXT="STOP_EDITING_TEXT",e.GLOBAL_STOP_EDITING="GLOBAL_STOP_EDITING",e.START_EDITING_NON_TEXT_ASSET="START_EDITING_NON_TEXT_ASSET",e.FINISH_EDITING_SCENE="FINISH_EDITING_SCENE",e.FONT_LOAD_FAILURE="FONT_LOAD_FAILURE",e.FONT_LOAD_START="FONT_LOAD_START",e.SCRUB="SCRUB",e.STOP_SCRUB="STOP_SCRUB"}(o||(o={}));const a=new(i());t.Z=a},62929:function(e,t,n){"use strict";var r=n(35369),i=n(18563),o=n(78133),a=n(59163),s=n(57834),u=n(43187),c=n(27182),d=n(36062),l=n(80135),_=n(59739);function E(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let T;var h;!function(e){e.INITIALIZE_MULTIPART_UPLOAD="initialize-multipart-upload",e.RESUMABLE_UPLOAD="resumable-upload",e.PART_OF_MULTIPART_UPLOAD="part-of-multipart-upload",e.COMPLETE_MULTIPART_UPLOAD="complete-multipart-upload"}(T||(T={})),function(e){e.FILE_ERROR="FILE_ERROR",e.REQUEST_ERROR="REQUEST_ERROR",e.TASK_ERROR="TASK_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(h||(h={}));const S={DEFAULT:"An unknown error occurred with the request.",REQUEST_ERROR:"An unknown error occurred with the request.",TASK_ERROR:"We could not validate your upload.",INVALID_ICON_FILE:"Oops, this is not a valid SVG or JSON file.",IMG_LOAD_ERROR:"The image is not loading correctly, please ensure it is valid.",AUDIO_LOAD_ERROR:"The music is not loading correctly, please ensure it is valid.",ONLY_IMAGES:"Only .png, .jpg, .bmp, and .webp files can be uploaded.",INVALID_MP3:"Oops, this is not a valid mp3 music file.",INVALID_VISUAL_MEDIA_FILE:"Oops, this is not a valid video or image file type.",FILE_SIZE_TOO_SMALL:`Please ensure your file is larger than ${o.Z.min_file_size_pretty}.`,FILE_SIZE_TOO_BIG:`Please ensure your file is less than ${o.Z.max_file_size_pretty}.`,IMG_DIMENSIONS_TOO_SMALL:(e,t)=>`Please ensure your image is at least ${e}px by ${t}px.`,IMG_DIMENSIONS_TOO_BIG:(e,t)=>`Please ensure your image is not more than ${e}px by ${t}px.`,VIDEO_DIMENSIONS_TOO_SMALL:(e,t)=>`Please ensure your video is at least ${e}px by ${t}px.`,VIDEO_DIMENSIONS_TOO_BIG:(e,t)=>`Please ensure your video is not more than ${e}px by ${t}px.`,VIDEO_DURATION_TOO_SHORT:`Please ensure your video is ${o.Z.min_bg_video_duration_seconds} seconds or longer.`,VIDEO_DURATION_TOO_LONG:`Please ensure your video is not more than ${o.Z.max_bg_video_duration_seconds} seconds long.`,AUDIO_DURATION_TOO_SHORT:`Please ensure your music is at least ${o.Z.min_audio_duration_seconds} seconds long.`,AUDIO_DURATION_TOO_LONG:`Please ensure your music is not more than ${o.Z.max_audio_duration_seconds} seconds long.`};class g extends Error{constructor(e,t){super(t),p(this,"type",void 0),this.type=e||h.UNKNOWN_ERROR}}class m extends g{constructor(e,t,n){var r;let i=S.REQUEST_ERROR;null!=e&&null!==(r=e.responseJSON)&&void 0!==r&&r.message&&(i=e.responseJSON.message),super(h.REQUEST_ERROR,i),p(this,"xhr",void 0),p(this,"status",void 0),p(this,"err",void 0),this.xhr=e,this.status=t,this.err=n}}class I extends g{constructor(e){super(h.FILE_ERROR,e)}}class R extends g{constructor(e){var t,n,r;let i=S.TASK_ERROR;null!=e&&null!==(t=e.responseJSON)&&void 0!==t&&t.message&&(i=e.responseJSON.message),super(h.TASK_ERROR,i),p(this,"task_status",void 0),p(this,"task_error_message",void 0),p(this,"err",void 0),this.task_status=null==e||null===(n=e.responseJSON)||void 0===n?void 0:n.status,this.task_error_message=null==e||null===(r=e.responseJSON)||void 0===r?void 0:r.message,this.err=e}}var A=new WeakSet,y=new WeakSet,v=new WeakSet,O=new WeakSet,D=new WeakSet;async function C(e,t){return new Promise(((n,r)=>{$.ajax({url:SERVER.URLS.upload_urls,method:"POST",data:{type:e,...t},beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{n(e.upload_url)},error:(e,t,n)=>{l.TU.call(this,e,t,n),r(new Error("Failed creating an authorized upload link"))}})}))}async function N(e){return new Promise(((t,n)=>{$.ajax({url:e,method:"POST",success:e=>{const n=(new window.DOMParser).parseFromString(e,"text/xml"),r=n.getElementsByTagName("UploadId")[0].textContent,i=n.getElementsByTagName("Bucket")[0].textContent,o=n.getElementsByTagName("Key")[0].textContent;t({uploadId:r,bucket:i,uploadFileName:o})},error:(e,t,r)=>{l.TU.call(this,e,t,r),n(new Error("Failed initiating upload"))}})}))}function L(e){let t=0;const n=[];do{const r=Math.min(t+this.CHUNK_SIZE,e.size),i=e.slice(t,r);n.push({chunk:i,start:t,end:r}),t=r}while(t<e.size);return n}function P(e,t,n,r,i){const o=e.map((async(o,a)=>{const s=a+1,u=await f(this,A,C).call(this,T.PART_OF_MULTIPART_UPLOAD,{upload_id:t,file_name:n,part_number:s});return new Promise(((t,n)=>{$.ajax({url:u,method:"PUT",headers:{"Content-Range":`bytes ${o.start}-${o.end-1}/${r}`},processData:!1,contentType:!1,data:o.chunk,success:(n,r,o)=>{this.progress_dict[i]+=this.GCS_UPLOAD_PROGRESS/e.length,this._trigger_progress_callback(),t({etag:o.getResponseHeader("etag"),partNumber:s})},error:(e,t,r)=>{l.TU.call(this,e,t,r),n(new Error("Failed uploading file part"))}})}))}));return Promise.all(o)}function b(e,t){return new Promise(((n,r)=>{const i=`<CompleteMultipartUpload>${e.map((e=>`<Part><PartNumber>${e.partNumber}</PartNumber><ETag>${e.etag}</ETag></Part>`)).join("")}</CompleteMultipartUpload>`;$.ajax({method:"POST",url:t,data:i,contentType:"application/xml; charset=UTF-8",success:()=>{n(void 0)},error:(e,t,n)=>{l.TU.call(this,e,t,n),r(new Error("Failed finalizing file transmission"))}})}))}t.Z=class{constructor(e){E(this,D),E(this,O),E(this,v),E(this,y),E(this,A),p(this,"file_list",void 0),p(this,"asset_type",void 0),p(this,"metadata",void 0),p(this,"progress_callback",void 0),p(this,"upload_succeeded_callback",void 0),p(this,"upload_failed_callback",void 0),p(this,"add_to_user_library",void 0),p(this,"min_width",void 0),p(this,"min_height",void 0),p(this,"max_width",void 0),p(this,"max_height",void 0),p(this,"only_images",void 0),p(this,"session_id",void 0),p(this,"progress_dict",void 0),p(this,"enhance_audio",!1),p(this,"UPLOAD_URL_PROGRESS",void 0),p(this,"GCS_UPLOAD_PROGRESS",void 0),p(this,"FILE_VALIDATION_PROGRESS",void 0),p(this,"UPLOAD_SOURCE",void 0),p(this,"CHUNK_SIZE",void 0);const t={metadata:{source:a.VideoData.SOURCE_USER,license:a.VideoData.USER_PRIVATE_LICENSE},progress_callback:()=>{},upload_succeeded_callback:()=>{},upload_failed_callback:()=>{},add_to_user_library:!0,min_width:0,min_height:0,max_width:Number.MAX_VALUE,max_height:Number.MAX_VALUE,enhance_audio:!1,only_images:!1};this.file_list=e.file_list,this.asset_type=e.asset_type,this.metadata={...t.metadata,...e.metadata},this.progress_callback=e.progress_callback??t.progress_callback,this.upload_succeeded_callback=e.upload_succeeded_callback??t.upload_succeeded_callback,this.upload_failed_callback=e.upload_failed_callback??t.upload_failed_callback,this.add_to_user_library=e.add_to_user_library??t.add_to_user_library,this.min_width=e.min_width??t.min_width,this.min_height=e.min_height??t.min_height,this.max_width=e.max_width??t.max_width,this.max_height=e.max_height??t.max_height,this.enhance_audio=e.enhance_audio??t.enhance_audio,this.only_images=e.only_images??t.only_images,this.session_id=(0,u.Z)(),this.progress_dict={},this.UPLOAD_URL_PROGRESS=5,this.GCS_UPLOAD_PROGRESS=45,this.FILE_VALIDATION_PROGRESS=50,this.UPLOAD_SOURCE=a.VideoData.SOURCE_USER,this.CHUNK_SIZE=1e7}upload(){this.file_list.map((e=>{this._upload_file(e)}))}_upload_file(e){const{file:t,metadata:n}=e,r={name:t.name,size:t.size,type:t.type,chunked:!1,enhanceAudio:this.enhance_audio,temporaryUrlFetchDuration:0,temporaryUrlFetchStatus:"n/a",gcsUploadDuration:0,gcsUploadStatus:"n/a",validatingUploadDuration:0,validatingUploadStatus:"n/a",pollingResultDuration:0,pollingResultStatus:"n/a",totalDuration:0};r.totalDuration=performance.now(),this.progress_dict[t.name]=0,this._trigger_progress_callback(),this._is_valid_file(t).then((()=>{const e=performance.now();this._get_upload_url(t).then((i=>{let{upload_url:o,makeChunks:a}=i;r.chunked=a,r.temporaryUrlFetchDuration=performance.now()-e,r.temporaryUrlFetchStatus="successful";const s=performance.now();this._upload_file_to_gcs(t,o,a).then((e=>{let{bucket:i,file_name:o}=e;r.gcsUploadDuration=performance.now()-s,r.gcsUploadStatus="successful";const a=performance.now();this._trigger_validation(t,i,o,n).then((e=>{r.validatingUploadDuration=performance.now()-a,r.validatingUploadStatus="successful";const i=performance.now();this._poll_validation(e,t).then((e=>{r.pollingResultDuration=performance.now()-i,r.pollingResultStatus="successful",r.totalDuration=performance.now()-r.totalDuration,this._mark_as_finished({file:t,metadata:n},e,r)})).catch((e=>{r.pollingResultDuration=performance.now()-i,r.pollingResultStatus="error",r.totalDuration=performance.now()-r.totalDuration,this.handleErrors(e,{file:t,metadata:n},r)}))})).catch((e=>{r.validatingUploadDuration=performance.now()-a,r.validatingUploadStatus="error",r.totalDuration=performance.now()-r.totalDuration,this.handleErrors(e,{file:t,metadata:n},r)}))})).catch((e=>{r.gcsUploadDuration=performance.now()-s,r.gcsUploadStatus="error",r.totalDuration=performance.now()-r.totalDuration,this.handleErrors(e,{file:t,metadata:n},r)}))})).catch((i=>{r.temporaryUrlFetchDuration=performance.now()-e,r.temporaryUrlFetchStatus="error",r.totalDuration=performance.now()-r.totalDuration,this.handleErrors(i,{file:t,metadata:n},r)}))})).catch((e=>{this.handleErrors(e,{file:t,metadata:n},r)}))}_poll_validation(e,t){return new Promise(((n,r)=>{const i=performance.now(),o=window.setInterval((()=>{let e=(performance.now()-i)/1e3/20;e>.95&&(e=.95),this.progress_dict[t.name]=this.UPLOAD_URL_PROGRESS+this.GCS_UPLOAD_PROGRESS+this.FILE_VALIDATION_PROGRESS*e,this._trigger_progress_callback()}),300),a=$.Deferred();a.done((e=>{window.clearInterval(o),n(e)})).fail((e=>{window.clearInterval(o),r(new R(e))})),s.Z.poll_for_result(e,a)}))}_mark_as_finished(e,t,n){const i=e.file;this.progress_dict[i.name]=100,this._trigger_progress_callback(),this.upload_succeeded_callback(e,r.default.fromJS(t),t.type);const a={file_name:i.name,type:t.type};t.type===o.Z.background_asset_type&&(a.subtype=t.background.type,"video"===t.background.type?(a.has_voiceover=t.background.video.has_voiceover,a.preview_url=t.background.video.preview_url):"image"===t.background.type&&(a.preview_url=t.background.image.preview_url)),analytics.track("Media Upload Succeeded",a),analytics.track("Media Upload Duration Tracker",n)}_get_upload_url(e){return new Promise(((t,n)=>{const r=this._is_video(e.type)&&e.size>this.CHUNK_SIZE&&(0,c.p8)([!0,!1]);$.ajax({url:SERVER.URLS.upload_urls,method:"POST",data:{file_name:e.name,origin:window.location.origin,type:r?T.INITIALIZE_MULTIPART_UPLOAD:T.RESUMABLE_UPLOAD},beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{t({upload_url:e.upload_url,makeChunks:r})},error:(e,t,r)=>{l.TU.call(this,e,t,r),n(new m(e,t,r))}}),this.progress_dict[e.name]=this.UPLOAD_URL_PROGRESS,this._trigger_progress_callback()}))}_upload_file_to_gcs(e,t,n){return new Promise(((r,i)=>{if(!n)return $.ajax({xhr:()=>this._get_xhr_with_progress((t=>{this.progress_dict[e.name]=this.UPLOAD_URL_PROGRESS+t*this.GCS_UPLOAD_PROGRESS/100,this._trigger_progress_callback()})),url:t,method:"PUT",processData:!1,contentType:!1,data:e,success:e=>{r({bucket:e.bucket,file_name:e.name})},error:(e,t,n)=>{l.TU.call(this,e,t,n),i(new m(e,t,n))}});this._upload_file_to_gcs_as_chunks(e,t).then((e=>{let{bucket:t,file_name:n}=e;r({bucket:t,file_name:n})}))}))}async _upload_file_to_gcs_as_chunks(e,t){const{uploadId:n,bucket:r,uploadFileName:i}=await f(this,y,N).call(this,t),o=f(this,v,L).call(this,e),a=await f(this,O,P).call(this,o,n,i,e.size,e.name),s=await f(this,A,C).call(this,T.COMPLETE_MULTIPART_UPLOAD,{upload_id:n,file_name:i});return await f(this,D,b).call(this,a,s),{bucket:r,file_name:i}}_get_xhr_with_progress(e){const t=new XMLHttpRequest;return t.upload.addEventListener("progress",(t=>{if(t.lengthComputable){const n=100*t.loaded/t.total;e(n)}})),t.addEventListener("load",(()=>{e(100)})),t.addEventListener("abort",(()=>{e(100)})),t}_trigger_validation(e,t,n,r){return new Promise(((i,o)=>{const a={...this.metadata,...r};$.ajax({url:SERVER.URLS.asset_validation,method:"PUT",data:JSON.stringify({metadata:a,bucket:t,file_name:n,add_to_user_library:this.add_to_user_library,enhance_audio:this.enhance_audio,only_images:this.only_images,user_file_name:e.name}),contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{i(e.task_id)},error:(e,t,n)=>{l.TU.call(this,e,t,n),o(new m(e,t,n))}})}))}_trigger_progress_callback(){let e=0,t=0;for(const n in this.progress_dict)e++,t+=this.progress_dict[n];let n=0;t>.1&&e>0&&(n=1*t/e),n>=99.9&&(n=-1),this.progress_callback(n,this.session_id)}_is_video(e){const t=(0,d.z3)();for(let n=0;n<t.length;n++)if(e===t[n])return!0;return!1}_is_valid_file(e){return new Promise(((t,n)=>{e.size<=o.Z.min_file_size_bytes&&n(new I(S.FILE_SIZE_TOO_SMALL)),e.size>=o.Z.max_file_size_bytes&&n(new I(S.FILE_SIZE_TOO_BIG));const r=(0,d.FN)(this.only_images);let a=!1;for(let t=0;t<r.length;t++)if(e.type===r[t]){a=!0;break}const s=this._is_video(e.type),u=(0,d.sG)();let c=!1;for(let t=0;t<u.length;t++)if(e.type===u[t]){c=!0;break}if(this.asset_type===o.Z.font_asset_type){const r=new FileReader;r.onload=e=>{const r=new Uint8Array(e.target.result).subarray(0,4);let i="";for(let e=0;e<r.length;e++)i+=String.fromCharCode(r[e]);switch(i){case String.fromCharCode(0,1,0,0):case"true":case"typ1":case"OTTO":t(void 0);break;default:n(new I("Only .ttf or .otf fonts can be uploaded"))}},r.readAsArrayBuffer(e)}else if(a&&this.asset_type===o.Z.background_asset_type){const r=new FileReader;r.onload=()=>{const e=new Image;$(e).on("load",(()=>{e.width<this.min_width||e.height<this.min_height?n(new I(S.IMG_DIMENSIONS_TOO_SMALL(this.min_width,this.min_height))):(e.width>this.max_width||e.height>this.max_height)&&n(new I(S.IMG_DIMENSIONS_TOO_BIG(this.max_width,this.max_height))),t(void 0)})),$(e).on("error",(()=>{n(new I(S.IMG_LOAD_ERROR))})),e.src=r.result},r.readAsDataURL(e)}else if(s&&!this.only_images&&this.asset_type===o.Z.background_asset_type){const r=new FileReader;r.onload=r=>{const i=new Blob([r.target.result],{type:e.type}),a=(URL||webkitURL).createObjectURL(i),s=document.createElement("video");s.preload="metadata",$(s).on("loadedmetadata",(async()=>s.videoWidth<this.min_width&&0!==s.videoWidth||s.videoHeight<this.min_height&&0!==s.videoHeight?((URL||webkitURL).revokeObjectURL(a),void n(new I(S.VIDEO_DIMENSIONS_TOO_SMALL(this.min_width,this.min_height)))):s.videoWidth>this.max_width||s.videoHeight>this.max_height?((URL||webkitURL).revokeObjectURL(a),void n(new I(S.VIDEO_DIMENSIONS_TOO_BIG(this.max_width,this.max_height)))):s.duration<o.Z.min_bg_video_duration_seconds?((URL||webkitURL).revokeObjectURL(a),void n(new I(S.VIDEO_DURATION_TOO_SHORT))):(isFinite(s.duration)||await(0,_.id)(s),s.duration>o.Z.max_bg_video_duration_seconds?((URL||webkitURL).revokeObjectURL(a),void n(new I(S.VIDEO_DURATION_TOO_LONG))):((URL||webkitURL).revokeObjectURL(a),void t(void 0))))),$(s).on("error",(()=>{(URL||webkitURL).revokeObjectURL(a),t(void 0)})),s.src=a},r.readAsArrayBuffer(e)}else if(c&&this.asset_type===o.Z.audio_asset_type){const r=new FileReader;r.onload=r=>{const a=new Blob([r.target.result],{type:e.type}),s=(URL||webkitURL).createObjectURL(a),u=document.createElement("audio");u.preload="metadata",$(u).on("loadedmetadata",(()=>{(0,i.IJ)(s).then((e=>e<o.Z.min_audio_duration_seconds?(n(new I(S.AUDIO_DURATION_TOO_SHORT)),void(URL||webkitURL).revokeObjectURL(s)):e>o.Z.max_audio_duration_seconds?(n(new I(S.AUDIO_DURATION_TOO_LONG)),void(URL||webkitURL).revokeObjectURL(s)):void t(void 0)))})),$(u).on("error",(()=>{(URL||webkitURL).revokeObjectURL(s),n(new I(S.AUDIO_LOAD_ERROR))})),u.src=s},r.readAsArrayBuffer(e)}else if(this.asset_type===o.Z.icon_asset_type){const r=new FileReader;r.onload=e=>{if(-1===e.target.result.indexOf("</svg>"))try{void 0===JSON.parse(e.target.result).layers&&n(new I(S.INVALID_ICON_FILE))}catch(e){n(new I(S.INVALID_ICON_FILE))}t(void 0)},r.readAsText(e)}else this.only_images?n(new I(S.ONLY_IMAGES)):this.asset_type===o.Z.audio_asset_type?n(new I(S.INVALID_MP3)):this.asset_type===o.Z.icon_asset_type?n(new I(S.INVALID_ICON_FILE)):n(new I(S.INVALID_VISUAL_MEDIA_FILE))}))}_error_received(e,t,n,r){const{file:i,metadata:o}=e;this.progress_dict[i.name]=100,this._trigger_progress_callback(),this.upload_failed_callback(e,t),analytics.track("Media Upload Failed",{file_name:i.name,display_message:t,message:n,metadata:o}),analytics.track("Media Upload Duration Tracker",r)}handleErrors(e,t,n){const{type:r}=e;switch(r){case h.FILE_ERROR:case h.REQUEST_ERROR:this._error_received(t,e.message,e,n);break;case h.TASK_ERROR:this._error_received(t,e.message,e.err,n);break;default:this._error_received(t,S.DEFAULT,e,n)}}}},43187:function(e,t,n){"use strict";function r(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}n.d(t,{Z:function(){return r}})},13795:function(e,t,n){"use strict";n.d(t,{$j:function(){return i},DQ:function(){return o},QY:function(){return a},ey:function(){return u},k:function(){return s},zk:function(){return r}});const r=new Set([Luminary.VideoData.SOURCE_GETTY,Luminary.VideoData.SOURCE_GETTY_UNLIMITED,Luminary.VideoData.SOURCE_SHUTTERSTOCK_ESSENTIALS,Luminary.VideoData.SOURCE_SHUTTERSTOCK_PREMIUM,Luminary.VideoData.SOURCE_SHUTTERSTOCK_UNLIMITED,Luminary.VideoData.SOURCE_SHUTTERSTOCK_EDITORIAL,Luminary.VideoData.SOURCE_LUMEN5_ICONS_PREMIUM,Luminary.VideoData.SOURCE_SHUTTERSTOCK_CHOICES]),i=[Luminary.VideoData.SOURCE_GETTY,Luminary.VideoData.SOURCE_SHUTTERSTOCK_PREMIUM,Luminary.VideoData.SOURCE_SHUTTERSTOCK_EDITORIAL,Luminary.VideoData.SOURCE_LUMEN5_ICONS_PREMIUM],o={mediaSizeToUse:Luminary.VideoData.PREVIEW_MEDIA_SIZE,outputImageDataType:Luminary.VideoData.BLOB_URL_OUTPUT_IMAGE_DATA},a=[Luminary.VideoData.TOP_LEFT_TEXT_POSITION,Luminary.VideoData.TOP_CENTER_TEXT_POSITION,Luminary.VideoData.TOP_RIGHT_TEXT_POSITION,Luminary.VideoData.CENTER_LEFT_TEXT_POSITION,Luminary.VideoData.CENTER_TEXT_POSITION,Luminary.VideoData.CENTER_RIGHT_TEXT_POSITION,Luminary.VideoData.BOTTOM_LEFT_TEXT_POSITION,Luminary.VideoData.BOTTOM_CENTER_TEXT_POSITION,Luminary.VideoData.BOTTOM_RIGHT_TEXT_POSITION];function s(){return window.screen&&window.screen.availWidth<=900?200:320}const u="nte-text-overflow"},59739:function(e,t,n){"use strict";function r(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return"XX:XX";let n=Math.round(e%60),r=Math.floor(e/60);if(isNaN(n)||isNaN(r))return"XX:XX";n=Math.max(n,0),r=Math.max(r,0),60===n&&(n=0,r+=1);const i=n<=9?"0"+n.toString():n.toString(),o=r<=9?"0"+r.toString():r.toString();return o+":"+i}function i(e,t,n){let r=0;return e>0&&t>e&&(r=e/t*n),r}async function o(e){for(;e.duration===1/0||isNaN(e.duration);)await new Promise((e=>{setTimeout((()=>{e()}),10)})),e.currentTime=1e7*Math.random()}n.d(t,{Qt:function(){return i},dn:function(){return r},id:function(){return o}})},35276:function(e,t,n){"use strict";n.d(t,{N:function(){return a},d:function(){return s}});var r=n(59163),i=n.n(r);function o(){return new(i())({fetchResources:!1,disableRenderer:!0,disableRenderQueue:!0})}async function a(e,t){const n=o();try{return t&&n.setTemplate(t),await e(n)}finally{await n.destroy()}}function s(e,t){const n=o();try{return t&&n.setTemplate(t),e(n)}finally{n.destroy().catch((e=>{throw e}))}}},28074:function(e,t,n){"use strict";n.d(t,{v9E:function(){return ge},Hdc:function(){return i},xwS:function(){return Ie},lgt:function(){return f},BLD:function(){return T},dpc:function(){return me},brj:function(){return Re},uQF:function(){return r},pgd:function(){return ye},W3g:function(){return Ae},R1F:function(){return o},UlH:function(){return h.Ul},Vob:function(){return h.Vo},tZU:function(){return oe},AmU:function(){return h.Am},rPD:function(){return h.rP},WjV:function(){return h.Wj},Sl:function(){return C},OES:function(){return h.OE},QOr:function(){return B},bL:function(){return h.bL},TyJ:function(){return h.Ty},Pg0:function(){return h.Pg},L2F:function(){return h.L2},XX3:function(){return h.XX},GtY:function(){return h.Gt},C1X:function(){return h.C1},hqq:function(){return h.hq},wor:function(){return h.wo},Txj:function(){return h.Tx},j9q:function(){return S.j9},pAZ:function(){return S.pA},_ge:function(){return h._g},fzM:function(){return h.fz},dsc:function(){return x},CfP:function(){return h.Cf},xcD:function(){return F},VMY:function(){return N},PzV:function(){return h.Pz},P80:function(){return G.P8},OnH:function(){return h.On},sDl:function(){return h.sD},aox:function(){return h.ao},tVS:function(){return h.tV},y5q:function(){return h.y5},Ox_:function(){return h.Ox},WE7:function(){return h.WE},uKI:function(){return h.uK},p5r:function(){return h.p5},BSY:function(){return h.BS},cac:function(){return h.c},mJF:function(){return h.mJ},rL_:function(){return h.rL},vgK:function(){return h.vg},acD:function(){return h.ac},$CR:function(){return g.$C},UTd:function(){return G.UT},C$n:function(){return g.C$},SN8:function(){return G.SN},NPm:function(){return G.NP},F6_:function(){return G.F6},nGQ:function(){return Z},hwX:function(){return G.hw},wcH:function(){return G.wc},O3E:function(){return g.O3},Kwb:function(){return g.Kw},xjI:function(){return g.xj},Dec:function(){return g.De},qbx:function(){return g.qb},yuB:function(){return G.yu},QKO:function(){return g.QK},z7I:function(){return g.z7},zpm:function(){return h.zp},NxA:function(){return g.Nx},yqE:function(){return g.yq},w8D:function(){return g.w8},CO0:function(){return g.CO},Jk1:function(){return g.Jk},V2M:function(){return g.V2},PNb:function(){return g.PN},PPP:function(){return g.PP},Xc8:function(){return V},Csd:function(){return g.Cs},Wer:function(){return g.We},b88:function(){return g.b8},kUE:function(){return h.kU},e5t:function(){return g.e5},DR$:function(){return G.DR},_1q:function(){return g._1},dBW:function(){return g.dB},bZ8:function(){return g.bZ},ujg:function(){return g.uj},fn$:function(){return g.fn},OPk:function(){return fe},qNz:function(){return h.qN},r$2:function(){return h.r$},opL:function(){return h.op},p74:function(){return h.p7},jbR:function(){return h.jb},cuY:function(){return h.cu},HqV:function(){return h.Hq},pTh:function(){return h.pT},FAw:function(){return k.FA},umW:function(){return k.um},q3c:function(){return k.q3},TgR:function(){return g.Tg},MPx:function(){return g.MP},WPd:function(){return g.WP},ztT:function(){return h.zt},vk0:function(){return h.vk},aF_:function(){return h.aF},Bix:function(){return h.Bi},kHY:function(){return h.kH},HfV:function(){return ie},E6o:function(){return ne},bfx:function(){return re},Y$c:function(){return h.Y$},TkU:function(){return h.Tk},LkK:function(){return h.Lk},QVQ:function(){return h.QV},kpX:function(){return h.kp},Q7p:function(){return h.Q7},tTb:function(){return h.tT},QVU:function(){return P},Ahn:function(){return U},IeS:function(){return b},u_S:function(){return w},ZR2:function(){return h.ZR},BdX:function(){return h.Bd},HQD:function(){return h.Zu},IUv:function(){return y},jkK:function(){return L},GRm:function(){return D},UHS:function(){return v},oGg:function(){return O},jxj:function(){return h.jx},WpV:function(){return h.Wp},Gt9:function(){return H},iGt:function(){return h.iG},a$e:function(){return h.a$},v7n:function(){return h.v7},tUy:function(){return h.tU},bVC:function(){return h.bV},WwB:function(){return h.Ww},qmF:function(){return h.qm},xKu:function(){return h.xK},va7:function(){return h.v},h1q:function(){return g.h1},tQT:function(){return g.tQ},Vh9:function(){return g.Vh},Whi:function(){return h.Wh},cVC:function(){return h.cV},X3W:function(){return g.X3},T7b:function(){return h.T7},CdS:function(){return h.Cd},dT7:function(){return h.dT},Q8c:function(){return h.Q8},ZUB:function(){return g.ZU},vjo:function(){return g.vj},J_H:function(){return g.J_},Nl5:function(){return Se.N},dl7:function(){return Se.d}});class r extends Error{}class i extends Error{}class o extends Error{}var a=n(67294),s=n(13795),u=n(59163),c=n.n(u),d=n(79078),l=a.memo((function(e){let{showing:t}=e;const n=a.useCallback((()=>{analytics.track("Clicked webgl not supported instruction")}),[]);return a.createElement(d.Z,{showing:t,title:"Uh oh!",closeable:!1},a.createElement("h2",null,"WebGL Support Missing"),a.createElement("p",null,"It looks like you can't use Lumen5 right now because you don't have WebGL support."),a.createElement("p",null,"Click",a.createElement("a",{target:"_blank",rel:"noreferrer",href:"//help.lumen5.com/en/article/what-is-webgl-and-why-do-i-need-it-for-lumen5-fapsnn/",onClick:n},"here")," to find out how you can fix this."))})),_=a.memo((function(e){let{showing:t}=e;const n=a.useCallback((()=>{analytics.track("Clicked webgl context lost instruction")}),[]);return a.createElement(d.Z,{showing:t,title:"Uh oh!",closeable:!1},a.createElement("h2",null,"WebGL Context Lost"),a.createElement("p",null,"It looks like you can't edit your video right now because WebGL context is lost."),a.createElement("p",null,"Click",a.createElement("a",{target:"_blank",rel:"noreferrer",href:"//help.lumen5.com/en/article/what-is-webgl-and-why-do-i-need-it-for-lumen5-fapsnn/",onClick:n},"here")," to find out how you can fix this."))}));function E(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,n)}const f=a.createContext(null);var p=new WeakMap;class T extends a.PureComponent{constructor(e){var t,n,r;super(e),r={writable:!0,value:()=>{analytics.track("WebGl context lost"),this.setState({showWebGLContextLostModal:!0})}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=this,n=p),n.set(t,r);let i=null;const o=window.devicePixelRatio;let a=e.minDimensionResolution;a>1080&&(a=1080);const u=Object.assign({},s.DQ,{resolutionValue:a,rendererDevicePixelRatio:o});void 0!==this.props.mediaSizeToUse&&(u.mediaSizeToUse=this.props.mediaSizeToUse),void 0===this.props.fetchAudio&&void 0===this.props.fetchFonts&&void 0===this.props.fetchMedia&&void 0===this.props.fetchTransitions||(u.fetchResources={audio:!!this.props.fetchAudio,fonts:!!this.props.fetchFonts,media:!!this.props.fetchMedia,transitions:!!this.props.fetchTransitions}),void 0!==this.props.disableRenderQueue&&(u.disableRenderQueue=this.props.disableRenderQueue),void 0!==this.props.drawsToCanvas&&(u.drawsToCanvas=this.props.drawsToCanvas),void 0!==this.props.loadStatusMaxCount&&(u.loadStatusMaxCount=this.props.loadStatusMaxCount),void 0!==this.props.disableRenderer&&(u.disableRenderer=this.props.disableRenderer),void 0!==this.props.loadCSSFontFaces&&(u.loadCSSFontFaces=this.props.loadCSSFontFaces),void 0!==this.props.preserveAssetIds&&(u.preserveAssetIds=this.props.preserveAssetIds),void 0!==this.props.autoDraw&&(u.autoDraw=this.props.autoDraw),void 0!==this.props.enableHelpers&&(u.enableHelpers=this.props.enableHelpers),void 0!==this.props.outputImageDataType&&(u.outputImageDataType=this.props.outputImageDataType);let d=!1;if(u.disableRenderer||c().isWebGLSupported||c().isSlowWebGLSupported){const t=e.luminary??new(c())(u);i=t,t.renderer&&t.renderer.view.addEventListener("webglcontextlost",E(this,p))}else analytics.track("WebGL is not supported"),d=!0;this.state={luminary:i,showWebGLSupportMissingModal:d,showWebGLContextLostModal:!1}}componentDidMount(){var e;this.props.initialVideoData&&(null===(e=this.state.luminary)||void 0===e||e.load(this.props.initialVideoData)),this.attachToWindowForDebugIfRequested()}componentWillUnmount(){var e,t;this.detachFromWindowIfRequest(),null===(e=this.state.luminary)||void 0===e||e.destroy(),null===(t=this.state.luminary)||void 0===t||t.renderer.view.removeEventListener("webglcontextlost",E(this,p))}detachFromWindowIfRequest(){this.props.attachInstanceToWindowForDebug&&(window._luminary_data=void 0)}attachToWindowForDebugIfRequested(){this.props.attachInstanceToWindowForDebug&&(window._luminary_data={luminary:this.state.luminary})}render(){const e=a.createElement(a.Fragment,null,a.createElement(l,{showing:this.state.showWebGLSupportMissingModal}),a.createElement(_,{showing:this.state.showWebGLContextLostModal}));return this.state.luminary?a.createElement(f.Provider,{value:this.state.luminary},this.props.children,e):e}}var h=n(69935),S=n(20116),g=n(18326),m=n(64942),I=n(17624),R=n(43187),A=n(68754);function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,R.Z)();return(i,o,a)=>{const s=a.getSceneById(e);a.restoreCursorAfterEffect((()=>{s.textPosition=t,s.getChildrenByType(u.VideoData.TEXT_ASSET_TYPE,{deep:!0}).forEach((e=>{e.setFontSizeToFitAllText()}))})),i((0,m.tH)((0,k.q3)(a),n,r)),i((0,I.G3)(e,!1,n,r)),analytics.track("Media Step: Text Position Updated")}}function v(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,R.Z)();return(a,s,u)=>{const c=u.getSceneById(e);u.restoreCursorAfterEffect((()=>{c.getChildrenByName(t,{deep:!0}).forEach((e=>{(0,A.mR)(e,n,r)}))})),a((0,m.tH)((0,k.q3)(u),i,o))}}function O(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,R.Z)();return(a,s,c)=>{const d=c.getSceneById(e);c.restoreCursorAfterEffect((()=>{d.getChildrenByName(t,{deep:!0}).forEach((e=>{if(void 0!==(0,A.d7)(e,n))(0,A.mR)(e,n,u.VideoData.templateColorByIndex(r));else{const t=(0,g.z7)(e);(0,A.mR)(t,n,u.VideoData.templateColorByIndex(r))}}))})),a((0,m.tH)((0,k.q3)(c),i,o)),"normalStyle.textColor"===n?analytics.track("Text element color changed",{colorType:"palette"}):"highlightStyle.textColor"===n?analytics.track("Text element highlight color changed",{colorType:"palette"}):analytics.track("Text element accent color changed",{colorType:"palette"})}}function D(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,R.Z)();return(a,s,u)=>{const c=u.getSceneById(e).getChildWithId(t,{deep:!0});r?u.restoreCursorAfterEffect((()=>{c.tryToUpdateTextSize(n)})):c.tryToUpdateTextSize(n),a((0,m.tH)((0,k.q3)(u),i,o))}}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,R.Z)();return(i,o,a)=>{if(window.getSelection().isCollapsed)return;const s=a.getSceneById(e).getChildWithId(t,{deep:!0}),u=s.getTextInputSelection();if(null===u)return;const c=u.sort(((e,t)=>e-t)),d=[...s.textHighlights,c];a.restoreCursorAfterEffect((()=>{s.textHighlights=d}),c),i((0,m.tH)((0,k.q3)(a),n,r))}}function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,R.Z)();return(i,o,a)=>{const s=a.getSceneById(e).getChildWithId(t,{deep:!0}),u=s.getTextInputSelection();if(null===u)return;const c=u.sort(((e,t)=>e-t)),d=[],[l,_]=c;window.getSelection().isCollapsed?s.textHighlights.forEach((e=>{const[t,n]=e;(l<t||_>n)&&d.push(e)})):s.textHighlights.forEach((e=>{const[t,n]=e;l>=t&&_<=n?(t!==l&&d.push([t,l]),_!==n&&d.push([_,n])):d.push(e)})),a.restoreCursorAfterEffect((()=>{s.textHighlights=d}),c),i((0,m.tH)((0,k.q3)(a),n,r))}}function L(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,R.Z)();return(o,a,s)=>{const c=s.getSceneById(e).getChildWithId(t,{deep:!0});s.restoreCursorAfterEffect((()=>{(0,A.mR)(c,"normalStyle.fontUrl",u.VideoData.templateFontsByIndex(n)),(0,A.mR)(c,"highlightStyle.fontUrl",u.VideoData.templateFontsByIndex(n)),c.setFontSizeToFitAllText()})),o((0,m.tH)((0,k.q3)(s),r,i))}}function P(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,R.Z)();return(i,o,a)=>{const s=a.getSceneGroupById(e).captions.style;s&&((0,A.mR)(s,t,u.VideoData.templateColorByIndex(n)),i((0,m.tH)((0,k.q3)(a),!1,r)),"normalStyle.textColor"===t?analytics.track("Scene group captions color changed",{colorType:"palette"}):analytics.track("Scene group captions accent color changed",{colorType:"palette"}))}}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,R.Z)();return(r,i,o)=>{const a=o.getSceneGroupById(e).captions.style;a&&(a.textSize=t,r((0,m.tH)((0,k.q3)(o),!1,n)),analytics.track("Scene group captions size changed",{sceneGroupId:e}))}}function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,R.Z)();return(r,i,o)=>{const a=o.getSceneGroupById(e).captions.style;a&&((0,A.mR)(a,"normalStyle.fontUrl",u.VideoData.templateFontsByIndex(t)),r((0,m.tH)((0,k.q3)(o),!1,n)),analytics.track("Scene group captions font changed",{sceneGroupId:e}))}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,R.Z)();return(r,i,o)=>{o.getSceneGroupById(e).captions.visibleWithUpdate=t,r((0,m.tH)((0,k.q3)(o),!1,n)),analytics.track("Scene group captions visibility changed",{sceneGroupId:e})}}var M=n(35369);function V(e){let t=M.default.OrderedMap();return e.template.colors.forEach(((n,r)=>{t.has(`color_${r}`)||(t=t.set(`color_${r}`,e.template.colors[r].color))})),t}var G=n(90613),k=n(51225);function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,R.Z)();return(i,o,a)=>{const s=a.getSceneById(e);s&&(F(s.getChildWithId(t,{deep:!0})),i((0,m.tH)((0,k.q3)(a),n,r)),analytics.track("Media asset cleared",{sceneId:e}))}}function F(e){e.sourceData=u.VideoData.INVISIBLE_IMAGE_SOURCE_DATA,e.slide.attribution=null}function H(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,R.Z)();return(o,a,s)=>{const c=s.getSceneGroupById(e);c&&(c.scenes.forEach((r=>{const i=r.getChildByName(t,{deep:!0});i&&(i.linkToSceneGroup?(c.mediaAsset.volume=n,analytics.track("video asset volume changed",{new_volume:n,sceneId:r.id,sceneGroupId:e,sceneCategory:r.sceneCategory})):i.sourceData.type!==u.VideoData.VIDEO_TYPE_BACKGROUND?console.error(`Asset ${t} of scene ${r.id} is not a video.`):(i.volume=n,analytics.track("video asset volume changed",{new_volume:n,sceneId:r.id,sceneGroupId:e,sceneCategory:r.sceneCategory})))})),o((0,m.tH)((0,k.q3)(s),r,i)))}}function B(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e||!t)return;const i=5,o=e.mediaTargetResolution.width/e.mediaTargetResolution.height,a=t.mediaTargetResolution.width/t.mediaTargetResolution.height,s=Math.abs(100*o-100*a)<i,u=t.mediaTargetResolution.width/e.mediaTargetResolution.width,c=t.mediaTargetResolution.height/e.mediaTargetResolution.height;let d=t.xTranslation,l=t.yTranslation;const _=t.scaleX;s||(d=t.xTranslation*u*n,l=t.yTranslation*c*r),e.xTranslation=d,e.yTranslation=l,e.scaleX=_,e.scaleY=_}function Z(e){return e.getChildrenByType(u.VideoData.ICON_ASSET_TYPE,{deep:!0})}var j=n(18504),Y=n(27182),W=n(11049),K=n(3702),$=n(56228),q=n(37485),X=n(94561),J=n(82023),z=n(9514),Q=n(47176),ee=n(36062),te=n(79783);function ne(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,R.Z)();return(a,s,u)=>{u.getSceneById(e).getChildrenByName(t,{deep:!0}).forEach((e=>{(0,A.mR)(e,n,r)})),a((0,m.tH)((0,k.q3)(u),i,o))}}function re(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,R.Z)();return(a,s,c)=>{c.getSceneById(e).getChildrenByName(t,{deep:!0}).forEach((e=>{(0,A.mR)(e,n,u.VideoData.templateColorByIndex(r))})),a((0,m.tH)((0,k.q3)(c),i,o))}}function ie(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,R.Z)();return(a,s,d)=>{var l;const _=d.getSceneById(e);if(!_)return;const E=t.toJS(),f=Object.assign({type:E.type},E[E.type]);let p=null;if(n)p=_.getChildWithId(n,{deep:!0});else{const e=Z(_);e.length>0&&(p=e[0])}if(null!==p||_.sceneCategory!==u.VideoData.CATEGORY_OUTRO){if(null===p){if(_.sceneCategory===u.VideoData.CATEGORY_OUTRO)return void Q.Z.info("That scene does not support icons.","");const n=d.sceneGroups.find((t=>t.scenes.some((t=>t.id===e)))).id,r=d.getSceneGroupById(n),c=_.sceneCategory===u.VideoData.CATEGORY_TALKING_HEAD,l=_.sceneCategory===u.VideoData.CATEGORY_TALKING_HEAD_INSERT,E=(0,J.Ks)(s(),n);if((c||l)&&(r.scenes.length>1||!E))return;_.sceneCategory!==u.VideoData.CATEGORY_TALKING_HEAD&&_.sceneCategory!==u.VideoData.CATEGORY_TALKING_HEAD_INSERT&&(Q.Z.info("We swapped to a design that supports icons.",""),ae(n,t,i,o)(a,s,d))}if(null!==p){if(0===f.num_colors&&f.source===u.VideoData.SOURCE_LUMEN5_ICONS_PREMIUM)p.replace(f);else if(f.num_colors<ee.iI&&p.colorMaps.length===f.num_colors)p.replace(f);else if(f.num_colors<ee.iI&&p.colorMaps.length>ee.iI){const t=s(),n=(0,W.Ig)(t,e),r=new(c())({fetchResources:!1,disableRenderer:!0,disableRenderQueue:!0,autoDraw:!1,autoUpdate:!1}),i=(0,K.xt)(t,d.template.id).toJS();r.setTemplate(i);const o=_.sceneDesign;let a=r.addScene({sceneDesignId:o}).getChildByName(p.name,{deep:!0}).colorMaps[0]._targetColorValue.split("_").slice(-1);if(n){const n=(0,W.P)(t,e);a=(0,W.lH)(t,e).colorShuffles[n][a]}(0,A.mR)(p,"colorMaps[0].targetColor",u.VideoData.templateColorByIndex(a)),p.replace(f),r.destroy()}else p.sourceData=f,p.slide.attribution=f.attribution;if(a((0,m.tH)((0,k.q3)(d),i,o)),analytics.track("Icon Added To Scene",{sceneId:e,method:r?"drag":"click",media_source:(0,z.B8)(s()),current_user:null===(l=t.get("history_index_user_ids"))||void 0===l?void 0:l.some((e=>SERVER.USER.id===e))}),!1===i){const t=(0,X.a9)(s()).get("subsceneIndex");j.Z.emit(j.r.START_EDITING_NON_TEXT_ASSET,{sceneId:e,subsceneIndex:t,assetId:p.id,assetType:u.VideoData.ICON_ASSET_TYPE},(0,Y.Zd)(p.id,e,t))}}}}}function oe(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,R.Z)();return(i,o,a)=>{const s=a.template.id,c=(0,K.ZA)(o(),s);if(!c)throw new Error("no default_icon_scene_design found, unable to create scene!");const{scene:d,sceneGroup:l}=a.addSceneGroup({sceneDesignId:c});let _;switch(ie(d.id,t,null,!1,n,r)(i,o,a),e=Math.min((0,q.BD)(a),e),a.moveSceneGroupToIndex(l.id,e),i((0,m.tH)((0,k.q3)(a),n,r)),t.getIn([t.get("type"),"source"])){case u.VideoData.SOURCE_USER:case u.VideoData.SOURCE_USER_WATERMARK:case u.VideoData.SOURCE_USER_OUTRO:_="Uploads";break;case u.VideoData.SOURCE_ARTICLE:_="Article";break;default:_="Library"}return analytics.track("New Scene Added",{method:"Icon Drag and Drop",mediaSource:_,sceneId:d.id,sceneGroupId:l.id,sceneDesignId:d.sceneDesign,sceneCategory:d.sceneCategory,templateId:a.template.id,hasIcon:(0,g.MP)(d)}),i((0,$.EB)({sceneId:d.id})),{sceneId:d.id,sceneGroupId:l.id}}}function ae(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,R.Z)();return(i,o,a)=>{const s=a.getSceneGroupById(e);if(!s)return;const u=s.scenes[0],c=a.template.id,d=(0,K.ZA)(o(),c),l=a.addSceneGroup({sceneDesignId:d}).sceneGroup;(0,S.j9)((()=>{new te.Z(u).copyContentToScene(l.scenes[0],u.sceneCategory),a.moveSceneGroupToIndex(l.id,s.index),a.removeSceneGroup(s.id),i((0,$.uZ)({sceneId:u.id})),ie(l.scenes[0].id,t,null,!1,n,r)(i,o,a)}),a),(0,q.iF)(l.scenes[0]),analytics.track("Slide Replaced with Default Scene Design",{action:"drag-icon"})}}var se=n(18446),ue=n.n(se),ce=n(27361),de=n.n(ce),le=n(28216);function _e(e,t){if(void 0===e||void 0===t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}const fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return o=>{var s;if(void 0===o)throw Error("You are passing in an undefined Component to luminaryReduxConnect");const u=i.eventsToSubscribeTo??["stateChanged"],c=a.memo((e=>{const t=(0,a.useContext)(f),s=(0,le.oR)(),c=(0,a.useRef)(!1),d=(0,a.useRef)(null),l=(0,a.useRef)(),_=(0,a.useRef)(null),E=(0,a.useRef)(),p=(0,a.useRef)({}),{forwardedRef:T,...h}=e,S=(0,a.useRef)();S.current=h;const[,g]=(0,a.useReducer)((e=>e+1),0),m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return p.current[e]&&ue()(p.current[e].value,t)||(p.current[e]={value:t,transformedValue:n(t)}),p.current[e].transformedValue};(0,a.useEffect)((()=>()=>{c.current=!0}),[]);const I=(0,a.useMemo)((()=>{if(!n)return;const e=()=>{d.current=null,c.current||he(i,t,S.current)&&(_e(n(t,S.current,m,s.getState),E.current)||g())},r=s.subscribe((()=>{n&&n.length>=4&&null===d.current&&(d.current=requestAnimationFrame(e))}));return u.forEach((n=>{t.on(n,e)})),function(){r(),u.forEach((n=>{t.off(n,e)})),d.current&&(cancelAnimationFrame(d.current),d.current=null)}}),[t,s]);if((0,a.useEffect)((()=>I),[I]),!he(i,t,S.current))return null;t&&_.current!==t&&(l.current=r?r(s.dispatch,s.getState,t,e):{},_.current=t);const R=n?n(t,S.current,m,s.getState):{};return E.current=R,a.createElement(o,Ee({ref:T},S.current,R,l.current))}));c.displayName=`LuminaryReduxConnect(${o.displayName||o.name||(null===(s=o.type)||void 0===s?void 0:s.name)||"Component"})`;let d=c;return i.forwardRef&&(d=a.forwardRef((function(e,t){return a.createElement(c,Ee({},e,{forwardedRef:t}))}))),(0,le.$j)(e,t,void 0,i)(d)}},pe=new RegExp(/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/);function Te(e){return pe.test(e)}const he=(e,t,n)=>{if(!(void 0!==e.renderOnlyIfScenePresent&&null!==e.renderOnlyIfScenePresent||void 0!==e.renderOnlyIfSceneGroupPresent&&null!==e.renderOnlyIfSceneGroupPresent))return!0;let r;if("function"==typeof e.renderOnlyIfSceneGroupPresent){const i=e.renderOnlyIfSceneGroupPresent(n),o=t.getSceneGroupById(i);if(!o)return!1;r=o.scenes[0]}if(!0===e.renderOnlyIfScenePresent)return t.scenes.length>0;if("string"==typeof e.renderOnlyIfScenePresent){const n=e.renderOnlyIfScenePresent;r=t.getSceneById(n)}else if("number"==typeof e.renderOnlyIfScenePresent){const n=e.renderOnlyIfScenePresent;r=t.scenes.length>=n?t.scenes[n]:void 0}else if("function"==typeof e.renderOnlyIfScenePresent){const i=e.renderOnlyIfScenePresent(n);r=t.getSceneById(i)}else if(void 0===e.renderOnlyIfSceneGroupPresent)throw Error(`invalid renderOnlyIfScenePresent value: ${e.renderOnlyIfScenePresent}`);if(void 0===r||r.destroyed)return!1;if(!e.renderOnlyIfChildPresent&&!e.renderOnlyIfAssetPresent)return!0;if(e.renderOnlyIfChildPresent){let t,i,o;if("string"==typeof e.renderOnlyIfChildPresent)t=e.renderOnlyIfChildPresent;else{if("function"!=typeof e.renderOnlyIfChildPresent)throw Error(`invalid renderOnlyIfChildPresent value: ${e.renderOnlyIfChildPresent}`);t=e.renderOnlyIfChildPresent(n)}if(null==t)return!0;if("number"==typeof e.childOnSubscene?i=e.childOnSubscene:"function"==typeof e.childOnSubscene&&(i=e.childOnSubscene(n)),Number.isInteger(i)){const e=r.subscenes[i];if(void 0===e)return!1;o=Te(t)?e.getChildWithId(t,{deep:!0}):e.getChildByName(t,{deep:!0})}else o=Te(t)?r.getChildWithId(t,{deep:!0}):r.getChildByName(t,{deep:!0});if(!o)return!1;if(e.renderOnlyIfPathPresent){if("function"!=typeof e.renderOnlyIfPathPresent)throw Error(`Invalid renderOnlyIfPathPresent value: ${e.renderOnlyIfPathPresent}`);if(void 0===de()(o,e.renderOnlyIfPathPresent(n)))return!1}return!0}if(e.renderOnlyIfAssetPresent){var i;let t;if("string"==typeof e.renderOnlyIfAssetPresent)t=e.renderOnlyIfAssetPresent;else{if("function"!=typeof e.renderOnlyIfAssetPresent)throw Error(`invalid renderOnlyIfAssetPresent value: ${e.renderOnlyIfAssetPresent}`);t=e.renderOnlyIfAssetPresent(n)}return!t||(!!r.getChildWithId(t,{deep:!0})||!(null===(i=r.sceneGroup.captions)||void 0===i||!i.getChildWithId(t)))}return!0};var Se=n(35276);const ge="ColorAsset",me="TimeAwareMediaAsset",Ie="IconAsset",Re="onRenderComplete",Ae="highlightStyle.textColor",ye="nte-editing-exception"},69935:function(e,t,n){"use strict";n.d(t,{Ul:function(){return ye},Vo:function(){return Ve},Am:function(){return Le},US:function(){return be},rP:function(){return Oe},Wj:function(){return Ue},OE:function(){return $e},bL:function(){return Te},Ty:function(){return Nt},Pg:function(){return pe},L2:function(){return Re},XX:function(){return he},Gt:function(){return Ct},C1:function(){return Ee},hq:function(){return fe},wo:function(){return _e},Tx:function(){return le},_g:function(){return Qt},fz:function(){return Vt},Cf:function(){return ut},Pz:function(){return lt},On:function(){return Ht},sD:function(){return Bt},ao:function(){return Wt},tV:function(){return xe},y5:function(){return it},Ox:function(){return qe},WE:function(){return ke},uK:function(){return Tt},p5:function(){return Ge},BS:function(){return Xt},c:function(){return qt},mJ:function(){return Mt},rL:function(){return tt},vg:function(){return we},ac:function(){return kt},zp:function(){return gt},kU:function(){return St},qN:function(){return je},r$:function(){return re},op:function(){return Je},p7:function(){return Pt},jb:function(){return ht},cu:function(){return Lt},Hq:function(){return bt},pT:function(){return At},zt:function(){return mt},vk:function(){return Me},aF:function(){return Qe},Bi:function(){return ze},kH:function(){return et},Y$:function(){return It},Tk:function(){return yt},Lk:function(){return ve},QV:function(){return st},kp:function(){return ct},Q7:function(){return _t},tT:function(){return Ze},ZR:function(){return ft},Bd:function(){return pt},Zu:function(){return ot},jx:function(){return He},Wp:function(){return Be},iG:function(){return rt},a$:function(){return Fe},v7:function(){return Et},tU:function(){return dt},bV:function(){return Ke},Ww:function(){return Ye},qm:function(){return We},xK:function(){return Xe},v:function(){return Rt},Wh:function(){return Yt},cV:function(){return jt},T7:function(){return $t},Cd:function(){return Kt},dT:function(){return Ut},Q8:function(){return ne}});var r=n(35369),i=n(28216),o=n(21090),a=n(64061),s=n.n(a),u=n(36062),c=n(58802),d=n(47176),l=n(18504),_=n(27182),E=n(15442),f=n(22718),p=n(84829),T=n(11049),h=n(58509),S=n(94561),g=n(64942),m=n(9514),I=n(17624),R=n(3702),A=n(61948),y=n(43187),v=n(94075),O=n(78133),D=n(28074),C=n(59163),N=n(29766);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class P{constructor(e,t,n,r,i){L(this,"templateId",void 0),L(this,"aspectRatio",void 0),L(this,"autoCrop",void 0),L(this,"recommendBrightness",void 0),L(this,"assetUUIDs",void 0),this.templateId=e,this.aspectRatio=t,this.autoCrop=n,this.recommendBrightness=r,this.assetUUIDs=i}static from(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=(0,D.wcH)(e);return new P(t.template.id,t.aspectRatio,n,r,i.map((e=>e.mediaId)).filter((e=>e)))}equals(e){return e instanceof P&&this.toCacheKey()===e.toCacheKey()}toCacheKey(){return`${this.assetUUIDs}-${this.templateId}-${this.aspectRatio}-${this.autoCrop}-${this.recommendBrightness}`}toRequestData(){const e={theme:this.templateId,aspect_ratio:this.aspectRatio,auto_crop:this.autoCrop,recommend_brightness:this.recommendBrightness};return this.assetUUIDs.forEach(((t,n)=>{e[`asset_uuids[${n}]`]=t.match(/\w{8}-\w{4}-\w{4}-\w{4}-\w{12}/)[0]})),e}}class b{constructor(){L(this,"MAX_REQUESTS_IN_FLIGHT",void 0),L(this,"MAX_CACHE_SIZE",void 0),L(this,"cacheData",void 0),L(this,"prefetchQueue",void 0),L(this,"luminary",void 0),L(this,"__luminaryStateChanged",void 0),this.MAX_REQUESTS_IN_FLIGHT=2,this.MAX_CACHE_SIZE=200,this.cacheData={},this.prefetchQueue=[],this.luminary=null,this.__luminaryStateChanged=()=>this._luminaryStateChanged()}setLuminary(e){if(this.luminary===e)throw Error("trying to pass the same instance of Luminary into the SceneAttributesCache multiple times. You should only pass an instance of luminary once!");this.luminary&&this.luminary.off("stateChanged",this.__luminaryStateChanged),this.luminary=e,this.luminary.on("stateChanged",this.__luminaryStateChanged)}_luminaryStateChanged(){const e=this.luminary.scenes.filter((e=>e.sceneCategory===C.VideoData.CATEGORY_ORDINARY)).map((e=>P.from(e,this.luminary))).filter((e=>e));this._limitQueueSizeWith(e),e.forEach((e=>{this._appendToQueue(e)}))}async getSceneAttributes(e){const t=e.toCacheKey();return this.cacheData[t]?this.cacheData[t]instanceof Promise?this.cacheData[t]:Promise.resolve(this.cacheData[t]):this._fetchAndStore(e)}async _fetchAndStore(e){const t=e.toCacheKey();return this.cacheData[t]=new Promise(((n,i)=>{$.ajax({url:SERVER.URLS.scene_attributes,method:"GET",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},data:e.toRequestData(),success:e=>{const i=r.default.fromJS(e);"true"!==N.Z.disable_cache&&(this.cacheData[t]=r.default.fromJS(i)),n(i),window.setTimeout((()=>{this._doPrefetchWork()}),0)},error:()=>{delete this.cacheData[t],window.setTimeout((()=>{this._doPrefetchWork()}),0)}})})),this.cacheData[t]}_appendToQueue(e){const t=e.toCacheKey();if(!this.cacheData[t]){for(let t=0;t<this.prefetchQueue.length;t++)if(e.equals(this.prefetchQueue[t]))return;this.prefetchQueue.push(e),this._doPrefetchWork()}}_doPrefetchWork(){const e=this._calculateInFlightRequestCount();if(e>=this.MAX_REQUESTS_IN_FLIGHT)return;const t=this.MAX_REQUESTS_IN_FLIGHT-e;for(let e=0;e<t;e++){const e=this.prefetchQueue.pop();if(!e)return;{const t=e.toCacheKey();this.cacheData[t]||this._fetchAndStore(e)}}}_calculateInFlightRequestCount(){let e=0;for(const t in this.cacheData)this.cacheData[t]instanceof Promise&&e++;return e}_limitQueueSizeWith(e){if(Object.keys(this.cacheData).length<=this.MAX_CACHE_SIZE)return;const t=e.map((e=>e.toCacheKey())),n=[];for(const e in this.cacheData)t.includes(e)||n.push(e);n.forEach((e=>{delete this.cacheData[e]}))}}var U=function(){let e;return{getInstance:()=>(e||(e=new b),e)}}(),w=n(78192),M=n(56228),V=n(79783),G=n(93386),k=n.n(G),x=n(91966),F=n.n(x);function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class B{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.Z.video_duration_limit,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;H(this,"transcriptWords",void 0),H(this,"assetStart",void 0),H(this,"assetEnd",void 0),H(this,"scenes",void 0);const i=[];this.enforceMaxWordDurationOnWordBounds(e);for(const r of e)r.startTime>=t&&r.endTime<=n?i.push(r):r.endTime>t&&r.startTime<t?i.push(Object.assign(r,{startTime:t})):r.endTime>n&&r.startTime<n&&i.push(Object.assign(r,{endTime:n}));this.transcriptWords=i,this.assetStart=t,this.assetEnd=n,this.scenes=(null==r?void 0:r.scenes)??[]}enforceMaxWordDurationOnWordBounds(e){if(e&&e.length>0){const t=e[0],n=e[e.length-1];t.endTime-t.startTime>u.gA.MAX_BOUNDARY_WORD_DURATION&&(e[0]=Object.assign(t,{startTime:t.endTime-u.gA.MAX_BOUNDARY_WORD_DURATION})),n.endTime-n.startTime>u.gA.MAX_BOUNDARY_WORD_DURATION&&(e[e.length-1]=Object.assign(n,{endTime:n.startTime+u.gA.MAX_BOUNDARY_WORD_DURATION}))}}getSentenceBoundaries(e){const t=[];for(let n=0;n<e.length;n++){if(n===e.length-1){t.push(n);break}if(0===n)continue;const r=e[n].word,i=e[n+1].word;r.trim()&&i.trim()&&(![".","!","?"].includes(r[r.length-1])||i[0]!==i[0].toUpperCase()&&isNaN(parseInt(i[0]))||t.push(n))}return t}getSceneBoundaries(e){const t=[];if(this.scenes.length>1){let n=0,r=0,i=0;const o=this.scenes[0].startTime;for(;n<this.scenes.length;){const a=this.scenes[n];for(;r<e.length;){const n=e[r];if(!n.word.trim()){r+=1;continue}const s=1e3*n.endTime,u=a.endTime-o;if(u>=i&&u<s&&r){t.push(r),r+=1;break}i=s,r+=1}n+=1}}return t}addChunk(e,t){return 0===t.length?t.push(e):e.duration<u.gA.MIN_CHUNK_DURATION?(t[t.length-1].caption+=" "+e.caption,t[t.length-1].duration+=e.duration,t[t.length-1].endTime=e.endTime):t.push(e),t}normalizeCaptions(e,t){if(!e||0===e.length)return[];const n=[],r=1e3*this.assetStart,i=Math.min(t,1e3*this.assetEnd),o=e.filter((e=>e.endTime>e.startTime));for(const[e,t]of o.entries()){let{startTime:i,endTime:a,caption:s}=t;i*=1e3,a*=1e3,0===e&&0!==i?i-r<1e3?n.push({startTime:r,endTime:a,caption:s}):(n.push({startTime:r,endTime:i,caption:""}),n.push({startTime:i,endTime:a,caption:s})):e>0&&i!==1e3*o[e-1].endTime?(n.push({startTime:1e3*o[e-1].endTime,endTime:i,caption:""}),n.push({startTime:i,endTime:a,caption:s})):n.push({startTime:i,endTime:a,caption:s})}const a=n[n.length-1].endTime;return a<i?n.push({startTime:a,endTime:i,caption:""}):a>i&&(n[n.length-1].endTime=i),n}chunkCaptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.transcriptWords||0===this.transcriptWords.length)return[];e||(e=1e3*this.transcriptWords[this.transcriptWords.length-1].endTime);let t=[],n={},r=0,i="",o=0;const a=this.getSentenceBoundaries(this.transcriptWords),s=this.getSceneBoundaries(this.transcriptWords),c=[];let d=0,l=0;for(;d<=a.length&&l<=s.length;){const e=a[d],t=s[l];if(!e||!t)break;t>=e-u.gA.SCENE_SENTENCE_BOUND_THRESHOLD&&t<=e+u.gA.SCENE_SENTENCE_BOUND_THRESHOLD?(c.push(t),l+=1):t<e?l+=1:d+=1}const _=F()(s,c),E=k()(a,_).sort(((e,t)=>e-t)),f={};for(const e of E)for(let t=e-u.gA.KEEP_GOING_MAX_WORDS;t<e;t++)f[t]=e;for(let e=0;e<this.transcriptWords.length;e++){const a=this.transcriptWords[e];let s,c;0===Object.keys(n).length&&(n.startTime=a.startTime),e>0?(c=this.transcriptWords[e-1],s=a.startTime-c.endTime):s=a.startTime;const d=a.endTime-a.startTime,l=i.split(" ").length,_=l>u.gA.WORDS_PER_CAPTION||r+d>u.gA.TIME_PER_CAPTION;let p=!1;if(0!==e&&(e in f||E.includes(e)||!_?E.includes(e-1)&&l>=u.gA.STOP_EARLY_MIN_WORDS&&(p=!0):p=!0),s>u.gA.MIN_CHUNK_DURATION){let u;i&&(n=Object.assign(n,{caption:i,endTime:o,duration:r}),t=this.addChunk(n,t)),u=e>0?c.endTime:this.assetStart;const d=a.startTime;t.push({startTime:u,endTime:d,duration:s,caption:""}),n={},n.startTime=a.startTime,i=a.word,r=a.endTime-a.startTime,o=a.endTime}else p?(n=Object.assign(n,{caption:i,endTime:a.startTime,duration:a.startTime-n.startTime}),t=this.addChunk(n,t),n={startTime:a.startTime},i=a.word,r=a.endTime-a.startTime,o=a.endTime):(i+=" "+a.word,r=a.endTime-n.startTime,o=a.endTime)}return i&&(n=Object.assign(n,{caption:i,endTime:o,duration:r}),t=this.addChunk(n,t)),this.normalizeCaptions(t,e)}}var Z=n(96510),j=n(28254),Y=n(26720),W=n(33645),K=n(84261),q=n(18326),X=n(20116),J=n(68754),z=n(578),Q=n(66628),ee=n(82023),te=n(37485);function ne(){return(e,t,n)=>{const r=(0,y.Z)();Q.Z.start(r),e(o.zF.undo());const i=(0,g.fn)(t()),a=n.autoUpdate;n.autoUpdate=!1,n.clear().then((()=>{n.load(i),n.autoUpdate=a;const t=n.scenes.map((e=>e.id));e((0,h.LN)(t)),n.onAllSlideImagesRendered().then((()=>{const e=z.Os.getLabels(n.scenes.length);Q.Z.end(r,z.Os.name,e)})).catch(),e((0,v.i5)())}))}}function re(){return(e,t,n)=>{const r=(0,y.Z)();Q.Z.start(r),e(o.zF.redo());const i=n.autoUpdate;n.autoUpdate=!1;const a=(0,g.fn)(t());n.clear().then((()=>{n.load(a),n.autoUpdate=i,n.onAllSlideImagesRendered().then((()=>{const e=z.Os.getLabels(n.scenes.length);Q.Z.end(r,z.Os.name,e)})).catch(),e((0,v.i5)())}))}}function ie(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,y.Z)();const u=r.getSceneById(e);if(void 0===u)return;if(u.sceneCategory!==C.VideoData.CATEGORY_ORDINARY&&u.sceneCategory!==C.VideoData.CATEGORY_TALKING_HEAD)return;(0,I.CP)(n(),e)&&(o=!1);const c=P.from(u,r,i,o);U.getInstance().getSceneAttributes(c).then((u=>{const d=r.getSceneById(e);if(void 0===d)return;const l=P.from(d,r,i,o).toCacheKey();if(c.toCacheKey()!==l)return;const _=u.find((e=>e.get("scene_design")===d.sceneDesign));_&&(zt(d,_,t,n,r,a,s),Mt(d.id,a,s)(t,n,r),t((0,g.tH)((0,D.q3c)(r),a,s)))})).catch()}function oe(e,t,n){const r=e.getSceneById(t);r&&(r.duration=n)}function ae(e,t,n,r,i){const o=e.getSceneById(t);if(!o)return;const a=o.getChildByName(n,{deep:!0});a&&(0,X.j9)((()=>{o.duration=Math.round(i)-Math.round(r),a.linkToSceneGroup||(a.startTime=Math.round(r),a.endTime=Math.round(i))}),o)}function se(e,t,n){const r=e.getSceneById(t);r&&(r.textPosition=n)}function ue(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;const a=e.getSceneById(t);if(!a)return;const s=a.getChildWithId(n,{deep:!0});s&&(s.xTranslation=r,s.yTranslation=i,s.scaleX=o,s.scaleY=o)}function ce(e,t,n,r){const i=e.getSceneById(t);if(!i)return;const o=i.getChildWithId(n,{deep:!0});if(!o)return;const a=o.kenburn;return o.kenburn=r,a}function de(e,t,n,r){const i=e.getSceneById(t);if(!i)return;const o=i.getChildWithId(n,{deep:!0});o&&(o.brightness=r)}function le(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{oe(a,e,t),i((0,g.tH)((0,D.q3c)(a),n,r)),i((0,I.oN)(e,!1,n,r))}}function _e(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,y.Z)();return(a,s,u)=>{ae(u,e,t,n,r),a((0,g.tH)((0,D.q3c)(u),i,o)),a((0,I.oN)(e,!1,i,o))}}function Ee(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:(0,y.Z)();return(c,d,l)=>{ue(l,e,t,n,r,i),c((0,g.tH)((0,D.q3c)(l),s,u)),c((0,I.hr)(e,!1,s,u)),analytics.track("Crop set by user",{sceneId:e,transformChanged:o,scaleChanged:a})}}function fe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,y.Z)();return(o,a,s)=>{const u=ce(s,e,t,n);o((0,g.tH)((0,D.q3c)(s),r,i)),o((0,I.N$)(e,!1,r,i)),analytics.track("background animation changed",{new_animation:n,old_animation:u,sceneId:e})}}function pe(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,y.Z)();return(a,s,u)=>{(0,X.j9)((()=>{const s=u.getSceneGroupById(e);if((0,q.w8)(s)===C.VideoData.CATEGORY_TALKING_HEAD&&s.mediaAsset)s.mediaAsset.brightness=r;else{const e=u.getSceneById(t).getChildWithId(n);e&&s.scenes.forEach((t=>{const n=t.getChildByName(e.name);n&&n.mediaSourceId===e.mediaSourceId&&(de(u,t.id,n.id,r),a((0,I.Nj)(t.id,!1,i,o)))}))}a((0,g.tH)((0,D.q3c)(u),i,o))}),u),analytics.track("Media Asset Brightness Updated",{sceneGroupId:e})}}function Te(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.getSceneById(e);if(!s)return;const c=t.save();if(s.clear(),s.load(c),s.generateNewAssetIds(),s.sceneCategory===C.VideoData.CATEGORY_TALKING_HEAD){const e=(0,R.OW)(o(),a.template.id);(0,Z.Hd)(s.sceneGroup,e)}else i((0,R.MN)({sceneDesignId:c.sceneDesign}));if(i((0,g.tH)((0,D.q3c)(a),n,r)),(0,j.Zt)(o())&&t.sceneCategory===C.VideoData.CATEGORY_TALKING_HEAD){const t=a.sceneGroups.find((t=>t.scenes.some((t=>t.id===e)))).id;i((0,p.xM)({sceneGroupId:t})),i((0,p.Mv)({sceneId:s.id,loadingMsg:u.z8.GEN_CAPTION})),i((0,p.Pj)({stage:Y.Lp.SHOWING_USER_MEDIA_MODAL}))}}}function he(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)(),i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return(o,a,s)=>{(0,I.Ro)(a(),e)||(oe(s,e,t),i&&o((0,g.tH)((0,D.q3c)(s),n,r)))}}function Se(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)(),i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return(o,a,s)=>{(0,I.fy)(a(),e)||(se(s,e,t),i&&o((0,g.tH)((0,D.q3c)(s),n,r)))}}function ge(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,y.Z)(),a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return(s,u,c)=>{(0,I.XP)(u(),e)||(ue(c,e,t,n,r),a&&s((0,g.tH)((0,D.q3c)(c),i,o)))}}function me(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,y.Z)(),o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return(a,s,u)=>{(0,I.hh)(s(),e)||(ce(u,e,t,n),o&&a((0,g.tH)((0,D.q3c)(u),r,i)))}}function Ie(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,y.Z)(),o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return(a,s,u)=>{(0,I.CP)(s(),e)||(de(u,e,t,n),o&&a((0,g.tH)((0,D.q3c)(u),r,i)))}}function Re(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,y.Z)();return(u,c,d)=>{(0,X.j9)((()=>{const l=d.getSceneGroupById(e),_=d.getSceneById(t),E=_.getChildWithId(n),f=E.linkToSceneGroup;_.sceneDesign===r&&f?l.scenes.forEach((e=>{const t=e.getChildByName(null==E?void 0:E.name,{deep:!0}),n=Math.abs(E.mediaTargetResolution.width-t.mediaTargetResolution.width)<5&&Math.abs(E.mediaTargetResolution.height-t.mediaTargetResolution.height)<5;t&&n&&!(0,I.XP)(c(),e.id)&&ue(d,e.id,t.id,i,o,a)})):(ue(d,_.id,E.id,i,o,a),f&&u((0,I.hr)(_.id,!1,!1,s))),u((0,g.tH)((0,D.q3c)(d),!1,s))}),d),analytics.track("Talking Head cropped",{sceneGroupId:e})}}function Ae(e,t,n,r){const i=!0,o=(0,y.Z)();(0,X.j9)((()=>{ut(i,o)(t,n,r),lt(i,o)(t,n,r);const a=r.sceneGroups.map((e=>e.id)),s=a.filter((t=>!e.includes(t)));if(s.length===a.length)throw new Error("Cannot delete all scenes");s.forEach((e=>{r.removeSceneGroup(e)}))}),r),t((0,g.tH)((0,D.q3c)(r),i,o))}function ye(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(i,o,a)=>{const s=a.template.id,u=(0,R.Ok)(o(),s),c=a.addSceneGroup({sceneDesignId:u}).sceneGroup,d=(0,m.jl)(o());return c.musicVolumeOverride=d,a.moveSceneGroupToIndex(c.id,e),r&&i((0,g.tH)((0,D.q3c)(a),t,n)),i((0,M.EB)({sceneId:c.scenes[0].id})),{sceneId:c.scenes[0].id,sceneGroupId:c.id}}}function ve(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:(0,y.Z)();return(s,c,E)=>{var f,p;const T=E.getSceneById(e);if(!T)return;const h=t.toJS(),I=Object.assign({type:h.type},h[h.type]),R=T.sceneGroup,A=R.id,y=n?T.getChildWithId(n,{deep:!0}):(0,D.SN8)(T),N=!y;if(N&&T.sceneCategory===C.VideoData.CATEGORY_OUTRO)return;if(N){if(T.sceneCategory===C.VideoData.CATEGORY_OUTRO)return void d.Z.info("That scene does not support media.","");if(T.sceneCategory!==C.VideoData.CATEGORY_TALKING_HEAD&&T.sceneCategory!==C.VideoData.CATEGORY_TALKING_HEAD_INSERT)return d.Z.info("We swapped to a design that supports media.",""),void Ce(A,t,o,a)(s,c,E)}const L=T.sceneCategory===C.VideoData.CATEGORY_TALKING_HEAD,P=T.sceneCategory===C.VideoData.CATEGORY_TALKING_HEAD_INSERT,b=(L||P)&&(N||!(null==y||!y.linkToSceneGroup)),U=b&&!(null!==(f=T.sceneGroup.mediaAsset)&&void 0!==f&&f.hasAudio),w=I.source!==C.VideoData.SOURCE_USER||"image"===I.type,M=(0,ee.Ks)(c(),A),V=(0,j.c)(c())===A,G=b&&!U&&(R.scenes.length>1||w||!M);if(L&&w)return void d.Z.info("Cannot apply media: please drag an uploaded clip with a speaker.","");if(!V&&G)return M?R.scenes.length>1?void d.Z.info("Cannot update talking head media: Scene has overlays.",""):w?void d.Z.info("Cannot update talking head media: Invalid media.",""):void 0:void d.Z.info("Cannot update talking head media: Transcript has been modified.","");if(V&&w)return void d.Z.info("Cannot update talking head media: Invalid media.","");const k=null!=y&&y.linkToSceneGroup?R.mediaAsset||R.addMediaAsset():y;if(!k)return;k.sourceData=I,T.attribution=I.attribution;const x=I.type===C.VideoData.VIDEO_TYPE_BACKGROUND,F=(0,m.jl)(c());if(x&&k.isVideo&&k.hasAudio?P?k.volume=0:(k.volume=k.mediaSource===C.VideoData.SOURCE_USER?O.Z.max_audio_volume:O.Z.min_audio_volume,k.mediaSource===C.VideoData.SOURCE_USER?R.musicVolumeOverride=F<O.Z.duck_audio_volume?F:O.Z.duck_audio_volume:R.musicVolumeOverride=F):P||(R.musicVolumeOverride=F),s((0,g.tH)((0,D.q3c)(E),o,a)),s((0,v.i5)()),analytics.track("Media Step: Media Added To Slide",{sceneId:e,sceneCategory:T.sceneCategory,method:r?"drag":"click",media_source:(0,m.B8)(c()),current_user:null===(p=t.get("history_index_user_ids"))||void 0===p?void 0:p.some((e=>SERVER.USER.id===e)),isRecommendedMedia:i}),!1===o){const t=(0,S.a9)(c()).get("subsceneIndex");l.Z.emit(l.r.START_EDITING_NON_TEXT_ASSET,{sceneId:e,subsceneIndex:t,assetId:k.id,assetType:C.VideoData.MEDIA_ASSET_TYPE},(0,_.Zd)(k.id,e,t))}if(T.sceneCategory===C.VideoData.CATEGORY_TALKING_HEAD){if(!U)return d.Z.info("Updating scene media, transcript and captions.",""),void Ne(R,t,o,a)(s,c,E);Ct(R.id,t)(s,c,E)}ie(e,s,c,E,u.sc,u.fU,o,a),Mt(e,o,a)(s,c,E)}}function Oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.template.id,u=(0,R.ro)(o(),s);if(!u)return void d.Z.error("This template does not support voiceover scenes.");const c=a.addSceneGroup({sceneDesignId:u}).sceneGroup,l=c.id;return a.moveSceneGroupToIndex(l,e),i((0,g.tH)((0,D.q3c)(a),n,r)),c.addVoiceoverAsset(),De(c.id,t,n,r)(i,o,a).then((e=>{e||(d.Z.error("Sorry, we could not create the new voiceover scene."),xe(l,n,r)(i,o,a))})),{sceneGroupId:l,sceneId:c.scenes[0].id}}}function De(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return async(i,o,a)=>{const s=a.getSceneGroupById(e);if(!s)return;if(s.voiceoverAsset||d.Z.info("This is not a voiceover scene group!"),t=t.set("duration",1e3*t.get("duration")),!t.get("has_voiceover"))return void d.Z.info("This audio track does not contain voiceover.");const c=performance.now(),l=s.scenes[0].id;i((0,p.Mv)({sceneId:l,loadingMsg:u.z8.GEN_CAPTION}));const _=t.get("uuid");try{const u=0,d=t.get("duration"),E=await(0,p.ST)(ee.dW.VOICEOVER,_),f=new B(E.transcriptWords,u,d).chunkCaptions(t.get("duration"));Dt(s.id,f,t,u,d)(i,o,a),i((0,ee.B)(E.transcriptWords,e,l,u,d,!0,!1,c,!1,n,r)),i((0,g.tH)((0,D.q3c)(a),n,r)),i((0,p.GQ)({sceneId:l}))}catch(e){return d.Z.error("Sorry, there was a problem generating the transcript."),i((0,p.GQ)({sceneId:l})),!1}return!0}}function Ce(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.getSceneGroupById(e);if(!s)return;const u=s.scenes[0],c=a.template.id,d=(0,R.Ok)(o(),c),l=a.addSceneGroup({sceneDesignId:d}).sceneGroup;(0,X.j9)((()=>{new V.Z(u).copyContentToScene(l.scenes[0],u.sceneCategory),a.moveSceneGroupToIndex(l.id,s.index),a.removeSceneGroup(s.id),i((0,M.uZ)({sceneId:u.id})),ve(l.scenes[0].id,t,null,!1,!1,n,r)(i,o,a)}),a),(0,te.iF)(l.scenes[0]),Qt(l.scenes[0].id)(i,o,a),analytics.track("Slide Replaced with Default Scene Design",{action:"drag-media"})}}function Ne(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{if(!e)return;const s=e.scenes[0].sceneDesign,u=a.addSceneGroup({sceneDesignId:s}).sceneGroup;u.musicVolumeOverride=e.musicVolumeOverride,a.moveSceneGroupToIndex(u.id,e.index),Ct(u.id,t,void 0,!1,n,r)(i,o,a),a.removeSceneGroup(e.id),i((0,g.tH)((0,D.q3c)(a),n,r)),analytics.track("Slide Replaced with Default Scene Design",{action:"drag-media"})}}function Le(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.template.id;let c,d,l;const _=(0,m.jl)(o());if(t.get("type")===m.iv.Video&&t.get(m.iv.Video).get("has_voiceover")&&(c=(0,R.re)(o(),s,C.VideoData.CATEGORY_TALKING_HEAD)),c&&c.size>0){var E;const e=c.get(0).get("id");d=a.addSceneGroup({sceneDesignId:e}).sceneGroup,(null===(E=t.get("video"))||void 0===E?void 0:E.get("source"))===C.VideoData.SOURCE_USER?d.musicVolumeOverride=_<O.Z.duck_audio_volume?_:O.Z.duck_audio_volume:d.musicVolumeOverride=_,l=d.scenes[0],(0,j.Zt)(o())?(i((0,p.xM)({sceneGroupId:d.id})),i((0,p.Mv)({sceneId:l.id,loadingMsg:u.z8.PICKING_MEDIA})),i((0,p.M7)([t,n,r])),i((0,p.n2)({preview_url:t.getIn(["video","preview_url"]),poster_url:t.getIn(["video","poster_url"]),width:t.getIn(["video","width"]),height:t.getIn(["video","height"])})),i((0,p.Pj)({stage:Y.Lp.SHOWING_USER_MEDIA_MODAL}))):(Ct(d.id,t,void 0,!1,n,r)(i,o,a),ie(l.id,i,o,a,u.sc,u.fU,n,r))}else{const e=(0,R.Ok)(o(),s);d=a.addSceneGroup({sceneDesignId:e}).sceneGroup,d.musicVolumeOverride=_,l=d.scenes[0];const u=(0,D.yuB)(l,!0);null!==u&&(0,D.xcD)(u),ve(l.id,t,void 0,!0,!1,n,r)(i,o,a),Qt(l.id)(i,o,a)}let f;switch(e=Math.min((0,te.BD)(a),e),a.moveSceneGroupToIndex(d.id,e),i((0,g.tH)((0,D.q3c)(a),n,r)),t.getIn([t.get("type"),"source"])){case C.VideoData.SOURCE_USER:case C.VideoData.SOURCE_USER_WATERMARK:case C.VideoData.SOURCE_USER_OUTRO:f="Uploads";break;case C.VideoData.SOURCE_ARTICLE:f="Article";break;default:f="Library"}return analytics.track("New Scene Added",{method:"Media Drag and Drop",mediaSource:f,sceneId:l.id,sceneGroupId:d.id,sceneDesignId:l.sceneDesign,sceneCategory:l.sceneCategory,templateId:a.template.id,hasIcon:(0,q.MP)(l)}),i((0,M.EB)({sceneId:l.id})),{sceneId:l.id,sceneGroupId:d.id}}}function Pe(e){return(t,n,r)=>{let i=(0,R.y6)(n(),e),o="";switch(r.aspectRatio){case C.VideoData.LANDSCAPE_ASPECT_RATIO:o="landscape_data";break;case C.VideoData.SQUARE_ASPECT_RATIO:o="square_data";break;case C.VideoData.VERTICAL_ASPECT_RATIO:o="vertical_data";break;default:o="landscape_data"}return i=i.get(o),i.toJS()}}function be(e,t){return async(n,r,i)=>{const o=(0,y.Z)(),a=i.template.id;let s=(0,R.Ok)(r(),a);const u=(0,R.re)(r(),a,C.VideoData.CATEGORY_TALKING_HEAD);u&&u.size>0&&(s=u.getIn([0,"id"]));let c=i.addSceneGroup({sceneDesignId:s}).sceneGroup;const l=c.id,_=c.scenes[0].id;let E;i.moveSceneGroupToIndex(l,t),n((0,p.Mv)({sceneId:_,loadingMsg:"We're uploading your recording!\n\nTrim and crop your clip using the scene controls.\n\nYou can find it again later in the Recordings folder in your media uploads."}));try{E=await e}catch(e){return d.Z.error("There was a problem uploading your recording to Lumen5. Try recording your clip again."),void(i.getSceneGroupById(l)&&xe(l,!0,o)(n,r,i))}finally{n((0,p.GQ)({sceneId:_}))}d.Z.success("Your clip has been added to the Recordings folder in your media uploads.","Uploaded successfully");const f=r();if(c=i.getSceneGroupById(l),!c)return;if(!E)return;const T=(0,A._9)(f,E);if(T)if("video"===T.get("type")&&T.get("video").get("has_voiceover")){const e=(0,R.u2)(r(),c.scenes[0].template.id);c.scenes.filter((e=>e.id!==_)).forEach((e=>c.removeScene(e.id))),c.scenes[0].clear();const t=Pe(e)(n,r,i);c.scenes[0].load(t),await Ct(l,T,null,!1,!0,(0,y.Z)())(n,r,i)}else Ce(l,T,!1,(0,y.Z)())(n,r,i)}}function Ue(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,y.Z)();return(a,s,c)=>{const d=c.template.id,l=(0,R.Ok)(s(),d),{scene:_,sceneGroup:E}=c.addSceneGroup({sceneDesignId:l});if(e=Math.min((0,te.BD)(c),e),(0,X.j9)((()=>{(0,D.wcH)(_).forEach((e=>(0,D.xcD)(e))),(0,q.RY)(_).forEach(((e,n)=>{0===n?e.text=t:n>0&&(e.text=""),e.textHighlights=[],e.setFontSizeToFitAllText()})),c.moveSceneGroupToIndex(E.id,e)}),c),r){const e=[E.id],t=[C.VideoData.CATEGORY_OUTRO,C.VideoData.CATEGORY_BRAND];c.sceneGroups.forEach((n=>{t.includes(n.scenes[0].sceneCategory)&&e.push(n.id)})),Ae(e,a,s,c)}a((0,g.tH)((0,D.q3c)(c),i,o)),a((0,p.Mv)({sceneId:_.id,loadingMsg:u.z8.PICKING_MEDIA})),i||a((0,p.Q8)({sceneId:_.id,sceneGroupId:E.id}));const f=$.Deferred();return nt(_.id,E.id,f,n,i,o)(a,s,c),{deferredRecommendation:f,newSlideId:_.id}}}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,y.Z)();return a=>{const s={};null!==e&&(s.video_id=e),null!==t&&(s.sentences=t),null!==n&&(s.video_sentences=n),0!==Object.keys(s).length&&$.ajax({url:SERVER.URLS.recommend_search_terms,method:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(s),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{a((0,m.iT)(r.default.List(e.terms),e.strategy,i,o))}})}}function Me(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,y.Z)();return(o,a,s)=>{analytics.track("Changed color",{index:t}),s.template.setColorAtIndex(e,t,n),o((0,g.tH)((0,D.q3c)(s),r,i))}}function Ve(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{a.getSceneById(e).addSubscene(t),i((0,g.tH)((0,D.q3c)(a),n,r))}}function Ge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{var a;analytics.track("Media Step: Outro Enabled"),o.enableOutroSceneGroup({sceneDesignId:(0,R.Ye)(i(),o.template.id)}),r((0,g.tH)((0,D.q3c)(o),t,n));const s=o.getOutroSceneGroup(),u=null==s||null===(a=s.scene)||void 0===a?void 0:a.id;u&&!e&&window.setTimeout((()=>{r((0,p.BO)(u,s.id))}),100)}}function ke(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.Z)();return(n,r,i)=>{analytics.track("Media Step: Outro Disabled"),i.disableOutroSceneGroup(),n((0,g.tH)((0,D.q3c)(i),e,t))}}function xe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,o,a)=>{const s=a.getSceneGroupById(e);if(!s)return;const u=s.index+1;let c;u<a.sceneGroups.length&&(c=a.sceneGroups[u].id);const d=a.getSceneGroupById(c),l=[C.VideoData.CATEGORY_ORDINARY,C.VideoData.CATEGORY_TALKING_HEAD,C.VideoData.CATEGORY_TALKING_HEAD_INSERT,C.VideoData.CATEGORY_VOICEOVER];if(l.includes(s.scenes[0].sceneCategory)&&void 0===a.sceneGroups.find((e=>l.includes(e.scenes[0].sceneCategory)&&e.id!==s.id)))throw new D.uQF("not_enough_scenes");const _=s.scenes.map((e=>({sceneId:e.id,sceneDesignId:e.sceneDesign,sceneCategory:e.sceneCategory,hasIcon:(0,q.MP)(e)})));a.removeSceneGroup(e),(0,i.dC)((()=>{var i,o;_.forEach((e=>{let{sceneId:t}=e;r((0,M.uZ)({sceneId:t}))})),r((0,g.tH)((0,D.q3c)(a),t,n)),r((0,ee.YJ)(e,t,n)),r((0,p.CT)(_[0].sceneId,null==d||null===(i=d.scenes)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.id,null==d?void 0:d.id))})),_.forEach((t=>{let{sceneId:n,sceneDesignId:r,sceneCategory:i,hasIcon:o}=t;analytics.track("Slide Deleted",{sceneId:n,sceneGroupId:e,sceneDesignId:r,sceneCategory:i,templateId:a.template.id,hasIcon:o})}))}}function Fe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{o.videoHeight=e,r((0,g.tH)((0,D.q3c)(o),t,n))}}function He(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{o.textDirection=e,r((0,g.tH)((0,D.q3c)(o),t,n))}}function Be(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{o.template.transitionsEnabled=e,r((0,g.tH)((0,D.q3c)(o),t,n))}}function Ze(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{o.paceMultiplier=e,r((0,g.tH)((0,D.q3c)(o),t,n)),wt(t,n)(r,i,o)}}function je(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.getSceneGroupById(e);if(!s)return;const u=s.index;(t-u<0||!(0,D.e5t)(a,s.scenes.slice(-1)[0]))&&(analytics.track("Media Step: Scene Groups Reordered",{sceneGroupId:e}),a.moveSceneGroupToIndex(e,t),i((0,g.tH)((0,D.q3c)(a),n,r)))}}function Ye(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{analytics.track("Media Step: Watermark Opacity Changed"),o.template.watermark.opacity=e/100,r((0,g.tH)((0,D.q3c)(o),t,n))}}function We(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{analytics.track("Media Step: Watermark Position Changed"),o.template.watermark.position=e,r((0,g.tH)((0,D.q3c)(o),t,n))}}function Ke(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{analytics.track("Media Step: Watermark Changed"),o.template.watermark.sourceData=C.VideoData.templateWatermarkSourcesByIndex(e),o.template.watermark.visible=!0,r((0,g.tH)((0,D.q3c)(o),t,n))}}function $e(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return async(r,i,o)=>{analytics.track("Media Step: Watermark Changed");const a=o.template.watermarkSources.length,s={sourceData:{...e}};await o.template.addWatermarkSource(s),Ke(a,t,n)(r,i,o),o.template.watermark.visible=!0,r((0,g.tH)((0,D.q3c)(o),t,n))}}function qe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return async(r,i,o)=>{!1===n&&analytics.track("Media Step: Watermark deleted"),t&&o.template.watermarkSources.length>1&&Ke(o.template.watermarkSources[e+1]?e+1:e-1)(r,i,o),o.template.removeWatermarkSourceAtIndex(e)}}function Xe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{analytics.track("Media Step: Watermark Visibility Changed"),(0,X.j9)((()=>{o.template.watermark.visible=e,r((0,g.tH)((0,D.q3c)(o),t,n))}),o)}}function Je(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.Z)();return(n,r,i)=>{analytics.track("Media Step: Watermark Removed"),i.template.watermark.sourceData=C.VideoData.WATERMARK_NONE,n((0,g.tH)((0,D.q3c)(i),e,t))}}function ze(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{analytics.track("Color Palette Selected",{theme:o.template.id,palette:e});const a=(0,R.zZ)(i(),o.template.id).find((t=>t.get("name")===e));a&&(o.template.colors=a.get("colors").toJS(),r((0,g.tH)((0,D.q3c)(o),t,n)))}}function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{o.template.colors=e,r((0,g.tH)((0,D.q3c)(o),t,n))}}function et(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{analytics.track("Media Step: Font Family Changed",{index:e}),a.template.setFontAtIndex(t,e),i((0,g.tH)((0,D.q3c)(a),n,r))}}function tt(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{const a=o.getSceneById(e);void 0!==a&&$.ajax({url:SERVER.URLS.get_text_direction,method:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({text:(0,q.O3)(a)}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:e=>{o.textDirection=e.text_direction,r((0,g.tH)((0,D.q3c)(o),t,n)),r((0,p.eB)({video_language:e.language}))}})}}function nt(e,t,n,i){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,y.Z)();return(s,u,c)=>{const d=(0,D.UTd)(c),l=(0,D.Jk1)(c),_=c.getSceneById(e);if(void 0===_)return;const E=c.template.id,f=(0,q.Tf)(c);f.splice(_.index,1),$.ajax({url:SERVER.URLS.scene_recommendation_info,method:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({video_id:(0,p.gJ)(u()),sentence:(0,q.O3)(_),slide_number:_.number,aspect_ratio:c.aspectRatio,uuids_used:d,scene_designs_used:f,theme:E,scene_with_icons:l,num_results:1}),beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:d=>{const l=c.getSceneById(e);if(!l)return;const _=r.default.fromJS(d[0]);if(!_)return;const E=l.sceneGroup.index;c.removeSceneGroup(t);const{sceneGroup:f,scene:T}=c.addSceneGroup({sceneDesignId:_.get("scene_design"),id:e});c.moveSceneGroupToIndex(f.id,E),Jt(T.id,_,o,a)(s,u,c),s((0,g.tH)((0,D.q3c)(c),o,a)),s((0,p.GQ)({sceneId:e})),n.resolve(e),analytics.track("New Scene Added",{method:i,sceneId:e,sceneGroupId:f.id,sceneDesignId:T.sceneDesign,sceneCategory:T.sceneCategory,creationStrategy:_.get("strategy"),templateId:c.template.id,hasIcon:(0,q.MP)(T),hasMedia:(0,D.TgR)(T)})},error:()=>{n.reject()}})}}function rt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{if(null===e)return;const a=o.aspectRatio,s=C.VideoData.get_aspect_ratio_of_format(e);if(null!==s){if(a!==s){const e=(0,y.Z)();Q.Z.start(e),o.aspectRatio=s,o.scenes.forEach((e=>{r((0,I.G3)(e.id,!0,t,n)),r((0,I.hr)(e.id,!0,t,n)),e.getChildrenByType(C.VideoData.TEXT_ASSET_TYPE,{deep:!0}).forEach((e=>{e.setFontSizeToFitAllText()}))})),o.onAllSlideImagesRendered().then((()=>{const t=z.Xk.getLabels(o.scenes.length);Q.Z.end(e,z.Xk.name,t)})).catch()}o.format=e,r((0,g.tH)((0,D.q3c)(o),t,n)),at(t,n)(r,i,o),analytics.track("Format Selected",{format:e})}}}function it(e,t,n){return(r,i,o)=>{const a=o.getSceneGroupById(e);if(!a)return;const s=a.scenes.find((e=>e.id===t));s&&(n<0||n>=s.subscenes.length||(s.removeSubslide(n),r((0,g.tH)((0,D.q3c)(o))),r((0,w.Ox)(t,n))))}}function ot(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:(0,y.Z)();return(c,d,l)=>{const _=l.getSceneById(e);_&&((0,X.j9)((()=>{const e=(0,q.xG)(_.subscenes[n]);for(const t of e)t.id===r&&(t.text=o)}),_),(0,te.iF)(_),(0,i.dC)((()=>{c((0,I.G3)(e,!0,a,s)),ie(e,c,d,l,u.sc,u.fU,a,s),c((0,p.Q8)({sceneId:e,sceneGroupId:t,subsceneIndex:n,scrollEventStatus:!0})),c((0,g.tH)((0,D.q3c)(l),a,s)),Mt(e,a,s)(c,d,l)})))}}function at(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.Z)();return(n,r,i)=>{(0,q.eC)(i).forEach((o=>{ie(o,n,r,i,u.sc,u.fU,e,t)}))}}function st(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{o.music=e.toJS(),r((0,g.tH)((0,D.q3c)(o),t,n))}}function ut(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.Z)();return(n,r,i)=>{!1===e&&analytics.track("Media Step: Audio Removed"),i.music=null,n((0,g.tH)((0,D.q3c)(i),e,t))}}function ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{const a=o.audioAssets[o.musicId];a&&(a.startTime=e),r((0,g.tH)((0,D.q3c)(o),t,n))}}function dt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{analytics.track("Media Step: Voiceover Added To Slide"),o.voiceover=e.toJS(),r((0,g.tH)((0,D.q3c)(o),t,n))}}function lt(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.Z)();return(n,r,i)=>{!1===e&&analytics.track("Media Step: Voiceover Removed"),i.voiceover=null,n((0,g.tH)((0,D.q3c)(i),e,t))}}function _t(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(i,o,a)=>{const s=a.getSceneGroupById(e);s&&(s.musicVolumeOverride=t,analytics.track("slide globalAudioVolumeOverride changed",{new_global_audio_volume:t}),i((0,g.tH)((0,D.q3c)(a),n,r)))}}function Et(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(r,i,o)=>{const a=o.sceneGroups;let s=0;a&&((0,X.j9)((()=>{a.forEach((t=>{let n=!1;for(let e=0;e<t.scenes.length;e++)if(t.scenes[e].getChildrenByType(C.VideoData.MEDIA_ASSET_TYPE,{deep:!0}).filter((e=>(e.hasAudio||e.hasVoiceover)&&e.sourceData.source===C.VideoData.SOURCE_USER)).length>0){n=!0;break}n&&e>O.Z.duck_audio_volume?(t.musicVolumeOverride=O.Z.duck_audio_volume,s++):t.musicVolumeOverride=e}))}),o),analytics.track("video globalAudioVolumeOverride changed",{new_global_audio_volume:e,total_scene_groups:a.length,ducked_scene_groups:s}),r((0,g.tH)((0,D.q3c)(o),t,n)))}}function ft(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.getSceneGroupById(e);s&&((0,X.j9)((()=>{s.scenes.forEach((e=>{e.watermark.sourceData=null===t?C.VideoData.WATERMARK_NONE:C.VideoData.templateWatermarkSourcesByIndex(t)}))}),a),i((0,g.tH)((0,D.q3c)(a),n,r)))}}function pt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.getSceneGroupById(e);s&&((0,X.j9)((()=>{analytics.track("Media Step: SceneGroup Watermark Position Changed",{sceneGroupId:e}),s.scenes.forEach((e=>{-1!==e.watermark.availablePositions.indexOf(t)&&(0,J.mR)(e,"watermark.position",t)}))}),a),i((0,g.tH)((0,D.q3c)(a),n,r)))}}function Tt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{const a=o.getSceneGroupById(e);if(!a)return;let s;l.Z.emit(l.r.GLOBAL_STOP_PREVIEW_PLAYBACK);const u={};(0,X.j9)((()=>{for(let e=0;e<a.scenes.length;e++){const c=a.scenes[e];if(0===e){s=o.addSceneGroup({sceneDesignId:c.sceneDesign}).sceneGroup;const e=a.save();s.load(e),s.generateNewAssetIds()}else s.addScene({sceneDesignId:c.sceneDesign});ht(s.scenes[e].id,c,t,n)(r,i,o),u[c.id]=s.scenes[e].id}s.musicVolumeOverride=a.musicVolumeOverride,o.moveSceneGroupToIndex(s.id,a.index+1)}),o);const c=(0,ee.vw)(i(),a.id);c&&c.get("editorState")&&(0,ee.ci)(s.id,c.get("editorState"),u,t,n)(r);const d=s.scenes[0];analytics.track("New Scene Added",{method:"Duplicate",sceneId:d.id,sceneGroupId:s.id,sceneDesignId:d.sceneDesign,sceneCategory:d.sceneCategory,templateId:o.template.id,hasIcon:(0,q.MP)(d)})}}function ht(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.getSceneById(e);if(!s)return;const u=void 0!==t.save?t.save():t;s.clear(),s.load(u),s.generateNewAssetIds(),i((0,g.tH)((0,D.q3c)(a),n,r)),Qt(s.id)(i,o,a);const c=(0,E.vq)(o(),e);i((0,f.ZH)(e,c,n,r))}}function St(){return(e,t,n)=>{U.getInstance().setLuminary(n)}}function gt(e){return(t,n,r)=>{const i=r.getSceneById(e);if(!i)return new Promise(((t,n)=>{n(new Error(`Could not find slide for scene attributes... ${e}`))}));let o=!0;(0,I.CP)(n(),e)&&(o=!1);const a=P.from(i,r,u.sc,o);return U.getInstance().getSceneAttributes(a)}}function mt(){return(e,t,n)=>{n.capabilities.load(O.Z.capabilities)}}function It(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{const a=o.getSceneById(e),s=o.referenceResolution.height*o.referenceResolution.width,u=(0,q.Iz)(o,a.id),d=(0,c.u7)(a,s,u,o.template,c.C0);r((0,T.Z7)({sceneId:a.id,colorShuffleInfo:d,systemTriggered:t,parentActionGroup:n})),r((0,T.Yf)({sceneId:a.id,colorShuffleIndex:0,systemTriggered:t,parentActionGroup:n}))}}function Rt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{const a=o.getSceneById(e),s=a.autoDraw;a.autoDraw=!1;const u=(0,T.P)(i(),e),c=(0,T.lH)(i(),e);if(Object.prototype.hasOwnProperty.call(c,"colorShuffles")){const e=[...Array(a.template.colors.length).keys()].map((e=>"colors_"+e)),i=u,d=c.colorShuffles[i],l=c.childColorProps;a.getChildren({deep:!0}).filter((e=>e.name in l)).forEach((t=>{l[t.name].forEach((n=>{const r=C.VideoData.getTemplateProperty(t,n);if(C.VideoData.isTemplateReference(r)){const r=c.templateReferenceMap[t.name][n],i=e.indexOf(r),o=d[i];(0,J.mR)(t,n,C.VideoData.templateColorByIndex(o))}}))})),a.autoDraw=s,r((0,g.tH)((0,D.q3c)(o),t,n))}}}function At(){return(e,t,n)=>{n.scenes.forEach((e=>(0,te.iF)(e)))}}function yt(e){return(t,n,r)=>{const i=(0,R.xt)(n(),e);r.setTemplate(i.toJS())}}function vt(e,t,n,r,i){return async(o,a,u)=>{const c=u.getSceneGroupById(e);if(c){(0,X.j9)((()=>{Ot(e,t)(o,a,u);const s=c.scenes[0],d=c.mediaAsset||c.addMediaAsset();n&&(d.sourceData=n),d.startTime=1e3*r,d.endTime=1e3*i,d.volume=O.Z.max_audio_volume,s.autoCalcSubsceneDuration=!1}),u);try{await c.mediaAsset.onSourceLoaded();const e=c.mediaAsset.duration-c.duration,t=c.scenes[c.scenes.length-1];t.subscenes[t.subscenes.length-1].duration+=e}catch(e){s().notify(e)}}}}function Ot(e,t){return(n,r,i)=>{const o=i.getSceneGroupById(e);if(!o)return;const a=o.captions,s=o.scenes[0];o.scenes.forEach((e=>e.id!==s.id&&o.removeScene(s.id)));for(let e=s.subscenes.length-1;e>0;e--)s.removeSubslide(e);o.captions.sceneDesignId=(0,R.OW)(r(),i.template.id),t.length>0&&(s.subscenes[0].duration=t[t.length-1].endTime-t[0].startTime),a.removeAllBlocks(),t.forEach((e=>{const{startTime:t,endTime:n,caption:r}=e;a.addBlock({startTime:t,endTime:n,text:r})}))}}function Dt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return(o,a,s)=>{(0,X.j9)((()=>{const u=s.getSceneGroupById(e);if(!u)return;Ot(e,t)(o,a,s);const c=u.scenes[0];u.voiceoverAsset.source=n.toJS(),u.voiceoverAsset.source.startTime=1e3*r,u.voiceoverAsset.source.endTime=1e3*i,c.autoCalcSubsceneDuration=!1}),s)}}function Ct(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,y.Z)();return async(a,c,l)=>{const _=l.getSceneGroupById(e);if(!_)return!1;const E=_.scenes[0],f=E.id;let T,h,S,I;if(!E)return!1;if(E.sceneCategory!==C.VideoData.CATEGORY_TALKING_HEAD)return!1;const R=performance.now();if(t){if(t.get("type")!==m.iv.Video)return!1;if(!1===t.get(m.iv.Video).get("has_audio"))return d.Z.error("The video clip you selected does not appear to have any audio. Please choose another clip that contains audio of a person speaking."),analytics.track("No audio detected in talking head scene",{sceneId:E.id,sceneGroupId:_.id,sceneDesignId:E.sceneDesign,templateId:l.template.id}),!1;T=t.get(m.iv.Video).get("uuid"),h=t.get(m.iv.Video).get("has_voiceover"),S={...t.get(m.iv.Video).toJS(),type:m.iv.Video},I=S.duration}else{const e=_.mediaAsset;e&&(T=e.sourceData.uuid,h=e.hasVoiceover,S=e.sourceData,I=S.duration)}a((0,p.Mv)({sceneId:f,loadingMsg:u.z8.GEN_CAPTION}));const A=()=>{d.Z.error("We had a problem generating captions for your chosen video clip. Please make sure the video contains clear audio speech and try again.")};try{const t=0,s=O.Z.video_duration_limit;if((null===h||r)&&(h=await(0,m.DU)(T,n)),h){const n=await(0,p.ST)(ee.dW.TALKING_HEAD,T),r=new B(n.transcriptWords,t,s).chunkCaptions(I);await vt(_.id,r,S,t,s)(a,c,l),a((0,ee.B)(n.transcriptWords,e,f,t,s,!0,!1,R,!1,i,o)),a((0,g.tH)((0,D.q3c)(l),i,o)),a((0,p.GQ)({sceneId:f}))}else A(),a((0,p.GQ)({sceneId:f}))}catch(e){A(),a((0,p.GQ)({sceneId:f})),s().notify(e)}return!0}}function Nt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return async(r,i,o)=>{const a=o.getSceneGroupById(e);if(!a)return!1;const c=a.scenes[0],l=c.id;if(!c)return!1;const _=performance.now(),E=c.template.id,f=i(),T=(0,R.OY)(f,E),h=(0,R.y9)(f,E),g=(0,R.jt)(f,E);r((0,p.BO)(l,e)),r((0,p.Mv)({sceneId:l,loadingMsg:u.z8.ONBOARDING}));const m=O.Z.video_duration_limit;try{const s=await(0,p.ST)(ee.dW.TALKING_HEAD,K.Hb),u=new B(s.transcriptWords,0,m).chunkCaptions(K.zY.duration);(0,S.P5)(i(),l)&&(await vt(a.id,u,K.zY,0,m)(r,i,o),r((0,ee.B)(s.transcriptWords,e,l,0,m,!0,!0,_,!1,t,n)),(0,X.j9)((()=>{const a=g&&Ht(c.id,e,K.H.startTime,K.H.endTime,g,t,n)(r,i,o),s=h&&Ht(c.id,e,K.sc.startTime,K.sc.endTime,h,t,n)(r,i,o),u=T&&Ht(c.id,e,K.d6.startTime,K.d6.endTime,T,t,n)(r,i,o);if(a){const e=o.getSceneById(a).getChildrenByType(C.VideoData.MEDIA_ASSET_TYPE,{deep:!0}).filter((e=>!e.linkToSceneGroup&&e.isEditable))[0];e&&(e.sourceData=W)}r((0,p.SB)({lowerThirdInsertId:u,calloutInsertId:s,cutawayInsertId:a}))}),o),r((0,p.Pj)({stage:Y.Lp.PREVIEW_SETUP})))}catch(e){d.Z.error("We had a problem generating captions for your chosen video clip. Please make sure the video contains clear audio speech and try again."),s().notify(e)}finally{r((0,p.GQ)({sceneId:l}))}}}function Lt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return(r,i,o)=>{const a=o.getSceneGroupById(e);if(!a)return;const s=a.scenes[0],u=(0,R.u2)(i(),s.template.id);a.scenes.filter((e=>e.id!==s.id)).forEach((e=>a.removeScene(e.id))),a.mediaAsset&&a.removeMediaAsset(),s.clear();const c=Pe(u)(r,i,o);s.load(c);const d=(0,R.OW)(i(),o.template.id);return(0,Z.Hd)(a,d),r((0,p.GQ)({sceneId:s.id})),r((0,ee.YJ)(e,t,n)),r((0,ee.ow)(t,n)),r((0,p.BO)(s.id,e)),e}}function Pt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.getSceneGroupById(e);if(!s)return;const u=s.scenes[0];s.scenes.filter((e=>e.id!==u.id)).forEach((e=>s.removeScene(e.id))),u.clear();const c=Pe((0,R.vL)(o()))(i,o,a);return u.load(c),t&&ve(u.id,t,void 0,!0,!1,n,r)(i,o,a),i((0,p.GQ)({sceneId:u.id})),i((0,ee.YJ)(e,n,r)),i((0,ee.ow)(n,r)),i((0,p.BO)(u.id,e)),e}}function bt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.Z)();return(n,r,i)=>{const o=ye(e,!1,t,!1)(n,r,i);Lt(o.sceneGroupId,!1,t)(n,r,i),Nt(o.sceneGroupId,!1,t)(n,r,i),n((0,p.xM)({sceneGroupId:o.sceneGroupId}))}}function Ut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12e4;return async(r,i,o)=>{const a=o.getSceneGroupById(e).scenes[0],u=(0,Z.T7)(a);if(null!==u){r((0,p.Mv)({sceneId:a.id,loadingMsg:"Trimming..."}));try{t/=1e3,n/=1e3;const s=u.sourceData,c=await(0,p.ST)(ee.dW.TALKING_HEAD,s.uuid),d=new B(c.transcriptWords,t,n).chunkCaptions();await vt(e,d,s,t,n)(r,i,o),r((0,p.GQ)({sceneId:a.id}))}catch(e){d.Z.error("Error creating talking head scene"),r((0,p.GQ)({sceneId:a.id})),s().notify(e)}}}}function wt(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.Z)();return async(n,r,i)=>{(0,q.eC)(i).forEach((o=>{Mt(o,e,t)(n,r,i)}))}}function Mt(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,y.Z)();return async(r,i,o)=>{if((0,I.Ro)(i(),e))return;const a=o.getSceneById(e);if(!a)return;const s=(0,D.yuB)(a,!0),u=!!(null==s?void 0:s.isVideo)&&Math.trunc(null==s?void 0:s.sourceDuration)||null,c=a.subscenes.map(q.xj),d=(0,p.of)(i());$.ajax({url:SERVER.URLS.estimate_slide_duration,method:"POST",data:JSON.stringify({language:d,pace_multiplier:o.paceMultiplier,scene_category:a.sceneCategory,slide_texts:c,background_duration:u}),contentType:"application/json",beforeSend:e=>{e.setRequestHeader("X-CSRFToken",SERVER.CSRF.TOKEN)},success:i=>{oe(o,e,i.slide_duration),r((0,g.tH)((0,D.q3c)(o),t,n))}})}}function Vt(){return async(e,t,n)=>{for(const o of n.sceneGroups){var r;if(!o.scenes[0])return;const a=o.mediaAsset,s=(0,ee.AM)(t()),u=(null==a?void 0:a.hasAudio)||(null===(r=o.mediaAsset)||void 0===r?void 0:r.hasAudio);if((0,q.w8)(o)===C.VideoData.CATEGORY_TALKING_HEAD&&u&&!s.contains(o.id)){var i;const r=a?null===(i=a.sourceData)||void 0===i?void 0:i.uuid:null,s=await(0,p.ST)(ee.dW.TALKING_HEAD,r);s.hasVoiceover&&s.transcriptWords&&Gt(o.id)(e,t,n)}}}}function Gt(e){return async(t,n,r)=>{var i;const o=r.getSceneGroupById(e);if(!o||!o.scenes[0])return;const a=O.Z.video_duration_limit;let s=(null===(i=o.mediaAsset)||void 0===i?void 0:i.startTime)||0,u=s;const c=[];o.captions.blocks.forEach((e=>{const t=e.text.trim().replace(/\s+/g," ").split(" ");if(t.length>0){let n=0;e.startTime<500?(s=500,n=Math.max(e.endTime-e.startTime-500,0)):(s=e.startTime,n=e.endTime-e.startTime);const r=Math.floor(n/t.length);for(let e=0;e<t.length;e++)u=Math.max(s,s+r),c.push({word:t[e],startTime:Math.round(s/100)/10,endTime:Math.round(u/100)/10}),s=u}})),t((0,ee.B)(c,e,o.scenes[0].id,0,a,!1,!1,null,!0))}}function kt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return async(i,o,a)=>{var s;const u=a.getSceneGroupById(t);if(!u||!e||e.getEditorState().isEmpty())return;const c=u.captions;let d=(null===(s=u.mediaAsset)||void 0===s?void 0:s.startTime)||0;const l=(0,ee.$B)(e);if(l.length>0){const e=l[0].startTime,t=l[l.length-1].endTime,s=new B(l,e,t,u).chunkCaptions();if(s.length>0){s[0].startTime-d<0&&(d=0);const e=s.map((e=>{let{startTime:t,endTime:n,caption:r}=e;return{startTime:t-d,endTime:n-d,text:r}}));c.replaceBlocks(e),u.scenes.forEach((e=>{Qt(e.id)(i,o,a)})),i((0,g.tH)((0,D.q3c)(a),n,r))}}}}function xt(e,t,n,r,i,o){return arguments.length>7&&void 0!==arguments[7]||(0,y.Z)(),(i,a,s)=>{var u;let c;for(c=r.length-1;c>n;c--)e.removeSubslide(c),i((0,w.Ox)(e.id,c));let d=r[n]-Math.round(o);for(;d>0;){const t=e.subscenes[c].duration;if(t>d?(e.subscenes[c].duration-=d,d=0):(e.removeSubslide(c),i((0,w.Ox)(e.id,c)),d-=t),c-=1,0===d)break}return e.subscenes.length||t.removeScene(e.id),(null===(u=e.subscenes[n])||void 0===u?void 0:u.duration)??0}}function Ft(e,t,n,r,i,o){return arguments.length>7&&void 0!==arguments[7]||(0,y.Z)(),(i,o,a)=>{for(let t=0;t<n;t++)e.removeSubslide(0),i((0,w.Ox)(e.id,t));e.subscenes.length&&r+1<=e.subscenes[0].duration?e.subscenes[0].duration-=r:t.removeScene(e.id)}}function Ht(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:(0,y.Z)();return(s,u,c)=>{const d=c.getSceneGroupById(t);if(!d)throw new D.Hdc("Scene Group missing");const l=d.scenes.findIndex((t=>t.id===e)),_=d.scenes[l];if(!_)throw new D.Hdc("Scene missing");if(!(0,q.xP)(d))throw new D.Hdc("Voice Driven asset missing");const E=_.startTime-d.startTime+(0,q.We)(d),f=E+_.duration;if(n=Math.max(n,E),r=Math.min(r,f),n===r)throw new D.Hdc("Insert must have non-zero duration");const p=_.subscenes.map((e=>e.duration)).map((T=E,e=>T+=e));var T;const h=p.map(((e,t,n)=>0===t?[E,e]:[n[t-1],e])),S=[];h.forEach(((e,t)=>{const[i,o]=e;n>=i&&n<o&&S.push(t),r>=i&&r<o&&S.push(t)}));const m=[],I=[];if((0,X.j9)((()=>{m.push(d.addScene({sceneDesignId:i})),d.moveSceneToIndex(m[0].id,l+1);const e=new V.Z(_);e.copyTalkingHeadContentToScene(m[0],m[0].sceneCategory),m.push(d.addScene({sceneDesignId:_.sceneDesign})),d.moveSceneToIndex(m[1].id,l+2),e.copyContentToScene(m[1],m[1].sceneCategory),ht(m[1].id,_,o,a)(s,u,c),I.push(xt(_,d,S[0],p,E,n,o,a)(s,u,c)),I.push(xt(m[0],d,S[1],p,n,r,o,a)(s,u,c)),Ft(m[0],d,S[0],I[0],n,r,o,a)(s,u,c);const T=S[1]??m[1].subscenes.length;Ft(m[1],d,T,I[1],r,f,o,a)(s,u,c),s((0,M.M6)({sceneId:m[0].id,sceneGroupId:t})),s((0,g.tH)((0,D.q3c)(c),o,a))}),c),(0,q.dB)(d)){let e=(0,Z.T7)(_);const t=(0,Z.T7)(m[0]);if(!c.getSceneById(_.id)){const t=d.scenes.find((e=>e.sceneCategory===C.VideoData.CATEGORY_TALKING_HEAD));t&&(e=(0,Z.T7)(t))}(0,D.QOr)(t,e),m[0].getChildrenByType(C.VideoData.MEDIA_ASSET_TYPE,{deep:!0}).forEach((e=>{if("watermark_1"!==e.name){const t=d.scenes.find((t=>{const n=t.getChildByName(e.name);return n&&e.mediaSourceId===n.mediaSourceId}));t&&(e.brightness=t.getChildByName(e.name).brightness)}}))}const R=d.scenes.find((e=>e.getChildByName("watermark_1")&&e.id!==m[0].id));return R||(m[0].watermark.sourceData=C.VideoData.WATERMARK_NONE),m[0].id}}function Bt(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return(i,o,a)=>{const s=a.getSceneGroupById(e);if(!s)throw new D.R1F("Scene Group missing");if(!(0,q.xP)(s))throw new D.R1F("Voice Driven asset missing");for(let u=1;u<s.scenes.length;u++){const c=s.scenes[u];if(s.scenes[u-1].sceneDesign===c.sceneDesign&&c.sceneDesign===t){const u=c.startTime-s.startTime+(0,q.We)(s)+c.duration;return void jt(c.id,e,t,u,n,r)(i,o,a)}}}}function Zt(e,t,n){const r=e.addScene({sceneDesignId:t});new V.Z(n).copyTalkingHeadContentToScene(r,r.sceneCategory);for(let e=r.subscenes.length-1;e>0;e--)r.removeSubslide(e);return r.subscenes[0].duration=1,n.subscenes[0].duration-=1,r}function jt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,y.Z)();return(a,s,u)=>{const c=u.getSceneGroupById(t);if(!c)throw new D.R1F("Scene Group missing");const d=c.scenes.findIndex((t=>t.id===e)),l=c.scenes[d];if(!l)throw new D.R1F("Scene missing");if(!(0,q.xP)(c))throw new D.R1F("Voice Driven asset missing");let _=l.startTime-c.startTime+(0,q.We)(c),E=_+l.duration;if(r>E)throw new D.R1F("Invalid translation for Insert startTime");let f=!1,p=c.scenes.findIndex((t=>t.id===e))-1;if(p<0){const e=Zt(c,n,l);_+=1,E-=1,c.moveSceneToIndex(e.id,0),p=0,f=!0}let T=c.scenes[p];if(T.sceneDesign!==n&&l.sceneDesign!==n){const e=Zt(c,n,l);_+=1,E-=1,c.moveSceneToIndex(e.id,p+1),f=!0,T=e}(0,X.j9)((()=>{const e=r<=_;let d=Math.abs(Math.round(_)-Math.round(r));if(e){let e=T.subscenes.length-1;for(;d>0;){const t=T.subscenes[e].duration;t-d>1?(T.subscenes[e].duration-=d,l.subscenes[0].duration+=d,d=0):(T.removeSubslide(e),a((0,w.Ox)(T.id,e)),l.subscenes[0].duration+=t,d-=t),e-=1}}else{const e=T.subscenes.length-1,t=0;for(;d>0&&t<l.subscenes.length;){const n=l.subscenes[t].duration;n-d>1?(l.subscenes[t].duration-=d,T.subscenes[e].duration+=d,d=0):(l.removeSubslide(t),a((0,w.Ox)(l.id,t)),T.subscenes[e].duration+=n,d-=n)}}let p=!1;T.subscenes.length<1&&(c.removeScene(T.id),p=!0),T.duration>1&&f&&(E+=1),0!==l.subscenes.length&&Math.round(r)!==Math.round(E)||(a((0,M.ME)({sceneGroupId:t,sceneId:T.id})),a((0,M.s$)()),c.removeScene(l.id),p=!0),p&&Bt(t,n,i,o)(a,s,u)}),u)}}function Yt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,y.Z)();return(a,s,u)=>{const c=u.getSceneGroupById(t);if(!c)throw new D.R1F("Scene Group missing");const d=c.scenes.findIndex((t=>t.id===e)),l=c.scenes[d];if(!l)throw new D.R1F("Scene missing");(0,X.j9)((()=>{const d=c.scenes.findIndex((t=>t.id===e))+1;if(d>c.scenes.length-1){const e=c.addScene({sceneDesignId:n});new V.Z(l).copyTalkingHeadContentToScene(e,e.sceneCategory);for(let t=e.subscenes.length-2;t>=0;t--)e.removeSubslide(t);e.subscenes[0].duration=1,l.subscenes[l.subscenes.length-1].duration>1?l.subscenes[l.subscenes.length-1].duration-=1:l.removeSubslide(l.subscenes.length-1),c.moveSceneToIndex(e.id,d)}let _=c.scenes[d];if(_.sceneDesign!==n){const e=c.addScene({sceneDesignId:n});new V.Z(l).copyTalkingHeadContentToScene(e,e.sceneCategory);for(let t=0;t<l.subscenes.length-1;t++)e.removeSubslide(0);e.subscenes[0].duration=1,l.subscenes[l.subscenes.length-1].duration-=1,c.moveSceneToIndex(e.id,d),_=e}jt(_.id,t,n,r,i,o)(a,s,u)}),u)}}function Wt(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,y.Z)();return(o,a,s)=>{const u=s.getSceneGroupById(t);if(!u)throw new D.R1F("Scene Group missing");const c=u.scenes.findIndex((t=>t.id===e)),d=u.scenes[c];if(!d)throw new D.R1F("Scene missing");if(!(0,q.xP)(u))throw new D.R1F("Voice Driven asset missing");const l=d.startTime-u.startTime+(0,q.We)(u)+d.duration;jt(e,t,n,l,r,i)(o,a,s)}}function Kt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return async(i,o,a)=>{const s=a.getSceneGroupById(e);if(!s)throw console.error(`Could not find sceneGroupId=${e} to create insert`),new D.R1F("Scene Group missing");const u=s.scenes[0];if(!u)throw console.error(`Could not find scene at index ${s.scenes.length-1} in sceneGroupId=${e}`),new D.R1F("Scene missing");if(!s.mediaAsset)throw console.error(`Could not find media asset to create insert for sceneId=${u.id}`),new D.R1F("Media asset missing");const c=s.mediaAsset.startTime,d=Math.max(0,Math.min(t,s.mediaAsset.sourceDuration)),l=d<=c;let _=Math.abs(c-d);if(!l){const e=0;for(;_>0;){const t=s.scenes[e].duration;if(t>_){let t=0;for(;_>0;){const n=s.scenes[e].subscenes[0].duration;n-_>1?(s.scenes[e].subscenes[0].duration-=_,s.mediaAsset.startTime+=_,_=0):(i((0,w.Ox)(s.scenes[e].id,t)),s.scenes[e].removeSubslide(0),s.mediaAsset.startTime+=n,_-=n),t+=1}_=0}else{const n=s.scenes[e].id;1===s.scenes.length?(s.mediaAsset.startTime=_,_=0):(s.removeScene(n),s.mediaAsset.startTime+=t,_-=t);for(let t=s.scenes[e].subscenes.length-1;t>-1;t--)i((0,w.Ox)(n,t))}}}return i((0,g.tH)((0,D.q3c)(a),n,r)),s.scenes[0].id}}function $t(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return async(i,o,a)=>{const s=a.getSceneGroupById(e);if(!s)throw console.error(`Could not find sceneGroupId=${e} to create insert`),new D.R1F("Scene Group missing");const u=s.scenes[s.scenes.length-1];if(!u)throw console.error(`Could not find scene at index ${s.scenes.length-1} in sceneGroupId=${e}`),new D.R1F("Scene missing");if(!s.mediaAsset)throw console.error(`Could not find media asset to create insert for sceneId=${u.id}`),new D.R1F("Media asset missing");const c=s.mediaAsset.endTime,d=Math.max(0,Math.min(t,s.mediaAsset.sourceDuration)),l=d<=c;let _=Math.abs(c-d);if(l){let e=s.scenes.length-1;for(;_>0;){const t=s.scenes[e].duration;if(t>_){let t=s.scenes[e].subscenes.length-1;for(;_>0;){const n=s.scenes[e].subscenes[t].duration;n-_>1?(s.scenes[e].subscenes[t].duration-=_,s.mediaAsset.endTime-=_,_=0):(s.scenes[e].removeSubslide(t),i((0,w.Ox)(s.scenes[e].id,t)),s.mediaAsset.endTime-=n,_-=n),t-=1}_=0}else if(1===s.scenes.length)s.mediaAsset.endTime-=_,_=0;else{const n=s.scenes[e].id;for(let t=s.scenes[e].subscenes.length-1;t>-1;t--)i((0,w.Ox)(n,t));s.removeScene(n),s.mediaAsset.endTime-=t,_-=t}e-=1}}i((0,g.tH)((0,D.q3c)(a),n,r))}}function qt(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,y.Z)();return async(o,a,s)=>{const u=s.getSceneGroupById(e);if(!u)throw console.error(`Could not find sceneGroupId=${e} to create insert`),new D.R1F("Scene Group missing");const c=u.scenes[0];if(!c)throw console.error(`Could not find scene at index ${u.scenes.length-1} in sceneGroupId=${e}`),new D.R1F("Scene missing");if(!u.mediaAsset)throw console.error(`Could not find media asset to create insert for sceneId=${c.id}`),new D.R1F("Media asset missing");const d=u.mediaAsset.startTime,l=Math.max(0,Math.min(n,u.mediaAsset.sourceDuration));if(l<=d){const e=new V.Z(u.scenes[0]),n=u.addScene({sceneDesignId:t});e.copyTalkingHeadContentToScene(n,n.sceneCategory,1),await(0,Z.T7)(n).onSourceLoaded(),n.subscenes[0].duration=d-l,u.mediaAsset.startTime=l,u.moveSceneToIndex(n.id,0)}return o((0,g.tH)((0,D.q3c)(s),r,i)),u.scenes[0].id}}function Xt(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,y.Z)();return async(o,a,s)=>{const u=s.getSceneGroupById(e);if(!u)throw console.error(`Could not find sceneGroupId=${e} to create insert`),new D.R1F("Scene Group missing");const c=u.scenes[u.scenes.length-1];if(!c)throw console.error(`Could not find scene at index ${u.scenes.length-1} in sceneGroupId=${e}`),new D.R1F("Scene missing");if(!u.mediaAsset)throw console.error(`Could not find media asset to create insert for sceneId=${c.id}`),new D.R1F("Media asset missing");const d=u.mediaAsset.endTime,l=Math.max(0,Math.min(n,u.mediaAsset.sourceDuration)),_=l<=d,E=Math.abs(d-l);if(!_){const e=new V.Z(u.scenes[u.scenes.length-1]),n=u.addScene({sceneDesignId:t});e.copyTalkingHeadContentToScene(n,n.sceneCategory,1),await(0,Z.T7)(n).onSourceLoaded(),n.subscenes[0].duration=E,u.mediaAsset.endTime=l}o((0,g.tH)((0,D.q3c)(s),r,i))}}function Jt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,y.Z)();return async(i,o,a)=>{const s=a.getSceneById(e);if(!s)return;const c=s.sceneCategory===C.VideoData.CATEGORY_TALKING_HEAD_INSERT,d=s.sceneGroup,l=(0,m.jl)(o());d.musicVolumeOverride=l,(0,X.j9)((()=>{const _=t.get("assets"),E=[];_.map((t=>{const _=s.getChildByName(t.get("name"),{deep:!0});if(_)switch(t.get("type")){case C.VideoData.TEXT_ASSET_TYPE:_.text=t.get("text"),_.textHighlights=t.get("highlights").toJS(),E.push(_.name);break;case C.VideoData.MEDIA_ASSET_TYPE:_.sourceData=t.get("sourceData").toJS(),s.attribution=t.get("sourceData").get("attribution"),t.get("sourceData").type===C.VideoData.VIDEO_TYPE_BACKGROUND&&(_.isVideo&&_.hasAudio?c?_.volume=0:(_.volume=_.mediaSource===C.VideoData.SOURCE_USER?O.Z.max_audio_volume:O.Z.min_audio_volume,null===d.musicVolumeOverride&&(_.mediaSource===C.VideoData.SOURCE_USER?d.musicVolumeOverride=l<O.Z.duck_audio_volume?l:O.Z.duck_audio_volume:d.musicVolumeOverride=l)):null!==d.musicVolumeOverride||c||(d.musicVolumeOverride=l)),ie(e,i,o,a,u.sc,u.fU,n,r);break;case C.VideoData.ICON_ASSET_TYPE:_.replace(t.get("sourceData").toJS())}})),s.getChildrenByType(C.VideoData.TEXT_ASSET_TYPE,{deep:!0}).filter((e=>e.isEditable&&!E.includes(e.name))).forEach((e=>{e.text="",e.textHighlights=[]}))}),s),(0,te.iF)(s),s.duration=t.get("duration"),Qt(s.id)(i,o,a),t.get("results_explanation")&&(window._scene_creation_explanations||(window._scene_creation_explanations=[]),window._scene_creation_explanations.push(t.get("results_explanation").toJS()))}}function zt(e,t,n,r,o){let a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:(0,y.Z)();(0,i.dC)((()=>{const i=!1;Se(e.id,t.get("text_pos"),a,s,i)(n,r,o),t.get("media_attributes").forEach((t=>{if(!e.hasChildByName(t.get("asset_name"),{deep:!0}))return void console.warn(`cannot find child: ${t.get("asset_name")} so cannot apply recommended attributes`);const u=e.getChildByName(t.get("asset_name"),{deep:!0});u.fillMode===C.VideoData.FILL_COVER&&(null!==t.get("x_offset")&&null!==t.get("y_offset")&&ge(e.id,u.id,t.get("x_offset"),t.get("y_offset"),a,s,i)(n,r,o),me(e.id,u.id,t.get("background_animation"),a,s,i)(n,r,o),Ie(e.id,u.id,t.get("brightness"),a,s,i)(n,r,o))}))}))}function Qt(e,t){return(n,r,i)=>{const o={};if(e){const n=i.getSceneById(e);n&&n.getChildrenByType(C.VideoData.MEDIA_ASSET_TYPE).find((e=>!e.linkToSceneGroup))&&(o[n.id]=t?"":(0,te.R3)(n))}else i.scenes.forEach((e=>{e.getChildrenByType(C.VideoData.MEDIA_ASSET_TYPE).find((e=>!e.linkToSceneGroup))&&(o[e.id]=t?"":(0,te.R3)(e))}));n((0,M.PR)(o))}}},20116:function(e,t,n){"use strict";function r(e,t,n,r){const i={};for(const o in e){const a=e[o];"function"==typeof a&&(i[o]=function(){return a(...arguments)(t,n,r)})}return i}function i(e,t){if("function"!=typeof e)throw new Error("expected callback function");if("object"!=typeof t||"boolean"!=typeof t.autoDraw)throw new Error("expected luminaryObject to be a Luminary object with autoDraw property");const n=t.autoDraw,r=t.autoUpdate;t.autoDraw=!1,t.autoUpdate=!1;try{e()}finally{t.autoDraw=n,t.autoUpdate=r}}n.d(t,{j9:function(){return i},pA:function(){return r}})},18326:function(e,t,n){"use strict";n.d(t,{$C:function(){return w},C$:function(){return x},CO:function(){return F},Cs:function(){return $},De:function(){return v},Iz:function(){return V},J_:function(){return T},Jk:function(){return d},Kw:function(){return C},MP:function(){return J},Nx:function(){return U},O3:function(){return N},PN:function(){return M},PP:function(){return k},QK:function(){return K},RY:function(){return y},Tf:function(){return P},Tg:function(){return z},V2:function(){return c},Vh:function(){return g},WP:function(){return S},We:function(){return q},X3:function(){return X},ZU:function(){return _},_1:function(){return Y},b8:function(){return p},bZ:function(){return h},dB:function(){return H},e5:function(){return G},eC:function(){return L},fn:function(){return B},h1:function(){return m},qb:function(){return f},tQ:function(){return I},uj:function(){return Z},vj:function(){return E},w8:function(){return W},xG:function(){return R},xP:function(){return j},xj:function(){return D},yq:function(){return b},z7:function(){return A}});var r=n(35369),i=n(86130),o=n(13795),a=n(28074),s=n(59163),u=n(37485);function c(e){return e.scenes.filter((e=>(0,a.wcH)(e).some((e=>o.$j.includes(e.mediaSource))))).map((e=>e.number))}function d(e){return e.scenes.filter((e=>(0,a.nGQ)(e).some((e=>o.$j.includes(e.sourceData.source))))).map((e=>e.number))}function l(e){const t=[];return e.scenes.forEach((e=>{(0,a.hwX)(e).forEach((n=>{const r=n.sourceData.source,o=i.Z.badge_required_for_source(r);o!==i.l.UPGRADE_FOR_MARKETPLACE&&o!==i.l.UPGRADE_FOR_UNLIMITED&&o!==i.l.UPGRADE_FOR_ICONS&&o!==i.l.MARKETPLACE||t.push({sceneId:e.id,level:o,sourceData:n.sourceData})}))})),t}function _(e){let t=null;const n=l(e);for(const e of n){const n=e.level;n===i.l.UPGRADE_FOR_MARKETPLACE?t=i.l.UPGRADE_FOR_MARKETPLACE:n===i.l.UPGRADE_FOR_UNLIMITED&&t!==i.l.UPGRADE_FOR_MARKETPLACE?t=i.l.UPGRADE_FOR_UNLIMITED:n===i.l.MARKETPLACE&&t!==i.l.UPGRADE_FOR_MARKETPLACE&&t!==i.l.UPGRADE_FOR_UNLIMITED?t=i.l.MARKETPLACE:n===i.l.UPGRADE_FOR_ICONS&&t!==i.l.UPGRADE_FOR_MARKETPLACE&&t!==i.l.UPGRADE_FOR_UNLIMITED&&(t=i.l.UPGRADE_FOR_ICONS)}return t}function E(e){const t=l(e);for(const e of t){const t=e.level;if(t===i.l.UPGRADE_FOR_MARKETPLACE||t===i.l.UPGRADE_FOR_UNLIMITED||t===i.l.UPGRADE_FOR_ICONS)return!0}return!1}function f(e){const t=l(e);if(0===t.length)return null;const n=t[0];return{slideId:n.sceneId,...n.sourceData}}function p(e){return e.scenes.some((e=>(0,a.wcH)(e).some((e=>e.isEditorial))))}function T(e){return e.scenes.some((e=>e.subscenes.some((e=>{for(const t of R(e))if(t.text.trim().length>0)return!0;return!1}))))}function h(e){return e.scenes.some((e=>e.sceneCategory===s.VideoData.CATEGORY_BRAND))}function S(e){return e.scenes.map((e=>e.duration-e.customTransition.transitionDuration))}function g(e){return e.scenes.map((e=>e.startTime))}function m(e){return e.scenes.map((e=>e.endTime))}function I(e){return e.scenes.reduce(((e,t)=>e.set(`${t.startTime}`,t.id)),r.default.Map())}function R(e){return e?e.getChildrenByType(s.VideoData.TEXT_ASSET_TYPE,{deep:!0}).filter((e=>e.isEditable)):[]}function A(e){const t=e.getParent();return(null==t?void 0:t.classType)!==s.VideoData.GROUP_ASSET_TYPE?e.classType===s.VideoData.GROUP_ASSET_TYPE?e:null:A(t)}function y(e){return e?e.getChildrenByType(s.VideoData.TEXT_ASSET_TYPE,{deep:!0}).filter((e=>e.isEditable)):[]}function v(e){return e?e.getChildrenByType(s.VideoData.TEXT_ASSET_TYPE,{deep:!0}).filter((e=>e.isEditable)):[]}function O(e){return R(e).filter((e=>e.text)).sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>e.text))}function D(e){return O(e).join(" ")}function C(e){return e.subscenes.flatMap(O)}function N(e){return C(e).join(" ")}function L(e){return e.scenes.map((e=>e.id))}function P(e){return e.scenes.map((e=>e.sceneDesign))}function b(e,t){const n=e.getSceneById(t);if(n)return n.sceneDesign}function U(e,t){const n=e.getSceneById(t);if(n)return n.sceneCategory}function w(e){const t=e.getChildren({deep:!0}).filter((e=>e.classType===s.VideoData.TEXT_ASSET_TYPE||e.classType===s.VideoData.MEDIA_ASSET_TYPE||e.classType===s.VideoData.ICON_ASSET_TYPE)).filter((e=>e.isEditable)),n=e=>e.classType===s.VideoData.MEDIA_ASSET_TYPE||e.classType===s.VideoData.ICON_ASSET_TYPE;let r=null,i=null;if(t.forEach(((e,t)=>{const o=e.classType===s.VideoData.TEXT_ASSET_TYPE&&e.text.length>0;(n(e)||o)&&(null===r&&(r=t),i=t)})),null===r||null===i)return null;const o=e.getBounds(),a=o.y<t[r].getBounds().y,u=t[i].getBounds(),c=o.y+o.height>u.y+u.height,d=n(t[r]),l=n(t[i]);return a||c||d||l?0!==r?{textAssetId:t[r].id,targetAssetId:t[r-1].id,position:"top"}:i!==t.length-1?{textAssetId:t[i].id,targetAssetId:t[i+1].id,position:"bottom"}:null:null}function M(e){const t=v(e),n={},r=new Set,i=t.length-1;for(let e=i;e>=0;e--){const o=t[e];if(0===o.text.length)continue;const a=[],s=e=>0===e.text.length&&!e.hasTextEditingEnabled;if(e>0){const n=t[e-1];s(n)&&(a.push({targetAssetId:n.id,position:"top"}),r.add(n.id))}if(e<i){const n=t[e+1],i=r.has(n.id),o=s(n);!i&&o&&(a.push({targetAssetId:n.id,position:"bottom"}),r.add(n.id))}a.length&&(n[o.id]=a)}return n}function V(e,t){const n=e.getSceneById(t).getChildren({deep:!0});let r=null,i=null,o=null;const u=[];for(let e=0;e<n.length;e++){const t=n[e];if(t.classType===a.v9E)r=t.name,i=n[e].height,o=n[e].width;else if(t.classType===a.dpc&&t.thumbnailUrl!==s.VideoData.INVISIBLE_IMAGE&&t.isEditable&&t.height>=i&&t.width>=o){u.push(r);break}}return u}function G(e,t){const n=t.index===e.scenes.length-1,r=n?void 0:e.scenes[t.index+1].sceneCategory,i=r===s.VideoData.CATEGORY_OUTRO||r===s.VideoData.CATEGORY_BRAND;return n||i}function k(){return document.querySelector("#luminary-nte-container")}function x(e){const t={[e.name]:{...e.buildColorGraphicsMap()}},n=e.getParent();return n&&n.classType===s.VideoData.GROUP_ASSET_TYPE?{...t,...x(n)}:t}function F(e,t,n){const r=e.getSceneGroupById(t),i=j(r);if(r&&i){for(let e=r.scenes.length-1;e>-1;e--){const t=r.scenes[e];if(t.startTime-r.startTime+i.startTime<n)return t.id}return r.scenes[0].id}}function H(e){return null!==(null==e?void 0:e.mediaAsset)}function B(e){return null!==(null==e?void 0:e.voiceoverAsset)}function Z(e){return H(e)||B(e)}function j(e){return e?e.mediaAsset||e.voiceoverAsset:null}function Y(e,t,n){let{defaultTalkingHeadSceneDesignId:r,defaultVoiceoverSceneDesignId:i}=n;return!(!(0,u.lE)(e)||t===r||t===i)}function W(e){return H(e)?s.VideoData.CATEGORY_TALKING_HEAD:B(e)?s.VideoData.CATEGORY_VOICEOVER:e.scenes.map((e=>e.sceneCategory))[0]}function K(e,t){let{defaultTalkingHeadSceneDesignId:n,defaultVoiceoverSceneDesignId:r}=t;return e.scenes.filter((e=>Y(e.sceneCategory,e.sceneDesign,{defaultTalkingHeadSceneDesignId:n,defaultVoiceoverSceneDesignId:r}))).map((e=>e.id))}function $(e){return H(e)?e.mediaAsset.endTime:B(e)?1e3*e.voiceoverAsset.endTime:0}function q(e){return H(e)?e.mediaAsset.startTime:B(e)?1e3*e.voiceoverAsset.startTime:0}function X(e,t,n){return Math.min(Math.max(e-t,0),n)}function J(e){return e.getChildrenByType(s.VideoData.ICON_ASSET_TYPE,{deep:!0}).length>0}function z(e){return e.getChildrenByType(s.VideoData.MEDIA_ASSET_TYPE,{deep:!0}).filter((e=>e.isEditable)).length>0}},59163:function(e){void 0!==window.Luminary?e.exports=window.Luminary:e.exports=void 0},90613:function(e,t,n){"use strict";n.d(t,{DR:function(){return p},F6:function(){return d},NP:function(){return c},P8:function(){return f},SN:function(){return E},UT:function(){return T},hw:function(){return u},wc:function(){return s},yu:function(){return _}});var r=n(28074),i=n(59163),o=n(36062),a=n(37485);function s(e){return e.getChildrenByType(r.dpc,{deep:!0}).filter((e=>e.isEditable))}function u(e){return[...e.getChildrenByType(r.dpc,{deep:!0}).filter((e=>e.isEditable)),...e.getChildrenByType(i.VideoData.ICON_ASSET_TYPE,{deep:!0}).filter((e=>e.isEditable))]}function c(e){const t=e.getChildrenByType(i.VideoData.GROUP_ASSET_TYPE,{deep:!1});return[...e.getChildren({deep:!1}).filter((e=>e.isEditable)),...t.flatMap((e=>e.getChildren({deep:!0}).filter((e=>e.isEditable))))]}function d(e){return[...e.getChildren({deep:!0}).filter((e=>e.isEditable))]}const l=e=>e.reduce(((e,t)=>e?t.height*t.width>e.height*e.width?t:e:t),null);function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.getChildrenByType(r.dpc,{deep:!0});return n.length?l(t?n.filter((e=>e.isEditable)):n):null}function E(e){let t=e.getChildrenByType(r.dpc,{deep:!0});return t.length?(e.sceneCategory===i.VideoData.CATEGORY_TALKING_HEAD_INSERT&&(t=t.filter((e=>!e.linkToSceneGroup))),l(t.filter((e=>e.isEditable)))):null}function f(e,t){let n,i=0;return t.find((t=>{t.getChildrenByType(r.dpc,{deep:!0}).forEach((r=>{const{normalizedWidth:o,normalizedHeight:s}=(0,a.my)(r,e),u=o*s;u>i&&(i=u,n=t.sceneDesign)}))})),n}function p(e){const t=[i.VideoData.INVISIBLE_IMAGE_SOURCE_DATA.uuid,i.VideoData.BLACK_IMAGE_SOURCE_DATA.uuid],n=[o.z$,o.In,"https://storage.googleapis.com/lumen5-prod-images/logo-placeholder_256.png","https://storage.googleapis.com/lumen5-user-dc8fdb8e-6c6e-4cfa-89c2-25d6ab0552ba/tmppqvm4vqg.png"];return t.includes(e.sourceData.uuid)||n.includes(e.thumbnailUrl)}function T(e){const t=[];return e.scenes.forEach((e=>{t.push(...s(e).filter((e=>!p(e))).map((e=>e.mediaId))),t.push(...(0,r.nGQ)(e).map((e=>e.mediaId)))})),t}},51225:function(e,t,n){"use strict";n.d(t,{FA:function(){return s},q3:function(){return c},um:function(){return a}});var r=n(35369),i=n(97748),o=n.n(i);async function a(e,t){let{canvasParent:n,seekTime:r}=t;await u({luminary:e,canvasParent:n,operation:()=>e.seek(r)})}async function s(e,t){let{canvasParent:n,startTime:r,endTime:i}=t;await u({luminary:e,canvasParent:n,operation:()=>e.play(r,i)})}async function u(e){let{luminary:t,canvasParent:n,operation:r}=e,i=!1;n!==t.canvasParent&&(t.canvasParent=null,i=!0),t.isDrawingToCanvas||await t.startDrawingToCanvas(),await r(),i&&(t.canvasParent=n)}function c(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{passed:i,message:a}=e.validateState();return i||o().notify(new Error(a)),t=e.save(!1),n&&(t=r.default.fromJS(t)),t}},66628:function(e,t,n){"use strict";var r,i,o,a=n(578),s=n(71857);class u{static getInstance(){return u.instance||(u.instance=new u),u.instance}constructor(){this._startTimeMap=new Map,this._isPrometheusAvailable=!1,window.Prometheus&&(this.prometheus=window.Prometheus,this._isPrometheusAvailable=!0),this._isPrometheusAvailable&&a.BQ.forEach((e=>this.prometheus.register(e)))}overrideContext(e){this._isPrometheusAvailable&&this.prometheus.overrideContext(e)}start(e){this._isPrometheusAvailable&&e&&this._startTimeMap.set(e,performance.now())}async end(e,t,n){if(!this._isPrometheusAvailable)return;const r=performance.now();return new Promise(((i,o)=>{this._startTimeMap.has(e)||o(new Error("ActivityProfiler recevied an end timing call for an event that doesn't exist")),(0,s.tZ)(t,n)||o(new Error(`\n                    ActivityProfiler is not recording performance of ${t} because of an unexpected metric name or label set.\n                `));const u=a.IM[t],c=r-this._startTimeMap.get(e);this.prometheus.observe(u,c,n),this._startTimeMap.delete(e),i()}))}}function c(){if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;if("undefined"!=typeof self)return self;throw new Error("unable to find global context")}let d;o=void 0,(i="instance")in(r=u)?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,c().ActivityProfiler?d=c().ActivityProfiler:(d=u.getInstance(),c().ActivityProfiler=d),t.Z=d},71857:function(e,t,n){"use strict";n.d(t,{hT:function(){return o},tZ:function(){return i},zN:function(){return a}});var r=n(578);function i(e,t){const n=r.IM[e];if(!n)return console.error(`Unknown metric name: ${e}`),!1;for(const e in n.labelValueMapping){if(void 0===t[e])return!1;const r=t[e];if(!n.labelValueMapping[e].includes(r))return!1}return!0}const o={ONE_TO_TEN:"1-10",ELEVEN_TO_TWNETY:"11-20",TWENTY_ONE_TO_THIRTY:"21-30",THIRTY_ONE_TO_FORTY:"31-40",FORTY_PLUS:"40+"};function a(e){return e<=10?o.ONE_TO_TEN:e>10&&e<=20?o.ELEVEN_TO_TWNETY:e>20&&e<=30?o.TWENTY_ONE_TO_THIRTY:e>30&&e<=40?o.THIRTY_ONE_TO_FORTY:o.FORTY_PLUS}},578:function(e,t,n){"use strict";n.d(t,{BQ:function(){return E},IM:function(){return f},Os:function(){return d},Xk:function(){return u},ax:function(){return _},gi:function(){return a}});var r=n(71857);const i=[1e3,2500,5e3,1e4,25e3,6e4],o="app_load_creator_ms_total",a={name:o,description:"Time from selecting a format until the creator has loaded",type:"histogram",histogramBuckets:i,labelValueMapping:{action:["new","edit","instant"]},getLabels:function(e){return{action:e}}},s="app_change_aspect_ratio_duration_ms_total",u={name:s,description:"Time from when aspect ratio is changed until all scene previews have been updated",type:"histogram",histogramBuckets:i,labelValueMapping:{slideCount:Object.values(r.hT)},getLabels:function(e){return{slideCount:(0,r.zN)(e)}}},c="app_undo_redo_duration_ms_total",d={name:c,description:"Time from when undo or redo is clicked until all scene previews have been updated",type:"histogram",histogramBuckets:i,labelValueMapping:{slideCount:Object.values(r.hT)},getLabels:function(e){return{slideCount:(0,r.zN)(e)}}},l="app_initial_video_load_duration_ms_total",_={name:l,description:"Time from when after we have fetched everything and start loading the video until all scene previews are ready",type:"histogram",histogramBuckets:i,labelValueMapping:{slideCount:Object.values(r.hT)},getLabels:function(e){return{slideCount:(0,r.zN)(e)}}},E=[a,u,d,_],f={[o]:a,[s]:u,[c]:d,[l]:_}},23955:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,".common-ui-backdrop{position:absolute;width:100%;height:100%;transition:opacity 300ms ease}.common-ui-backdrop.clickable{cursor:pointer;pointer-events:initial}.common-ui-backdrop.backdrop-hidden{z-index:-1;opacity:0;transition:opacity 300ms ease,z-index 0ms step-end 300ms}.common-ui-backdrop.backdrop-visible{opacity:1}.common-ui-backdrop.backdrop-visible.z-content{z-index:1}.common-ui-backdrop.backdrop-visible.z-slide-overlay{z-index:101}.common-ui-backdrop.backdrop-visible.z-dashboard-backdrop{z-index:7}.common-ui-backdrop.fixed-backdrop{position:fixed;top:0;right:0;bottom:0;left:0}.common-ui-backdrop .content-loading{background-color:rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center;height:100%;width:100%}.common-ui-backdrop .content-blur{height:100%;width:100%;background-color:rgba(255,255,255,.5);opacity:1;transition:opacity 300ms ease}@supports((-webkit-backdrop-filter: none) or (backdrop-filter: none)){.common-ui-backdrop .content-blur{background-color:rgba(255,255,255,.5);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}}",""]),t.Z=a},79678:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,'.modal{padding:0 !important;text-align:center}.modal::before{display:inline-block;margin-right:-4px;height:100%;vertical-align:middle;content:""}.modal .modal-dialog{position:relative;display:inline-block;vertical-align:middle;text-align:left}@media(min-width: 576px){.modal .modal-dialog.modal-sm{width:300px}}@media(min-width: 576px){.modal .modal-dialog.modal-default{width:300px}}@media(min-width: 768px){.modal .modal-dialog.modal-default{width:600px}}@media(min-width: 576px){.modal .modal-dialog.modal-lg{width:300px}}@media(min-width: 768px){.modal .modal-dialog.modal-lg{width:600px}}@media(min-width: 992px){.modal .modal-dialog.modal-lg{width:900px}}.modal .modal-dialog.modal-fs{width:100%;height:100%;max-width:100%;max-height:100%;margin:0}.modal .modal-dialog.modal-fs .modal-content{height:100%}.modal .modal-dialog.modal-fs .modal-content .modal-body{max-height:100%}.modal .modal-dialog.overflow-unset .modal-body{overflow-y:unset}.modal .modal-header{position:relative;border-bottom-width:0;padding:1rem 2rem;min-height:3.5rem}.modal .modal-header .btn-close{position:absolute;top:0;right:2rem;height:100%;z-index:1}.modal .modal-header [data-sharewithclosebtn=true]{padding-right:4rem}.modal .modal-content>hr{margin:0;border-color:#dddee6}.modal .modal-content .modal-body{overflow-y:auto;max-height:85vh}.modal .modal-content .modal-body hr{margin-right:-20px;margin-left:-20px}.modal .modal-content .modal-button-footer{display:flex}.modal .modal-content .modal-button-footer button:not(:first-child){margin-left:.45rem}.modal .modal-content .modal-button-footer.justify-center{justify-content:center}.modal .modal-content .modal-button-footer.justify-right{justify-content:flex-end}.modal .modal-contents-loading{position:absolute;top:0;left:0}',""]),t.Z=a},47740:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,".text-correct-input{display:inline-block;position:relative;background-color:#c8cbd9;padding-left:3px;padding-right:3px;margin-left:-2px;margin-right:-2px;border:none;outline-color:#48505e;outline-width:1px;text-overflow:clip;min-width:5px}.text-correct-input span{margin-left:-1px;margin-right:-1px;display:inline-block}",""]),t.Z=a},22687:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,".word-node{border-radius:4px;transition:background-color 100ms;caret-color:rgba(0,0,0,0);position:relative;display:inline-block}.word-node.empty{display:inline;pointer-events:none}.word-node.currently-spoken,.word-node:not(.empty):hover{background-color:#c8cbd9}",""]),t.Z=a},62443:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,".trim-node{display:none;color:pink;text-decoration:line-through}.trim-node .word-node:hover{background-color:rgba(0,0,0,0) !important}",""]),t.Z=a},33645:function(e){e.exports={uuid:"ddae4433-7c34-4551-a752-8b6619adba71",attribution:"",source:7,source_id:"346805630",license:"CC0",is_editorial:!1,has_audio:!1,has_voiceover:null,duration:2e4,width:1920,height:1080,thumbnail_url:"https://storage.googleapis.com/lumen5-prod-video/thumb-H7Rn-contentvideoShIZkZR4Zj4uxbdalvideoblocks-620df7a81bdafc61bd92b90e_svqspx3y9_1080__D.mp4",preview_url:"https://storage.googleapis.com/lumen5-prod-video/preview-NFZN-contentvideoShIZkZR4Zj4uxbdalvideoblocks-620df7a81bdafc61bd92b90e_svqspx3y9_1080__D.mp4",render_url:"https://storage.googleapis.com/lumen5-prod-video/render-nqbk-contentvideoShIZkZR4Zj4uxbdalvideoblocks-620df7a81bdafc61bd92b90e_svqspx3y9_1080__D.mp4",poster_url:"https://storage.googleapis.com/lumen5-prod-video/tmp-placeholder-imgfqPZAd.jpg",type:"video"}}}]);
//# sourceMappingURL=8074-7594f8eb5c39f30ecd6c.js.map